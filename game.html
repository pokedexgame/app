<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>The Pok√©dex Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="manifest" href="manifest.json">
  <style>
    /* --- NOTE: This includes ALL game styles from the original file, but excludes the #install-screen styles --- */
    * {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
    }

    html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden; /* Prevent body from scrolling */
    }

    body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%);
    color: #000;
    user-select: none;
    display: flex;
    flex-direction: column;
    }

    /* Header with stats */
    #game-header {
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 0.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
    position: sticky;
    top: 0;
    z-index: 100;
    flex-shrink: 0; /* Prevent header from shrinking */
    }

    .stat-item {
    display: flex;
    align-items: center;
    gap: 0.3rem;
    background: rgba(255,255,255,0.1);
    padding: 0.3rem 0.6rem;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    font-size: 0.8rem;
    cursor: pointer; /* Make all stat items look clickable */
    transition: background-color 0.2s;
    }

    .stat-item:hover {
        background: rgba(255,255,255,0.2);
    }

    .streak-counter {
    background: linear-gradient(45deg, #ff6b6b, #feca57);
    color: white;
    font-weight: bold;
    }

    /* Main game container */
    .game-container {
    display: flex;
    flex-direction: column;
    flex: 1; /* Allow container to fill remaining vertical space */
    min-height: 0; /* Allow shrinking */
    padding: 1rem;
    gap: 0;
    }

    /* Pokedex Device */
    .pokedex-device {
    background: linear-gradient(145deg, #dc143c, #b22222);
    border-radius: 20px;
    padding: 1rem;
    padding-top: 3.5rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    border: 3px solid #8b0000;
    position: relative;
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    }

    .pokedex-device::before {
    content: '';
    position: absolute;
    top: 0.5rem;
    left: 0.75rem;
    width: 38px;
    height: 38px;
    background: radial-gradient(circle, #00ffff 30%, #0080ff  70%);
    border-radius: 50%;
    border: 3px solid white;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
    }

    .pokedex-lights {
    position: absolute;
    top: 0.8rem;
    right: 1rem;
    display: flex;
    gap: 0.5rem;
    }

    .light {
    width: 15px;
    height: 15px;
    border-radius: 50%;
    border: 2px solid #333;
    }

    .light.red { background: #ff0000; }
    .light.yellow { background: #ffff00; }
    .light.green { background: #00ff00; }

    .screen-container {
    background: #f0f0f0;
    border-radius: 15px;
    padding: 1rem;
    border: 3px solid #333;
    position: relative;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    }

    .pokemon-display {
    background: radial-gradient(circle, #ffffff 20%, #87ceeb 80%);
    border-radius: 10px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    flex: 1;
    min-height: 0;
    padding: 0.2rem;
    }

    #battle-hud {
        position: absolute;
        top: 5px;
        left: 5px;
        right: 5px;
        bottom: 5px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 10px;
        pointer-events: none;
        z-index: 20;
    }

    .hp-container {
        background: rgba(0, 0, 0, 0.6);
        color: white;
        padding: 5px 10px;
        border-radius: 10px;
        border: 2px solid #fff;
        box-shadow: 0 2px 5px rgba(0,0,0,0.4);
        display: flex;
        align-items: center;
        gap: 8px;
    }

    #player-hp-container {
        align-self: flex-start;
    }

    #leader-hp-container {
        align-self: flex-end;
    }

    .hp-label {
        font-weight: bold;
        font-size: 0.9rem;
    }

    .hp-bar {
        display: flex;
        gap: 4px;
    }

    .hp-heart {
        font-size: 1.2rem;
        color: #ff4757;
        text-shadow: 0 0 5px #ff4757;
        transition: transform 0.3s ease, opacity 0.3s ease;
    }

    .hp-heart.lost {
        transform: scale(0);
        opacity: 0;
    }

    .pokemon-display.energy-burst {
    background: radial-gradient(circle, #ffffff 10%, #ffff00 30%, #ff6600 60%, #ff0000 100%);
    animation: energyPulse 1s ease-in-out;
    }

    @keyframes energyPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.01); }
    }

    .pokemon-image {
    width: 120%;
    height: 120%;
    object-fit: contain;
    filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
    transition: all 0.3s ease;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    }

    .pokemon-image.shiny {
    filter: drop-shadow(0 0 15px gold) drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
    animation: shinyGlow 2s infinite;
    }

    @keyframes shinyGlow {
    0%, 100% { filter: drop-shadow(0 0 15px gold) drop-shadow(2px 2px 4px rgba(0,0,0,0.3)); box-shadow: 0 0 20px rgba(255, 215, 0, 0.7); }
    50% { filter: drop-shadow(0 0 25px gold) drop-shadow(2px 2px 4px rgba(0,0,0,0.3)); box-shadow: 0 0 30px rgba(255, 215, 0, 1); }
    }

    .screen-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
    padding-top: 0.5rem;
    flex-shrink: 0;
    }

    .red-button {
    width: 20px;
    height: 20px;
    background: #ff0000;
    border-radius: 50%;
    border: 2px solid #333;
    }

    .speaker-grille {
    display: flex;
    flex-direction: column;
    gap: 2px;
    }

    .speaker-line {
    width: 30px;
    height: 2px;
    background: #333;
    }

    #bottom-content-area {
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    position: relative;
    margin-top: 0.5rem;
    }

    .question-answers-area {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    }

    .question-text {
    background: rgba(255,255,255,0.9);
    padding: 0.6rem;
    border-radius: 15px;
    text-align: center;
    font-size: 1.0rem;
    font-weight: bold;
    color: #333;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    min-height: 50px;
    }

    .answers-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    }

    .answer-button {
    background: linear-gradient(145deg, #4ecdc4, #44a08d);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 0.6rem;
    font-size: 0.8rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    min-height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    }

    .answer-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    .answer-button:active {
    transform: translateY(0);
    }

    .answer-button.correct {
    background: linear-gradient(145deg, #4CAF50, #45a049);
    animation: correctPulse 0.6s ease;
    }

    .answer-button.wrong {
    background: linear-gradient(145deg, #f44336, #d32f2f);
    animation: wrongShake 0.6s ease;
    }

    @keyframes correctPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
    }

    @keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
    }


    .pokedex-grid {
    display: flex;
    overflow-x: auto;
    overflow-y: hidden;
    gap: 0.5rem;
    padding: 1rem;
    background: rgba(255,255,255,0.9);
    border-radius: 15px;
    scrollbar-width: thin;
    scrollbar-color: #4ecdc4 transparent;
    flex-shrink: 0;
    margin-top: 0.75rem;
    }

    .pokedex-grid::-webkit-scrollbar { height: 4px; }
    .pokedex-grid::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); border-radius: 4px; }
    .pokedex-grid::-webkit-scrollbar-thumb { background: #4ecdc4; border-radius: 4px; }
    .pokedex-grid::-webkit-scrollbar-thumb:hover { background: #44a08d; }

    .pokemon-card {
    flex: 0 0 auto;
    width: 80px;
    text-align: center;
    background: rgba(255,255,255,0.9);
    border-radius: 10px;
    padding: 0.5rem;
    transition: all 0.3s ease;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .pokemon-card:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .pokemon-card img {
    width: 45px;
    height: 45px;
    object-fit: contain;
    display: block;
    margin: 0 auto 0.25rem;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    }

    .pokemon-card .label {
    font-size: 0.7rem;
    line-height: 1.2;
    color: #333;
    font-weight: bold;
    }

    .shiny-card {
    background: linear-gradient(145deg, #ffd700, #ffed4e);
    animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
    0%, 100% { box-shadow: 0 2px 8px rgba(255,215,0,0.3); }
    50% { box-shadow: 0 4px 20px rgba(255,215,0,0.6); }
    }

    /* --- START: LAYOUT STYLES --- */

    .game-container.info-mode-active {
        padding: 0;
        background: #fff;
    }
    .game-container.info-mode-active #bottom-content-area {
        position: static;
        flex-grow: 1;
        min-height: 0;
    }
    .game-container.info-mode-active #pokedex-info-display {
        position: static;
        height: 100%;
        border-radius: 0;
        background: #fff;
    }

    #pokedex-info-display {
    background: rgba(255,255,255,0.9);
    border-radius: 15px;
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    padding: 0;
    }

    .info-panel-content-area {
        height: 100%;
        overflow-y: auto;
        padding: 1rem 1rem 120px 1rem; /* Space for the fixed back button */
        color: #333;
    }

    #back-button-container {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 1rem;
        background: linear-gradient(to top, rgba(255, 255, 255, 1) 70%, rgba(255, 255, 255, 0));
        z-index: 10;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    /* --- END: LAYOUT STYLES --- */


    .info-panel-content-area h3 {
        text-align: center;
        color: #000;
        margin-bottom: 1rem;
    }

    .info-panel-content-area p, .info-panel-content-area ul {
        line-height: 1.6;
        margin: 0 auto 1rem auto;
        max-width: 500px;
    }

    .info-panel-content-area .settings-toggle {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #f0f0f0;
        padding: 1rem;
        border-radius: 10px;
        margin: 1rem auto;
        max-width: 500px;
    }

    .info-panel-content-area .settings-toggle button {
        font-size: 1.5rem;
        padding: 0.5rem 1rem;
        border: none;
        background: #ddd;
        border-radius: 8px;
        cursor: pointer;
    }

    .info-display-box {
        background: linear-gradient(145deg, #e2e8f0, #f8fafc);
        border: 3px solid #cbd5e0;
        border-radius: 20px;
        padding: 1.5rem;
        text-align: center;
        margin: 1rem auto 2rem auto;
        box-shadow: 0 8px 32px rgba(113, 128, 150, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        color: #2d3748;
        max-width: 300px;
    }

    .info-display-box .value {
        font-size: 2.5rem;
        font-weight: bold;
        display: block;
        margin-bottom: 0.5rem;
        color: #1a202c;
    }

    .info-display-box .label {
        font-size: 1rem;
        color: #4a5568;
    }

    .reset-button-container {
        margin: 2rem auto 0 auto;
        padding-top: 1rem;
        border-top: 1px solid #e2e8f0;
        max-width: 500px;
    }

    .reset-button {
        background: linear-gradient(145deg, #f44336, #d32f2f);
        color: white;
        border: none;
        border-radius: 10px;
        padding: 0.8rem 1.5rem;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
    }
    .reset-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(220, 20, 60, 0.4);
    }

    #pokedex-details-scroller {
        display: flex;
        overflow-x: auto;
        overflow-y: hidden;
        gap: 1rem;
        padding: 1rem;
        margin: 0;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        width: 100%;
    }

    .pokedex-detail-card {
        flex: 0 0 100%;
        scroll-snap-align: center;
        overflow-y: auto;
        padding-bottom: 120px;
    }

    .pokedex-detail-card-inner {
        background: #f0f0f0;
        border-radius: 10px;
        padding: 1rem;
        border: 2px solid #ccc;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
    }


    .pokedex-detail-card-inner h3 {
        margin: 0;
        font-size: 1.4rem;
        text-transform: capitalize;
    }

    .pokedex-detail-card-inner.is-shiny {
        background: linear-gradient(145deg, #fff2a8, #ffd700);
        border-color: #f0c400;
    }

    .pokedex-detail-sprite-container {
        width: clamp(250px, 60vmin, 320px);
        height: clamp(200px, 48vmin, 256px);
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
        border: 5px solid white;
        box-shadow: inset 0 0 15px rgba(0,0,0,0.2), 0 5px 10px rgba(0,0,0,0.2);
    }

    .pokedex-detail-card-inner img {
        width: 90%;
        height: 90%;
        object-fit: contain;
        margin: 0;
        image-rendering: pixelated;
        image-rendering: -moz-crisp-edges;
        image-rendering: crisp-edges;
    }

    .pokedex-detail-card-inner img.shiny {
        filter: drop-shadow(0 0 10px gold);
    }

    .exp-bar-container {
        width: 100%;
        margin-top: 1rem;
        background: rgba(0,0,0,0.1);
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .exp-bar-container:hover { background: rgba(0,0,0,0.15); }
    .exp-bar-header { padding: 0.5rem; }
    .exp-bar-label {
        font-size: 0.8rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 0.25rem;
        display: flex;
        justify-content: space-between;
    }
    .exp-bar-background {
        width: 100%;
        height: 20px;
        background-color: #e0e0e0;
        border-radius: 10px;
        border: 2px solid #ccc;
        overflow: hidden;
    }
    .exp-bar-fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #6890F0, #4ecdc4);
        border-radius: 8px;
        transition: width 0.5s ease-in-out;
        position: relative;
        overflow: hidden;
    }
    .exp-bar-fill.maxed {
        background: linear-gradient(90deg, #ffd700, #feca57);
        animation: shinyGlowBg 2s infinite;
    }
    .exp-bar-info {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
        font-size: 0.75rem;
        color: #555;
        padding: 0 0.5rem;
    }
    .exp-bar-info.show {
        max-height: 100px;
        padding: 0 0.5rem 0.5rem;
        transition: max-height 0.4s ease-in;
    }

    @keyframes shinyGlowBg {
    0%, 100% { box-shadow: inset 0 0 10px rgba(255,255,255,0.7); }
    50% { box-shadow: inset 0 0 20px rgba(255,255,255,1); }
    }

    .stats-accordion {
        width: 100%;
        background: rgba(255,255,255,0.7);
        border-radius: 10px;
        overflow: hidden;
        margin-top: 1rem;
    }

    .stats-accordion-header {
        background: rgba(0,0,0,0.05);
        padding: 0.75rem 1rem;
        cursor: pointer;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #ddd;
    }
    .stats-accordion-header:last-of-type { border-bottom: none; }

    .stats-accordion-header::after {
        content: '‚ñº';
        font-size: 0.8em;
        transition: transform 0.3s ease;
    }

    .stats-accordion-header.active::after { transform: rotate(180deg); }

    .stats-accordion-content {
        padding: 0 1rem;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.4s ease-out, padding 0.4s ease-out;
    }
    .stats-accordion-content.show {
        padding: 1rem;
        max-height: 500px;
        transition: max-height 0.5s ease-in, padding 0.5s ease-in;
    }
    .stats-accordion-content div {
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #ddd;
    }
    .stats-accordion-content div:last-child {
        border-bottom: none;
        padding-bottom: 0;
    }

    #back-button{
    background: linear-gradient(145deg, #ff6b6b, #ee5a52);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 0.8rem 1.5rem;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
    width: 100%;
    flex-shrink: 0;
    }

    #back-button:hover{
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .evolve-button {
        background: linear-gradient(145deg, #8e44ad, #9b59b6);
        color: white;
        border: none;
        border-radius: 10px;
        padding: 0.8rem 1.5rem;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
    }

    .evolve-button:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(142, 68, 173, 0.4);
    }

    .evolve-button:disabled {
        background: #aaa;
        cursor: not-allowed;
        opacity: 0.7;
    }

    #bonus-pokeballs-container {
    display: flex;
    gap: 10px;
    align-items: center;
    }

    .bonus-pokeball {
    width: 30px;
    height: 30px;
    transition: filter 0.4s ease-in-out;
    filter: brightness(0) opacity(0.7);
    }

    .bonus-pokeball.unlocked {
    filter: brightness(1) opacity(1);
    transform: scale(1.1);
    }

    #center-feature-container {
        min-height: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-grow: 1;
    }
    #active-buffs-container {
    display: flex;
    gap: 5px;
    align-items: center;
    }
    .buff-icon {
    width: 25px;
    height: 25px;
    transition: all 0.3s ease;
    cursor: help;
    }
    .buff-icon:hover { transform: scale(1.1); }

    .particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: 10;
    }

    .particle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: #ffd700;
    border-radius: 50%;
    animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
    0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
    100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    .achievement-popup {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    background: linear-gradient(145deg, #4ecdc4, #44a08d);
    color: white;
    padding: 1rem;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    transition: transform 0.5s ease, visibility 0.5s;
    z-index: 200;
    max-width: 90%;
    text-align: center;
    visibility: hidden;
    pointer-events: none;
    }

    .achievement-popup.show {
    transform: translateX(-50%) translateY(0);
    visibility: visible;
    pointer-events: auto;
    }

    .team-rocket-mode .pokemon-display { background: linear-gradient(45deg, #4a0e4e, #2d1b69); color: white; }
    .team-rocket-mode .question-text { background: linear-gradient(145deg, #8e44ad, #9b59b6); color: white; }

    .rocket-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 80px;
    cursor: pointer;
    z-index: 500;
    animation: rocket-enter 0.2s ease-out forwards, rocket-shake 0.5s 0.2s linear infinite;
    text-shadow: 0 5px 15px rgba(0,0,0,0.4);
    }

    .rocket-popup.fade-out { animation: rocket-leave 0.2s ease-in forwards; }

    .rocket-text-popup {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(220, 20, 60, 0.9);
        color: white;
        padding: 4rem;
        font-size: 1.2rem;
        font-weight: bold;
        z-index: 500;
        box-shadow: 0 -5px 15px rgba(0,0,0,0.4);
        text-align: center;
        animation: rocket-text-enter 0.3s ease-out forwards;
    }

    .rocket-text-popup.fade-out { animation: rocket-text-leave 0.3s ease-in forwards; }

    .meowth-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 80px;
    cursor: pointer;
    z-index: 500;
    animation: rocket-enter 0.2s ease-out forwards, rocket-shake 0.5s 0.2s linear infinite;
    text-shadow: 0 5px 15px rgba(255, 215, 0, 0.5);
    }

    .meowth-popup.fade-out { animation: rocket-leave 0.2s ease-in forwards; }

    .meowth-text-popup {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(255, 193, 7, 0.9);
        color: #333;
        padding: 4rem;
        font-size: 1.2rem;
        font-weight: bold;
        z-index: 500;
        box-shadow: 0 -5px 15px rgba(0,0,0,0.4);
        text-align: center;
        animation: rocket-text-enter 0.3s ease-out forwards;
    }

    .meowth-text-popup.fade-out { animation: rocket-text-leave 0.3s ease-in forwards; }


    @keyframes rocket-text-enter {
        from { transform: translateY(100%); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    @keyframes rocket-text-leave {
        from { transform: translateY(0); opacity: 1; }
        to { transform: translateY(100%); opacity: 0; }
    }

    @keyframes rocket-enter {
    from { transform: translate(-50%, -50%) scale(0); opacity: 0; }
    to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes rocket-leave {
    from { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    to { transform: translate(-50%, -50%) scale(0); opacity: 0; }
    }

    @keyframes rocket-shake {
    0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
    25% { transform: translate(-52%, -48%) rotate(-5deg); }
    75% { transform: translate(-48%, -52%) rotate(5deg); }
    }

    #map-button, #achievements-button, #shinies-button, #shop-button, #bag-button, #badges-button { cursor: pointer; }

    /* --- CORRECTED SCROLLING GRID STYLES --- */
    /* This style is for HORIZONTAL grids like the Shop and Shinies page AND NOW THE BADGE PAGE */
    #item-display-grid, #shiny-grid, #badge-grid {
        display: grid;
        grid-auto-flow: column;
        grid-template-rows: repeat(2, auto);
        gap: 0.5rem;
        overflow-x: auto;
        overflow-y: hidden;
        padding-bottom: 1rem;
        justify-content: flex-start;
        align-items: start;
    }

    .shiny-grid-item {
    background: rgba(0,0,0,0.05);
    border-radius: 10px;
    padding: 5px;
    text-align: center;
    width: 90px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    }
    .shiny-grid-item img {
    width: 70px;
    height: 70px;
    object-fit: contain;
    filter: drop-shadow(0 0 5px gold);
    }
    .shiny-grid-item p {
    margin: 0;
    font-size: 0.7rem;
    font-weight: bold;
    }

    .item-grid-entry {
        background: white;
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 0.5rem;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        display: flex;
        flex-direction: column;
        transition: all 0.2s ease;
        width: 140px;
    }
    .item-grid-entry.can-buy:hover, .item-grid-entry.can-use:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .item-grid-entry.can-use { cursor: pointer; }
    .item-grid-entry.cannot-use { cursor: default; opacity: 0.7; }

    .item-grid-entry img { width: 50px; height: 50px; margin: 0 auto 0.5rem; }
    .item-grid-entry h4 { margin: 0 0 0.5rem 0; font-size: 0.9rem; }
    .item-grid-entry p { margin: 0 0 0.4rem 0; font-size: 0.75rem; color: #555; flex-grow: 1; }
    .item-grid-entry .price, .item-grid-entry .item-count { font-weight: bold; color: #333; font-size: 1rem; margin-bottom: 0.5rem; }
    .item-grid-entry .buy-button, .item-grid-entry .use-button {
        background: linear-gradient(145deg, #4ecdc4, #44a08d);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 0.5rem 1rem;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.2s;
        width: 100%;
        margin-top: auto;
    }
    .item-grid-entry .buy-button:disabled, .item-grid-entry .use-button:disabled { background: #aaa; cursor: not-allowed; }

    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        backdrop-filter: blur(5px);
    }
    .modal-content {
        background: #fff;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        text-align: center;
        max-width: 90%;
    }
    .modal-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-top: 1.5rem;
    }
    .modal-buttons button {
        padding: 0.6rem 1.2rem;
        font-weight: bold;
        cursor: pointer;
        border-radius: 8px;
        border: none;
        min-width: 100px;
    }
    .evolution-grid {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin: 1.5rem 0;
    }
    .evolution-option {
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 10px;
        transition: background-color 0.2s ease;
    }
    .evolution-option:hover { background-color: #eee; }
    .evolution-option img { width: 80px; height: 80px; }
    .evolution-option p {
        margin: 0.5rem 0 0 0;
        font-weight: bold;
        text-transform: capitalize;
    }
    .modal-cancel-button {
        background: linear-gradient(145deg, #ff6b6b, #ee5a52);
        color: white;
    }

    .gym-leader-mode .pokemon-display { background: linear-gradient(145deg, #333, #555); }
    .gym-leader-mode .question-text { background: #fff; color: #333; border: 3px solid #feca57; }

    .e4-mode .pokemon-display { background: linear-gradient(145deg, #4a0e4e, #2d1b69); }
    .e4-mode .question-text { background: #fff; color: #333; border: 3px solid #ffd700; }

    .badge-entry {
        background: white;
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 1rem;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 160px; /* Fixed width for horizontal scrolling */
    }

    /* --- NEW: Style for the clickable challenge badge --- */
    .badge-entry.e4-challenge-active {
        cursor: pointer;
        border-color: #ffd700;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
        animation: shinyGlow 2s infinite;
    }

    .badge-entry.locked {
        opacity: 0.6;
        filter: grayscale(80%);
    }
    .badge-entry img {
        width: 64px;
        height: 64px;
        margin-bottom: 0.5rem;
    }
    .badge-entry h4 {
        margin: 0 0 0.5rem 0;
        font-size: 1rem;
        text-transform: capitalize;
    }
    .badge-entry p {
        margin: 0 0 0.2rem 0;
        font-size: 0.8rem;
        color: #555;
        flex-grow: 1;
    }

    .badge-earned-animation { animation: scaleDown 0.4s ease-in-out; }

    @keyframes scaleDown {
        50% { transform: scale(0.9); }
        100% { transform: scale(1); }
    }

    @media (max-width: 480px) {
    .game-container:not(.info-mode-active) { padding: 0.5rem; gap: 0.2rem; }
    .stat-item { font-size: 0.7rem; padding: 0.2rem 0.4rem; }
    .question-text { font-size: 1rem; padding: 0.8rem; }
    .answer-button { font-size: 0.7rem; padding: 0.5rem; }
    }

    .hidden { display: none !important; }

    .fade-out { opacity: 0; transition: opacity 0.3s ease; }
    .fade-in { opacity: 1; transition: opacity 0.3s ease; }

    .shiny-showcase {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        padding: 1rem;
        max-height: calc(100vh - 200px);
        overflow-y: auto;
    }

    .shiny-pokemon-card {
        background: linear-gradient(145deg, #dc143c, #b22222);
        border: 3px solid #ffd700;
        border-radius: 20px;
        padding: 1.5rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        transition: all 0.4s ease;
        box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    .shiny-pokemon-card::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient( 45deg, transparent, rgba(255, 215, 0, 0.1), transparent );
        transform: rotate(45deg);
        animation: shimmerSweep 3s infinite;
    }

    @keyframes shimmerSweep {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    }

    .shiny-pokemon-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 12px 40px rgba(255, 215, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        border-color: #ffed4a;
    }

    @keyframes crownFloat {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-5px) rotate(5deg); }
    }
    .shiny-sprite-container {
        width: 220px;
        height: 180px;
        margin: 0 auto 1rem;
        background: radial-gradient(circle, #87ceeb 0%, #4682b4 100%);
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border: 4px solid rgba(255, 215, 0, 0.6);
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.3);
    }
    .shiny-sprite-container::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 15px;
        background: linear-gradient( 45deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%, rgba(255, 255, 255, 0.1) 100% );
    }
    @keyframes rainbowSpin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .shiny-sprite {
        width: 160px;
        height: 160px;
        object-fit: contain;
        position: relative;
        z-index: 2;
        filter: drop-shadow(0 0 15px gold) drop-shadow(0 0 30px rgba(255, 215, 0, 0.8)) brightness(1.1) contrast(1.1);
        animation: gentleBob 3s ease-in-out infinite;
    }
    @keyframes gentleBob {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
    }

    .shiny-info { position: relative; z-index: 5; }

    .shiny-info .shiny-name {
        font-size: 1.4rem;
        font-weight: bold;
        color: #ffd700;
        margin: 0 0 0.5rem 0;
        letter-spacing: 1px;
    }

    .shiny-number {
        font-size: 1rem;
        color: #ffed4a;
        opacity: 0.9;
        margin: 0;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    }

    .shiny-sparkles {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
        top: 0;
        left: 0;
    }

    .sparkle {
        position: absolute;
        width: 8px;
        height: 8px;
        background: radial-gradient(circle, #ffd700 0%, transparent 70%);
        border-radius: 50%;
        animation: sparkleFloat 3s ease-in-out infinite;
    }

    .sparkle:nth-child(1) { top: 20%; left: 15%; animation-delay: 0s; }
    .sparkle:nth-child(2) { top: 30%; right: 20%; animation-delay: 0.5s; }
    .sparkle:nth-child(3) { bottom: 25%; left: 25%; animation-delay: 1s; }
    .sparkle:nth-child(4) { bottom: 35%; right: 15%; animation-delay: 1.5s; }
    .sparkle:nth-child(5) { top: 60%; left: 80%; animation-delay: 2s; }

    @keyframes sparkleFloat {
        0%, 100% { opacity: 0; transform: translateY(0px) scale(0.5); }
        50% { opacity: 1; transform: translateY(-10px) scale(1); }
    }
    .shiny-pokemon-card::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(255, 140, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 60% 20%, rgba(255, 255, 255, 0.05) 0%, transparent 40%);
        border-radius: 20px;
        pointer-events: none;
        animation: redAreaGlow 4s ease-in-out infinite;
    }

    @keyframes redAreaGlow {
        0%, 100% { opacity: 0.7; }
        50% { opacity: 1; }
    }

    .shiny-pokemon-card .shiny-sparkles .sparkle {
        background: radial-gradient(circle, #ffd700 0%, #ffed4a 50%, transparent 70%);
        box-shadow: 0 0 6px rgba(255, 215, 0, 0.8);
    }

    .shiny-pokemon-card .shiny-sparkles .sparkle:nth-child(1) { top: 15%; left: 10%; animation-delay: 0s; background: radial-gradient(circle, #ffd700 0%, transparent 70%); }
    .shiny-pokemon-card .shiny-sparkles .sparkle:nth-child(2) { top: 25%; right: 15%; animation-delay: 0.7s; background: radial-gradient(circle, #ffed4a 0%, transparent 70%); }
    .shiny-pokemon-card .shiny-sparkles .sparkle:nth-child(3) { bottom: 20%; left: 20%; animation-delay: 1.4s; background: radial-gradient(circle, #fff 0%, transparent 70%); }
    .shiny-pokemon-card .shiny-sparkles .sparkle:nth-child(4) { bottom: 30%; right: 10%; animation-delay: 2.1s; background: radial-gradient(circle, #ffd700 0%, transparent 70%); }
    .shiny-pokemon-card .shiny-sparkles .sparkle:nth-child(5) { top: 50%; left: 85%; animation-delay: 2.8s; background: radial-gradient(circle, #ffed4a 0%, transparent 70%); }

    .red-area-sparkles {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
        top: 0;
        left: 0;
        z-index: 3;
    }

    .red-sparkle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, transparent 70%);
        border-radius: 50%;
        animation: redSparkleFloat 5s ease-in-out infinite;
    }

    .red-sparkle:nth-child(1) { top: 10%; left: 25%; animation-delay: 0s; }
    .red-sparkle:nth-child(2) { top: 70%; left: 75%; animation-delay: 1s; }
    .red-sparkle:nth-child(3) { top: 40%; left: 5%; animation-delay: 2s; }
    .red-sparkle:nth-child(4) { top: 80%; left: 30%; animation-delay: 3s; }
    .red-sparkle:nth-child(5) { top: 20%; left: 90%; animation-delay: 4s; }

    @keyframes redSparkleFloat {
        0%, 100% { opacity: 0; transform: translateY(0px) scale(0.5); }
        25% { opacity: 0.6; transform: translateY(-5px) scale(0.8); }
        50% { opacity: 1; transform: translateY(-10px) scale(1); }
        75% { opacity: 0.6; transform: translateY(-5px) scale(0.8); }
    }

    .shiny-pokemon-card::before {
        background: linear-gradient( 135deg, transparent 0%, rgba(255, 255, 255, 0.1) 25%, rgba(255, 215, 0, 0.15) 50%, rgba(255, 255, 255, 0.1) 75%, transparent 100% );
        animation: enhancedShimmer 4s ease-in-out infinite;
    }

    @keyframes enhancedShimmer {
        0% { transform: translateX(-150%) translateY(-150%) rotate(45deg); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateX(150%) translateY(150%) rotate(45deg); opacity: 0; }
    }
    .shiny-empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: #888;
    }

    .shiny-empty-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
        opacity: 0.5;
    }

    .achievement-showcase {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        padding: 1rem;
        max-height: calc(100vh - 200px);
        overflow-y: auto;
    }

    .achievement-card {
        background: linear-gradient(145deg, #4a5568, #2d3748);
        border: 3px solid #718096;
        border-radius: 20px;
        padding: 1.5rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        transition: all 0.4s ease;
        box-shadow: 0 8px 32px rgba(113, 128, 150, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        color: #f7fafc;
    }

    .achievement-card::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient( 45deg, transparent, rgba(160, 174, 192, 0.1), transparent );
        transform: rotate(45deg);
        animation: shimmerSweep 3.5s infinite;
    }

    .achievement-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 12px 40px rgba(113, 128, 150, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        border-color: #a0aec0;
    }

    .achievement-card.locked {
        background: linear-gradient(145deg, #2d3748, #1a202c);
        border-color: #4a5568;
        opacity: 0.6;
        filter: grayscale(50%);
    }
    .achievement-card.locked:hover {
        transform: none;
        box-shadow: 0 8px 32px rgba(113, 128, 150, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }


    .achievement-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        text-shadow: 0 0 15px rgba(160, 174, 192, 0.5);
        line-height: 1;
    }

    .achievement-title {
        font-size: 1.2rem;
        font-weight: bold;
        color: #e2e8f0;
        margin: 0 0 0.5rem 0;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    }

    .achievement-description {
        font-size: 0.9rem;
        color: #a0aec0;
        line-height: 1.4;
        margin: 0;
    }

    .achievement-prize {
        margin-top: 1rem;
        font-size: 1rem;
        font-weight: bold;
        color: #f7fafc;
        background: rgba(255, 255, 255, 0.1);
        padding: 0.25rem 0.5rem;
        border-radius: 8px;
        display: inline-block;
    }

    .achievement-empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: #888;
    }

    .achievement-empty-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
        opacity: 0.5;
    }
  </style>
</head>
<body>

  <div id="game-screen">
      <div id="game-header">
        <div class="stat-item" id="pokedex-counter-button">
          <span>üì±</span>
          <span id="pokedex-counter">0 / 151</span>
        </div>
        <div class="stat-item" id="badges-button">
            <span>üõ°Ô∏è</span>
            <span id="badge-counter">0 / 8</span>
        </div>
        <div class="stat-item" id="map-button">
          <span>üó∫Ô∏è</span>
        </div>
        <div class="stat-item" id="achievements-button">
          <span>üèÖ</span>
          <span id="achievement-counter">0</span>
        </div>
        <div class="stat-item streak-counter" id="streak-counter-button">
          <span>üî•</span>
          <span id="streak-counter">0</span>
        </div>
        <div class="stat-item" id="shinies-button">
          <span>‚≠ê</span>
          <span id="shiny-counter">0</span>
        </div>
        <div class="stat-item" id="currency-counter-display">
          <span>¬•</span>
          <span id="currency-counter">0</span>
        </div>
        <div class="stat-item" id="bag-button">
          <span>üéí</span>
        </div>
        <div class="stat-item" id="shop-button">
          <span>üõí</span>
        </div>
        <div class="stat-item" id="sound-toggle">
          <span>‚öôÔ∏è</span>
        </div>
      </div>
      <div class="game-container">
        <div class="pokedex-device" id="pokedex-device">
          <div class="pokedex-lights">
            <div class="light red"></div>
            <div class="light yellow"></div>
            <div class="light green"></div>
          </div>
          <div class="screen-container">
            <div class="pokemon-display" id="pokemon-display">
              <div id="battle-hud" class="hidden">
                  <div id="leader-hp-container" class="hp-container">
                      <span class="hp-label">Leader HP:</span>
                      <div class="hp-bar" id="leader-hp-bar"></div>
                  </div>
                  <div id="player-hp-container" class="hp-container">
                      <span class="hp-label">Your HP:</span>
                      <div class="hp-bar" id="player-hp-bar"></div>
                  </div>
              </div>
              <img id="pokemon-image" class="pokemon-image" src="" alt="Pokemon" />
              <div class="particles" id="game-particles"></div>
            </div>
            <div class="screen-details">
              <div class="red-button"></div>
              <div id="center-feature-container">
                <div id="bonus-pokeballs-container" class="hidden">
                  </div>
                <div id="active-buffs-container"></div>
              </div>
              <div class="speaker-grille">
                <div class="speaker-line"></div>
                <div class="speaker-line"></div>
                <div class="speaker-line"></div>
                <div class="speaker-line"></div>
              </div>
            </div>
          </div>
        </div>
        <div id="bottom-content-area">
          <div class="question-answers-area" id="question-answers-area">
            <div class="question-text" id="question-text">Loading...</div>
            <div class="answers-grid" id="answers-grid"></div>
          </div>
          <div id="pokedex-info-display" class="hidden">
            </div>
        </div>
        <div class="pokedex-grid" id="pokedex-grid"></div>
      </div>
      <div id="achievement-popup" class="achievement-popup">
        <h3 style="margin: 0 0 0.5rem 0;">üèÜ Achievement Unlocked!</h3>
        <p id="achievement-text" style="margin: 0;"></p>
      </div>
      <div id="rocket-popup" class="rocket-popup hidden">üöÄ</div>
      <div id="rocket-text-popup" class="rocket-text-popup hidden">Hit the Rocket to stop Jessie & James!</div>
      <div id="meowth-popup" class="meowth-popup hidden">üí∞</div>
      <div id="meowth-text-popup" class="meowth-text-popup hidden">Hit the Coins to stop Meowth!</div>
      <div id="evolution-modal" class="modal-overlay hidden">
        <div class="modal-content">
          <h3 id="evolution-modal-title">Evolve Eevee</h3>
          <p>Choose an evolution:</p>
          <div id="evolution-options-grid" class="evolution-grid">
            </div>
          <button id="evolution-cancel-button" class="modal-cancel-button">Cancel</button>
        </div>
      </div>
      <div id="confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
          <h3 id="confirm-modal-title">Confirm</h3>
          <p id="confirm-modal-text">Are you sure?</p>
          <div class="modal-buttons">
              <button id="confirm-modal-cancel" class="modal-cancel-button">Cancel</button>
              <button id="confirm-modal-ok" class="evolve-button">Confirm</button>
          </div>
        </div>
      </div>
  </div>

  <script id="pokedex-data" type="application/json">
   [
  {
    "id": 1,
    "name": "Bulbasaur",
    "height": "0.7 m",
    "weight": "6.9 kg",
    "ability": "Overgrow",
    "move": ["Tackle","Growl","Leech Seed","Vine Whip","PoisonPowder","Razor Leaf","Growth","Sleep Powder","SolarBeam", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Mega Drain", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Monster, Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Pallet Town",
      "Cerulean City"
    ]
  },
  {
    "id": 2,
    "name": "Ivysaur",
    "height": "1.0 m",
    "weight": "13.0 kg",
    "ability": "Overgrow",
    "move": ["Tackle","Growl","Leech Seed","Vine Whip","PoisonPowder","Razor Leaf","Growth","Sleep Powder","SolarBeam", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Mega Drain", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Monster, Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Evolve Bulbasaur"
    ]
  },
  {
    "id": 3,
    "name": "Venusaur",
    "height": "2.0 m",
    "weight": "100.0 kg",
    "ability": "Overgrow",
    "move": ["Tackle","Growl","Leech Seed","Vine Whip","PoisonPowder","Razor Leaf","Growth","Sleep Powder","SolarBeam", "Swords Dance", "Hyper Beam", "Body Slam", "Take Down", "Double-Edge", "Mega Drain", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Monster, Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Evolve Ivysaur"
    ]
  },
  {
    "id": 4,
    "name": "Charmander",
    "height": "0.6 m",
    "weight": "8.5 kg",
    "ability": "Blaze",
    "move": ["Scratch","Growl","Ember","Leer","Rage","Slash","Flamethrower", "Mega Punch", "Swords Dance", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Dragon Rage", "Fire Blast", "Dig", "Cut", "Strength", "Toxic", "Mimic", "Double Team", "Reflect", "Bide", "Fire Spin", "Rest", "Substitute"],
    "egg_group": "Dragon, Monster",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Pallet Town",
      "Route 24"
    ]
  },
  {
    "id": 5,
    "name": "Charmeleon",
    "height": "1.1 m",
    "weight": "19.0 kg",
    "ability": "Blaze",
    "move": ["Scratch","Growl","Ember","Leer","Rage","Slash","Flamethrower", "Mega Punch", "Swords Dance", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Dragon Rage", "Fire Blast", "Dig", "Cut", "Strength", "Toxic", "Mimic", "Double Team", "Reflect", "Bide", "Fire Spin", "Rest", "Substitute"],
    "egg_group": "Dragon, Monster",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Evolve Charmander"
    ]
  },
  {
    "id": 6,
    "name": "Charizard",
    "height": "1.7 m",
    "weight": "90.5 kg",
    "ability": "Blaze",
    "move": ["Scratch","Growl","Ember","Leer","Rage","Slash","Flamethrower", "Mega Punch", "Swords Dance", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Dragon Rage", "Fire Blast", "Dig", "Cut", "Strength", "Fly", "Toxic", "Mimic", "Double Team", "Reflect", "Bide", "Fire Spin", "Rest", "Substitute", "Hyper Beam"],
    "egg_group": "Dragon, Monster",
    "type": ["Fire","Flying"],
    "super_effective": ["Bug","Fighting","Grass","Ice"],
    "weak_against": ["Electric","Rock","Water"],
    "locations": [
      "Evolve Charmeleon"
    ]
  },
  {
    "id": 7,
    "name": "Squirtle",
    "height": "0.5 m",
    "weight": "9.0 kg",
    "ability": "Torrent",
    "move": ["Tackle","Tail Whip","Bubble","Water Gun","Bite","Withdraw","Skull Bash","Hydro Pump", "Mega Punch", "Mega Kick", "Ice Beam", "Blizzard", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Submission", "Counter", "Seismic Toss", "Dig", "Strength", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Monster, Water 1",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Pallet Town",
      "Vermilion City"
    ]
  },
  {
    "id": 8,
    "name": "Wartortle",
    "height": "1.0 m",
    "weight": "22.5 kg",
    "ability": "Torrent",
    "move": ["Tackle","Tail Whip","Bubble","Water Gun","Bite","Withdraw","Skull Bash","Hydro Pump", "Mega Punch", "Mega Kick", "Ice Beam", "Blizzard", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Submission", "Counter", "Seismic Toss", "Dig", "Strength", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Monster, Water 1",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Squirtle"
    ]
  },
  {
    "id": 9,
    "name": "Blastoise",
    "height": "1.6 m",
    "weight": "85.5 kg",
    "ability": "Torrent",
    "move": ["Tackle","Tail Whip","Bubble","Water Gun","Bite","Withdraw","Skull Bash","Hydro Pump", "Mega Punch", "Mega Kick", "Ice Beam", "Blizzard", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Submission", "Counter", "Seismic Toss", "Dragon Rage", "Earthquake", "Fissure", "Dig", "Strength", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf", "Hyper Beam"],
    "egg_group": "Monster, Water 1",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Wartortle"
    ]
  },
  {
    "id": 10,
    "name": "Caterpie",
    "height": "0.3 m",
    "weight": "2.9 kg",
    "ability": "Shield Dust",
    "move": ["Tackle","String Shot"],
    "egg_group": "Bug",
    "type": ["Bug"],
    "super_effective": ["Grass","Poison","Psychic"],
    "weak_against": ["Fire","Flying","Rock"],
    "locations": [
      "Route 2",
      "Route 24",
      "Route 25",
      "Viridian Forest"
    ]
  },
  {
    "id": 11,
    "name": "Metapod",
    "height": "0.7 m",
    "weight": "9.9 kg",
    "ability": "Shed Skin",
    "move": ["Harden"],
    "egg_group": "Bug",
    "type": ["Bug"],
    "super_effective": ["Grass","Poison","Psychic"],
    "weak_against": ["Fire","Flying","Rock"],
    "locations": [
      "Viridian Forest",
      "Route 24",
      "Route 25",
      "Evolve Caterpie"
    ]
  },
  {
    "id": 12,
    "name": "Butterfree",
    "height": "1.1 m",
    "weight": "32.0 kg",
    "ability": "Compound Eyes",
    "move": ["Confusion","Stun Spore","Sleep Powder","Supersonic","Whirlwind","Psybeam", "Razor Wind", "Swords Dance", "Take Down", "Double-Edge", "Hyper Beam", "Solar Beam", "Psychic", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Flash"],
    "egg_group": "Bug",
    "type": ["Bug","Flying"],
    "super_effective": ["Fighting","Grass","Poison","Psychic"],
    "weak_against": ["Electric","Fire","Flying","Rock", "Ice"],
    "locations": [
      "Evolve Metapod"
    ]
  },
  {
    "id": 13,
    "name": "Weedle",
    "height": "0.3 m",
    "weight": "3.2 kg",
    "ability": "Shield Dust",
    "move": ["Poison Sting","String Shot"],
    "egg_group": "Bug",
    "type": ["Bug","Poison"],
    "super_effective": ["Grass"],
    "weak_against": ["Fire","Flying","Psychic","Rock"],
    "locations": [
      "Route 2",
      "Route 24",
      "Route 25",
      "Viridian Forest"
    ]
  },
  {
    "id": 14,
    "name": "Kakuna",
    "height": "0.6 m",
    "weight": "10.0 kg",
    "ability": "Shed Skin",
    "move": ["Harden"],
    "egg_group": "Bug",
    "type": ["Bug","Poison"],
    "super_effective": ["Grass"],
    "weak_against": ["Fire","Flying","Psychic","Rock"],
    "locations": [
      "Viridian Forest",
      "Route 24",
      "Route 25",
      "Evolve Weedle"
    ]
  },
  {
    "id": 15,
    "name": "Beedrill",
    "height": "1.0 m",
    "weight": "29.5 kg",
    "ability": "Swarm",
    "move": ["Fury Attack","Focus Energy","Twineedle","Rage","Pin Missile","Agility", "Swords Dance", "Take Down", "Double-Edge", "Hyper Beam", "Cut", "Toxic", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Bug",
    "type": ["Bug","Poison"],
    "super_effective": ["Grass"],
    "weak_against": ["Fire","Flying","Psychic","Rock"],
    "locations": [
      "Evolve Kakuna"
    ]
  },
  {
    "id": 16,
    "name": "Pidgey",
    "height": "0.3 m",
    "weight": "1.8 kg",
    "ability": "Keen Eye",
    "move": ["Gust","Sand Attack","Quick Attack","Whirlwind","Wing Attack","Agility", "Razor Wind", "Take Down", "Double-Edge", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Route 1",
      "Route 2",
      "Route 3",
      "Route 5",
      "Route 6",
      "Route 7",
      "Route 8",
      "Route 12",
      "Route 13",
      "Route 14",
      "Route 15",
      "Route 21",
      "Route 24",
      "Route 25"
    ]
  },
  {
    "id": 17,
    "name": "Pidgeotto",
    "height": "1.1 m",
    "weight": "30.0 kg",
    "ability": "Keen Eye",
    "move": ["Gust","Sand Attack","Quick Attack","Whirlwind","Wing Attack","Agility", "Razor Wind", "Take Down", "Double-Edge", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Route 14",
      "Route 15",
      "Route 21",
      "Evolve Pidgey"
    ]
  },
  {
    "id": 18,
    "name": "Pidgeot",
    "height": "1.5 m",
    "weight": "39.5 kg",
    "ability": "Keen Eye",
    "move": ["Gust","Sand Attack","Quick Attack","Whirlwind","Wing Attack","Agility", "Razor Wind", "Take Down", "Double-Edge", "Hyper Beam", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Evolve Pidgeotto"
    ]
  },
  {
    "id": 19,
    "name": "Rattata",
    "height": "0.3 m",
    "weight": "3.5 kg",
    "ability": "Run Away",
    "move": ["Tackle","Tail Whip","Quick Attack","Hyper Fang","Focus Energy","Super Fang", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Blizzard", "Dig", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Route 1",
      "Route 2",
      "Route 3",
      "Route 4",
      "Route 5",
      "Route 6",
      "Route 7",
      "Route 8",
      "Route 9",
      "Route 10",
      "Route 11",
      "Route 16",
      "Route 18",
      "Route 21",
      "Route 22"
    ]
  },
  {
    "id": 20,
    "name": "Raticate",
    "height": "0.7 m",
    "weight": "18.5 kg",
    "ability": "Run Away",
    "move": ["Tackle","Tail Whip","Quick Attack","Hyper Fang","Focus Energy","Super Fang", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Dig", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Route 16",
      "Route 17",
      "Route 18",
      "Route 21",
      "Evolve Rattata"
    ]
  },
  {
    "id": 21,
    "name": "Spearow",
    "height": "0.3 m",
    "weight": "2.0 kg",
    "ability": "Keen Eye",
    "move": ["Peck","Growl","Leer","Fury Attack","Agility","Drill Peck", "Razor Wind", "Take Down", "Double-Edge", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Route 3",
      "Route 4",
      "Route 9",
      "Route 10",
      "Route 11",
      "Route 16",
      "Route 17",
      "Route 18",
      "Route 22",
      "Route 23"
    ]
  },
  {
    "id": 22,
    "name": "Fearow",
    "height": "1.2 m",
    "weight": "38.0 kg",
    "ability": "Keen Eye",
    "move": ["Peck","Growl","Leer","Fury Attack","Agility","Drill Peck", "Razor Wind", "Take Down", "Double-Edge", "Hyper Beam", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Route 17",
      "Route 18",
      "Route 23",
      "Evolve Spearow"
    ]
  },
  {
    "id": 23,
    "name": "Ekans",
    "height": "2.0 m",
    "weight": "6.9 kg",
    "ability": "Intimidate",
    "move": ["Wrap","Leer","Poison Sting","Bite","Glare","Screech","Acid", "Body Slam", "Take Down", "Double-Edge", "Mega Drain", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Dragon, Field",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Route 4",
      "Route 8",
      "Route 9",
      "Route 10",
      "Route 11",
      "Route 23"
    ]
  },
  {
    "id": 24,
    "name": "Arbok",
    "height": "3.5 m",
    "weight": "65.0 kg",
    "ability": "Intimidate",
    "move": ["Wrap","Leer","Poison Sting","Bite","Glare","Screech","Acid", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Mega Drain", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Dragon, Field",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Evolve Ekans",
      "Cerulean Cave"
    ]
  },
  {
    "id": 25,
    "name": "Pikachu",
    "height": "0.4 m",
    "weight": "6.0 kg",
    "ability": "Static",
    "move": ["ThunderShock","Growl","Tail Whip","Thunder Wave","Quick Attack","Double Team","Slam","Agility","Thunder", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Pay Day", "Submission", "Seismic Toss", "Thunderbolt", "Toxic", "Rage", "Mimic", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Flash", "Surf"],
    "egg_group": "Fairy, Field",
    "type": ["Electric"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Viridian Forest",
      "Power Plant"
    ]
  },
  {
    "id": 26,
    "name": "Raichu",
    "height": "0.8 m",
    "weight": "30.0 kg",
    "ability": "Static",
    "move": ["ThunderShock","Growl","Tail Whip","Thunder Wave","Quick Attack","Double Team","Slam","Agility","Thunder", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Pay Day", "Submission", "Seismic Toss", "Hyper Beam", "Thunderbolt", "Toxic", "Rage", "Mimic", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Flash"],
    "egg_group": "Fairy, Field",
    "type": ["Electric"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Evolve Pikachu",
      "Cinnabar Island",
      "Cerulean Cave"
    ]
  },
  {
    "id": 27,
    "name": "Sandshrew",
    "height": "0.6 m",
    "weight": "12.0 kg",
    "ability": "Sand Veil",
    "move": ["Scratch","Sand Attack","Poison Sting","Slash","Swift","Fury Swipes", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Submission", "Seismic Toss", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Cut", "Strength"],
    "egg_group": "Field",
    "type": ["Ground"],
    "super_effective": ["Electric","Fire","Poison","Rock"],
    "weak_against": ["Grass","Ice","Water"],
    "locations": [
      "Route 4",
      "Route 8",
      "Route 9",
      "Route 10",
      "Route 11",
      "Route 23"
    ]
  },
  {
    "id": 28,
    "name": "Sandslash",
    "height": "1.0 m",
    "weight": "29.5 kg",
    "ability": "Sand Veil",
    "move": ["Scratch","Sand Attack","Poison Sting","Slash","Swift","Fury Swipes", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Seismic Toss", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Cut", "Strength"],
    "egg_group": "Field",
    "type": ["Ground"],
    "super_effective": ["Electric","Fire","Poison","Rock"],
    "weak_against": ["Grass","Ice","Water"],
    "locations": [
      "Evolve Sandshrew",
      "Cerulean Cave"
    ]
  },
  {
    "id": 29,
    "name": "Nidoran‚ôÄ",
    "height": "0.4 m",
    "weight": "7.0 kg",
    "ability": "Poison Point",
    "move": ["Growl","Tackle","Scratch","Poison Sting","Tail Whip","Fury Swipes","Double Kick","Bite","Focus Energy", "Body Slam", "Take Down", "Double-Edge", "Blizzard", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Monster, Field",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Route 22",
      "Safari Zone"
    ]
  },
  {
    "id": 30,
    "name": "Nidorina",
    "height": "0.8 m",
    "weight": "20.0 kg",
    "ability": "Poison Point",
    "move": ["Growl","Tackle","Scratch","Poison Sting","Tail Whip","Fury Swipes","Double Kick","Bite","Focus Energy", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "No Eggs",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Safari Zone",
      "Evolve Nidoran‚ôÄ",
      "Celadon Game Corner"
    ]
  },
  {
    "id": 31,
    "name": "Nidoqueen",
    "height": "1.3 m",
    "weight": "60.0 kg",
    "ability": "Poison Point",
    "move": ["Tackle","Scratch","Poison Sting","Tail Whip","Body Slam", "Mega Punch", "Mega Kick", "Take Down", "Double-Edge", "Pay Day", "Submission", "Counter", "Seismic Toss", "Rock Slide", "Earthquake", "Fissure", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Surf", "Hyper Beam", "Ice Beam", "Bubble Beam"],
    "egg_group": "No Eggs",
    "type": ["Poison","Ground"],
    "super_effective": ["Electric","Fire","Rock", "Bug"],
    "weak_against": ["Ground","Ice","Psychic","Water"],
    "locations": [
      "Evolve Nidorina"
    ]
  },
  {
    "id": 32,
    "name": "Nidoran‚ôÇ",
    "height": "0.5 m",
    "weight": "9.0 kg",
    "ability": "Poison Point",
    "move": ["Leer","Tackle","Horn Attack","Poison Sting","Focus Energy","Fury Attack","Double Kick","Horn Drill", "Body Slam", "Take Down", "Double-Edge", "Blizzard", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Monster, Field",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Route 22",
      "Safari Zone"
    ]
  },
  {
    "id": 33,
    "name": "Nidorino",
    "height": "0.9 m",
    "weight": "19.5 kg",
    "ability": "Poison Point",
    "move": ["Leer","Tackle","Horn Attack","Poison Sting","Focus Energy","Fury Attack","Double Kick","Horn Drill", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Monster, Field",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Safari Zone",
      "Evolve Nidoran‚ôÇ",
      "Celadon Game Corner"
    ]
  },
  {
    "id": 34,
    "name": "Nidoking",
    "height": "1.4 m",
    "weight": "62.0 kg",
    "ability": "Poison Point",
    "move": ["Tackle","Horn Attack","Poison Sting","Thrash", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Pay Day", "Submission", "Counter", "Seismic Toss", "Rock Slide", "Earthquake", "Fissure", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Surf", "Hyper Beam", "Ice Beam", "Bubble Beam"],
    "egg_group": "Monster, Field",
    "type": ["Poison","Ground"],
    "super_effective": ["Electric","Fire","Rock", "Bug"],
    "weak_against": ["Ground","Ice","Psychic","Water"],
    "locations": [
      "Evolve Nidorino"
    ]
  },
  {
    "id": 35,
    "name": "Clefairy",
    "height": "0.6 m",
    "weight": "7.5 kg",
    "ability": "Cute Charm",
    "move": ["Pound","Growl","Sing","Double Slap","Minimize","Defense Curl","Light Screen","Metronome", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Psychic", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Flash"],
    "egg_group": "Fairy",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Mt. Moon",
      "Celadon Game Corner"
    ]
  },
  {
    "id": 36,
    "name": "Clefable",
    "height": "1.3 m",
    "weight": "40.0 kg",
    "ability": "Cute Charm",
    "move": ["Sing","Double Slap","Minimize","Metronome", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Psychic", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Flash"],
    "egg_group": "Fairy",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Evolve Clefairy"
    ]
  },
  {
    "id": 37,
    "name": "Vulpix",
    "height": "0.6 m",
    "weight": "9.9 kg",
    "ability": "Flash Fire",
    "move": ["Ember","Tail Whip","Quick Attack","Roar","Confuse Ray","Flamethrower", "Body Slam", "Take Down", "Double-Edge", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Route 7",
      "Route 8",
      "Pokemon Mansion"
    ]
  },
  {
    "id": 38,
    "name": "Ninetales",
    "height": "1.1 m",
    "weight": "19.9 kg",
    "ability": "Flash Fire",
    "move": ["Ember","Tail Whip","Quick Attack","Roar", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Evolve Vulpix"
    ]
  },
  {
    "id": 39,
    "name": "Jigglypuff",
    "height": "0.5 m",
    "weight": "5.5 kg",
    "ability": "Cute Charm",
    "move": ["Sing","Pound","Disable","Defense Curl","Double Slap","Rest","Body Slam", "Mega Punch", "Mega Kick", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Psychic", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Flash"],
    "egg_group": "Fairy",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Route 3"
    ]
  },
  {
    "id": 40,
    "name": "Wigglytuff",
    "height": "1.0 m",
    "weight": "12.0 kg",
    "ability": "Cute Charm",
    "move": ["Sing","Disable","Double Slap", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Psychic", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Flash"],
    "egg_group": "Fairy",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Evolve Jigglypuff",
      "Cerulean Cave"
    ]
  },
  {
    "id": 41,
    "name": "Zubat",
    "height": "0.8 m",
    "weight": "7.5 kg",
    "ability": "Inner Focus",
    "move": ["Leech Life","Supersonic","Bite","Confuse Ray","Wing Attack","Haze", "Razor Wind", "Take Down", "Double-Edge", "Mega Drain", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Poison","Flying"],
    "super_effective": ["Grass", "Bug", "Fighting"],
    "weak_against": ["Electric","Ice","Psychic","Rock"],
    "locations": [
      "Mt. Moon",
      "Rock Tunnel",
      "Seafoam Islands",
      "Victory Road"
    ]
  },
  {
    "id": 42,
    "name": "Golbat",
    "height": "1.6 m",
    "weight": "55.0 kg",
    "ability": "Inner Focus",
    "move": ["Leech Life","Supersonic","Bite","Confuse Ray","Wing Attack","Haze", "Razor Wind", "Take Down", "Double-Edge", "Hyper Beam", "Mega Drain", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Poison","Flying"],
    "super_effective": ["Grass", "Bug", "Fighting"],
    "weak_against": ["Electric","Ice","Psychic","Rock"],
    "locations": [
      "Seafoam Islands",
      "Victory Road",
      "Cerulean Cave",
      "Evolve Zubat"
    ]
  },
  {
    "id": 43,
    "name": "Oddish",
    "height": "0.5 m",
    "weight": "5.4 kg",
    "ability": "Chlorophyll",
    "move": ["Absorb","PoisonPowder","Stun Spore","Sleep Powder","Acid","Petal Dance", "Swords Dance", "Take Down", "Double-Edge", "Mega Drain", "Solar Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Route 5",
      "Route 6",
      "Route 7",
      "Route 12",
      "Route 13",
      "Route 14",
      "Route 15",
      "Route 24",
      "Route 25"
    ]
  },
  {
    "id": 44,
    "name": "Gloom",
    "height": "0.8 m",
    "weight": "8.6 kg",
    "ability": "Chlorophyll",
    "move": ["Absorb","PoisonPowder","Stun Spore","Sleep Powder","Acid","Petal Dance", "Swords Dance", "Take Down", "Double-Edge", "Mega Drain", "Solar Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Route 12",
      "Route 13",
      "Route 14",
      "Route 15",
      "Evolve Oddish"
    ]
  },
  {
    "id": 45,
    "name": "Vileplume",
    "height": "1.2 m",
    "weight": "18.6 kg",
    "ability": "Chlorophyll",
    "move": ["Stun Spore","Sleep Powder","Acid","Petal Dance", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Mega Drain", "Solar Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Evolve Gloom"
    ]
  },
  {
    "id": 46,
    "name": "Paras",
    "height": "0.3 m",
    "weight": "5.4 kg",
    "ability": "Effect Spore",
    "move": ["Scratch","Stun Spore","Leech Life","Spore","Slash","Growth", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Mega Drain", "Dig", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Bug, Grass",
    "type": ["Bug","Grass"],
    "super_effective": ["Ground","Psychic","Water"],
    "weak_against": ["Fire","Flying","Ice","Poison","Rock", "Bug"],
    "locations": [
      "Mt. Moon",
      "Safari Zone"
    ]
  },
  {
    "id": 47,
    "name": "Parasect",
    "height": "1.0 m",
    "weight": "29.5 kg",
    "ability": "Effect Spore",
    "move": ["Scratch","Stun Spore","Leech Life","Spore","Slash","Growth", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Mega Drain", "Dig", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Bug, Grass",
    "type": ["Bug","Grass"],
    "super_effective": ["Ground","Psychic","Water"],
    "weak_against": ["Fire","Flying","Ice","Poison","Rock", "Bug"],
    "locations": [
      "Evolve Paras",
      "Safari Zone",
      "Cerulean Cave"
    ]
  },
  {
    "id": 48,
    "name": "Venonat",
    "height": "1.0 m",
    "weight": "30.0 kg",
    "ability": "Compound Eyes",
    "move": ["Tackle","Disable","PoisonPowder","Leech Life","Stun Spore","Psybeam","Sleep Powder","Psychic", "Take Down", "Double-Edge", "Mega Drain", "Solar Beam", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Bug",
    "type": ["Bug","Poison"],
    "super_effective": ["Grass"],
    "weak_against": ["Fire","Flying","Psychic","Rock"],
    "locations": [
      "Route 12",
      "Route 13",
      "Route 14",
      "Route 15",
      "Safari Zone"
    ]
  },
  {
    "id": 49,
    "name": "Venomoth",
    "height": "1.5 m",
    "weight": "12.5 kg",
    "ability": "Shield Dust",
    "move": ["Tackle","Disable","PoisonPowder","Leech Life","Stun Spore","Psybeam","Sleep Powder","Psychic", "Razor Wind", "Take Down", "Double-Edge", "Hyper Beam", "Mega Drain", "Solar Beam", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Bug",
    "type": ["Bug","Poison"],
    "super_effective": ["Grass"],
    "weak_against": ["Fire","Flying","Psychic","Rock"],
    "locations": [
      "Evolve Venonat",
      "Safari Zone",
      "Victory Road",
      "Cerulean Cave"
    ]
  },
  {
    "id": 50,
    "name": "Diglett",
    "height": "0.2 m",
    "weight": "0.8 kg",
    "ability": "Sand Veil",
    "move": ["Scratch","Growl","Dig","Sand Attack","Slash","Earthquake", "Body Slam", "Take Down", "Double-Edge", "Fissure", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Rock Slide", "Substitute"],
    "egg_group": "Field",
    "type": ["Ground"],
    "super_effective": ["Electric","Fire","Poison","Rock"],
    "weak_against": ["Grass","Ice","Water"],
    "locations": [
      "Diglett's Cave"
    ]
  },
  {
    "id": 51,
    "name": "Dugtrio",
    "height": "0.7 m",
    "weight": "33.3 kg",
    "ability": "Sand Veil",
    "move": ["Scratch","Growl","Dig","Sand Attack","Slash","Earthquake", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Fissure", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Rock Slide", "Substitute"],
    "egg_group": "Field",
    "type": ["Ground"],
    "super_effective": ["Electric","Fire","Poison","Rock"],
    "weak_against": ["Grass","Ice","Water"],
    "locations": [
      "Evolve Diglett",
      "Diglett's Cave"
    ]
  },
  {
    "id": 52,
    "name": "Meowth",
    "height": "0.4 m",
    "weight": "4.2 kg",
    "ability": "Pickup",
    "move": ["Scratch","Growl","Bite","Pay Day","Screech","Fury Swipes","Slash", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Thunderbolt", "Thunder", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Route 5",
      "Route 6",
      "Route 7",
      "Route 8"
    ]
  },
  {
    "id": 53,
    "name": "Persian",
    "height": "1.0 m",
    "weight": "32.0 kg",
    "ability": "Limber",
    "move": ["Scratch","Growl","Bite","Pay Day","Screech","Fury Swipes","Slash", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Hyper Beam", "Thunderbolt", "Thunder", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Evolve Meowth"
    ]
  },
  {
    "id": 54,
    "name": "Psyduck",
    "height": "0.8 m",
    "weight": "19.6 kg",
    "ability": "Damp",
    "move": ["Scratch","Tail Whip","Disable","Confusion","Fury Swipes","Hydro Pump", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Pay Day", "Submission", "Counter", "Seismic Toss", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Water 1, Field",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Route 24",
      "Route 25",
      "Safari Zone",
      "Seafoam Islands"
    ]
  },
  {
    "id": 55,
    "name": "Golduck",
    "height": "1.7 m",
    "weight": "76.6 kg",
    "ability": "Damp",
    "move": ["Scratch","Tail Whip","Disable","Confusion","Fury Swipes","Hydro Pump", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Pay Day", "Submission", "Counter", "Seismic Toss", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Water 1, Field",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Psyduck",
      "Seafoam Islands"
    ]
  },
  {
    "id": 56,
    "name": "Mankey",
    "height": "0.5 m",
    "weight": "28.0 kg",
    "ability": "Vital Spirit",
    "move": ["Scratch","Leer","Karate Chop","Fury Swipes","Focus Energy","Seismic Toss","Thrash", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Pay Day", "Submission", "Counter", "Rock Slide", "Thunderbolt", "Thunder", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Strength"],
    "egg_group": "Field",
    "type": ["Fighting"],
    "super_effective": ["Ice","Normal","Rock"],
    "weak_against": ["Flying","Psychic"],
    "locations": [
      "Route 5",
      "Route 6",
      "Route 7",
      "Route 8"
    ]
  },
  {
    "id": 57,
    "name": "Primeape",
    "height": "1.0 m",
    "weight": "32.0 kg",
    "ability": "Vital Spirit",
    "move": ["Scratch","Leer","Karate Chop","Fury Swipes","Focus Energy","Seismic Toss","Thrash","Rage", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Pay Day", "Submission", "Counter", "Rock Slide", "Thunderbolt", "Thunder", "Dig", "Toxic", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Strength"],
    "egg_group": "Field",
    "type": ["Fighting"],
    "super_effective": ["Ice","Normal","Rock"],
    "weak_against": ["Flying","Psychic"],
    "locations": [
      "Evolve Mankey",
      "Cerulean Cave"
    ]
  },
  {
    "id": 58,
    "name": "Growlithe",
    "height": "0.7 m",
    "weight": "19.0 kg",
    "ability": "Intimidate",
    "move": ["Bite","Roar","Ember","Leer","Take Down","Agility","Flamethrower", "Body Slam", "Double-Edge", "Dragon Rage", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Route 7",
      "Route 8",
      "Pokemon Mansion"
    ]
  },
  {
    "id": 59,
    "name": "Arcanine",
    "height": "1.9 m",
    "weight": "155.0 kg",
    "ability": "Intimidate",
    "move": ["Roar","Ember","Leer","Take Down", "Body Slam", "Double-Edge", "Hyper Beam", "Dragon Rage", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Evolve Growlithe"
    ]
  },
  {
    "id": 60,
    "name": "Poliwag",
    "height": "0.6 m",
    "weight": "12.4 kg",
    "ability": "Water Absorb",
    "move": ["Bubble","Hypnosis","Water Gun","Double Slap","Body Slam","Amnesia","Hydro Pump", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Psychic", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 1",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Pallet Town",
      "Viridian City",
      "Route 22",
      "Celadon City"
    ]
  },
  {
    "id": 61,
    "name": "Poliwhirl",
    "height": "1.0 m",
    "weight": "20.0 kg",
    "ability": "Water Absorb",
    "move": ["Bubble","Hypnosis","Water Gun","Double Slap","Body Slam","Amnesia","Hydro Pump", "Mega Punch", "Mega Kick", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Submission", "Counter", "Seismic Toss", "Earthquake", "Fissure", "Psychic", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Water 1",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Poliwag",
      "Celadon City",
      "Route 22",
      "Route 23"
    ]
  },
  {
    "id": 62,
    "name": "Poliwrath",
    "height": "1.3 m",
    "weight": "54.0 kg",
    "ability": "Water Absorb",
    "move": ["Hypnosis","Water Gun","Double Slap","Submission","Body Slam", "Mega Punch", "Mega Kick", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Hyper Beam", "Counter", "Seismic Toss", "Earthquake", "Fissure", "Psychic", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Water 1",
    "type": ["Water","Fighting"],
    "super_effective": ["Fire","Ground","Ice","Normal","Rock"],
    "weak_against": ["Electric","Flying","Grass","Psychic"],
    "locations": [
      "Evolve Poliwhirl"
    ]
  },
  {
    "id": 63,
    "name": "Abra",
    "height": "0.9 m",
    "weight": "19.5 kg",
    "ability": "Synchronize",
    "move": ["Teleport", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Psychic", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Human-Like",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Route 24",
      "Route 25",
      "Celadon Game Corner"
    ]
  },
  {
    "id": 64,
    "name": "Kadabra",
    "height": "1.3 m",
    "weight": "56.5 kg",
    "ability": "Synchronize",
    "move": ["Teleport","Confusion","Disable","Psybeam","Recover","Psychic","Reflect", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Human-Like",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Evolve Abra",
      "Cerulean Cave"
    ]
  },
  {
    "id": 65,
    "name": "Alakazam",
    "height": "1.5 m",
    "weight": "48.0 kg",
    "ability": "Synchronize",
    "move": ["Teleport","Confusion","Disable","Psybeam","Recover","Psychic","Reflect", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Human-Like",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Evolve Kadabra (Trade)"
    ]
  },
  {
    "id": 66,
    "name": "Machop",
    "height": "0.8 m",
    "weight": "19.5 kg",
    "ability": "Guts",
    "move": ["Karate Chop","Low Kick","Leer","Focus Energy","Seismic Toss","Submission", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Counter", "Rock Slide", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Human-Like",
    "type": ["Fighting"],
    "super_effective": ["Ice","Normal","Rock"],
    "weak_against": ["Flying","Psychic"],
    "locations": [
      "Rock Tunnel",
      "Victory Road"
    ]
  },
  {
    "id": 67,
    "name": "Machoke",
    "height": "1.5 m",
    "weight": "70.5 kg",
    "ability": "Guts",
    "move": ["Karate Chop","Low Kick","Leer","Focus Energy","Seismic Toss","Submission", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Counter", "Rock Slide", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Human-Like",
    "type": ["Fighting"],
    "super_effective": ["Ice","Normal","Rock"],
    "weak_against": ["Flying","Psychic"],
    "locations": [
      "Evolve Machop",
      "Victory Road"
    ]
  },
  {
    "id": 68,
    "name": "Machamp",
    "height": "1.6 m",
    "weight": "130.0 kg",
    "ability": "Guts",
    "move": ["Karate Chop","Low Kick","Leer","Focus Energy","Seismic Toss","Submission", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Counter", "Rock Slide", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Human-Like",
    "type": ["Fighting"],
    "super_effective": ["Ice","Normal","Rock"],
    "weak_against": ["Flying","Psychic"],
    "locations": [
      "Evolve Machoke (Trade)"
    ]
  },
  {
    "id": 69,
    "name": "Bellsprout",
    "height": "0.7 m",
    "weight": "4.0 kg",
    "ability": "Chlorophyll",
    "move": ["Vine Whip","Growth","Wrap","Sleep Powder","PoisonPowder","Stun Spore","Acid","Razor Leaf","Slam", "Swords Dance", "Take Down", "Double-Edge", "Mega Drain", "Solar Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Route 5",
      "Route 6",
      "Route 7",
      "Route 12",
      "Route 13",
      "Route 14",
      "Route 15",
      "Route 24",
      "Route 25"
    ]
  },
  {
    "id": 70,
    "name": "Weepinbell",
    "height": "1.0 m",
    "weight": "6.4 kg",
    "ability": "Chlorophyll",
    "move": ["Vine Whip","Growth","Wrap","Sleep Powder","PoisonPowder","Stun Spore","Acid","Razor Leaf","Slam", "Swords Dance", "Take Down", "Double-Edge", "Mega Drain", "Solar Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Route 12",
      "Route 13",
      "Route 14",
      "Route 15",
      "Evolve Bellsprout"
    ]
  },
  {
    "id": 71,
    "name": "Victreebel",
    "height": "1.7 m",
    "weight": "15.5 kg",
    "ability": "Chlorophyll",
    "move": ["Sleep Powder","Stun Spore","Acid","Razor Leaf", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Mega Drain", "Solar Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Grass",
    "type": ["Grass","Poison"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Fire", "Ice", "Flying", "Bug", "Psychic"],
    "locations": [
      "Evolve Weepinbell"
    ]
  },
  {
    "id": 72,
    "name": "Tentacool",
    "height": "0.9 m",
    "weight": "45.5 kg",
    "ability": "Clear Body",
    "move": ["Acid","Supersonic","Wrap","Poison Sting","Water Gun","Constrict","Barrier","Screech","Hydro Pump", "Swords Dance", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Mega Drain", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 3",
    "type": ["Water","Poison"],
    "super_effective": ["Fire","Rock", "Bug"],
    "weak_against": ["Electric","Ground","Psychic"],
    "locations": [
      "Pallet Town",
      "Vermilion City",
      "Route 12",
      "Route 13",
      "Route 17",
      "Route 18",
      "Route 19",
      "Route 20",
      "Route 21"
    ]
  },
  {
    "id": 73,
    "name": "Tentacruel",
    "height": "1.6 m",
    "weight": "55.0 kg",
    "ability": "Clear Body",
    "move": ["Acid","Supersonic","Wrap","Poison Sting","Water Gun","Constrict","Barrier","Screech","Hydro Pump", "Swords Dance", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Hyper Beam", "Mega Drain", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 3",
    "type": ["Water","Poison"],
    "super_effective": ["Fire","Rock", "Bug"],
    "weak_against": ["Electric","Ground","Psychic"],
    "locations": [
      "Evolve Tentacool"
    ]
  },
  {
    "id": 74,
    "name": "Geodude",
    "height": "0.4 m",
    "weight": "20.0 kg",
    "ability": "Rock Head",
    "move": ["Tackle","Defense Curl","Rock Throw","Self-Destruct","Harden","Earthquake","Explosion", "Mega Punch", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Rock Slide", "Fissure", "Dig", "Metronome", "Fire Blast", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Mineral",
    "type": ["Rock","Ground"],
    "super_effective": ["Bug","Electric","Fire","Flying","Ice","Poison"],
    "weak_against": ["Fighting","Ground","Ice","Water", "Grass"],
    "locations": [
      "Mt. Moon",
      "Rock Tunnel",
      "Victory Road"
    ]
  },
  {
    "id": 75,
    "name": "Graveler",
    "height": "1.0 m",
    "weight": "105.0 kg",
    "ability": "Rock Head",
    "move": ["Tackle","Defense Curl","Rock Throw","Self-Destruct","Harden","Earthquake","Explosion", "Mega Punch", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Rock Slide", "Fissure", "Dig", "Metronome", "Fire Blast", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Mineral",
    "type": ["Rock","Ground"],
    "super_effective": ["Bug","Electric","Fire","Flying","Ice","Poison"],
    "weak_against": ["Fighting","Ground","Ice","Water", "Grass"],
    "locations": [
      "Evolve Geodude",
      "Victory Road"
    ]
  },
  {
    "id": 76,
    "name": "Golem",
    "height": "1.4 m",
    "weight": "300.0 kg",
    "ability": "Rock Head",
    "move": ["Tackle","Defense Curl","Rock Throw","Self-Destruct","Harden","Earthquake","Explosion", "Mega Punch", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Rock Slide", "Fissure", "Dig", "Metronome", "Fire Blast", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Mineral",
    "type": ["Rock","Ground"],
    "super_effective": ["Bug","Electric","Fire","Flying","Ice","Poison"],
    "weak_against": ["Fighting","Ground","Ice","Water", "Grass"],
    "locations": [
      "Evolve Graveler (Trade)"
    ]
  },
  {
    "id": 77,
    "name": "Ponyta",
    "height": "1.0 m",
    "weight": "30.0 kg",
    "ability": "Run Away",
    "move": ["Ember","Tail Whip","Stomp","Growl","Fire Spin","Take Down","Agility", "Body Slam", "Double-Edge", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Pokemon Mansion"
    ]
  },
  {
    "id": 78,
    "name": "Rapidash",
    "height": "1.7 m",
    "weight": "95.0 kg",
    "ability": "Run Away",
    "move": ["Ember","Tail Whip","Stomp","Growl","Fire Spin","Take Down","Agility", "Body Slam", "Double-Edge", "Hyper Beam", "Pay Day", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Evolve Ponyta"
    ]
  },
  {
    "id": 79,
    "name": "Slowpoke",
    "height": "1.2 m",
    "weight": "36.0 kg",
    "ability": "Oblivious",
    "move": ["Confusion","Disable","Headbutt","Growl","Water Gun","Withdraw","Amnesia","Psychic", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Pay Day", "Earthquake", "Fissure", "Dig", "Teleport", "Toxic", "Rage", "Thunder Wave", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute", "Strength", "Flash", "Surf"],
    "egg_group": "Monster, Water 1",
    "type": ["Water","Psychic"],
    "super_effective": ["Fighting","Fire","Poison"],
    "weak_against": ["Bug","Electric","Grass"],
    "locations": [
      "Route 10",
      "Safari Zone",
      "Seafoam Islands",
      "Celadon City"
    ]
  },
  {
    "id": 80,
    "name": "Slowbro",
    "height": "1.6 m",
    "weight": "78.5 kg",
    "ability": "Oblivious",
    "move": ["Confusion","Disable","Headbutt","Growl","Water Gun","Withdraw","Amnesia","Psychic", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Hyper Beam", "Pay Day", "Submission", "Counter", "Seismic Toss", "Earthquake", "Fissure", "Dig", "Teleport", "Toxic", "Rage", "Thunder Wave", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute", "Strength", "Flash", "Surf"],
    "egg_group": "Monster, Water 1",
    "type": ["Water","Psychic"],
    "super_effective": ["Fighting","Fire","Poison"],
    "weak_against": ["Bug","Electric","Grass"],
    "locations": [
      "Evolve Slowpoke",
      "Seafoam Islands",
      "Route 23"
    ]
  },
  {
    "id": 81,
    "name": "Magnemite",
    "height": "0.3 m",
    "weight": "6.0 kg",
    "ability": "Magnet Pull",
    "move": ["Tackle","Sonic Boom","Thunder Shock","Supersonic","Thunder Wave","Swift","Screech", "Take Down", "Double-Edge", "Thunderbolt", "Thunder", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Mineral",
    "type": ["Electric","Steel"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Power Plant"
    ]
  },
  {
    "id": 82,
    "name": "Magneton",
    "height": "1.0 m",
    "weight": "60.0 kg",
    "ability": "Magnet Pull",
    "move": ["Tackle","Sonic Boom","Thunder Shock","Supersonic","Thunder Wave","Swift","Screech", "Take Down", "Double-Edge", "Hyper Beam", "Thunderbolt", "Thunder", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Mineral",
    "type": ["Electric","Steel"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Evolve Magnemite",
      "Power Plant",
      "Cerulean Cave"
    ]
  },
  {
    "id": 83,
    "name": "Farfetch'd",
    "height": "0.8 m",
    "weight": "15.0 kg",
    "ability": "Keen Eye",
    "move": ["Peck","Sand Attack","Leer","Fury Attack","Swords Dance","Agility","Slash", "Razor Wind", "Body Slam", "Take Down", "Double-Edge", "Cut", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying, Field",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Vermilion City (Trade)"
    ]
  },
  {
    "id": 84,
    "name": "Doduo",
    "height": "1.4 m",
    "weight": "39.2 kg",
    "ability": "Run Away",
    "move": ["Peck","Growl","Fury Attack","Drill Peck","Rage","Agility","Tri Attack", "Body Slam", "Take Down", "Double-Edge", "Fly", "Toxic", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Route 16",
      "Route 17",
      "Route 18",
      "Safari Zone"
    ]
  },
  {
    "id": 85,
    "name": "Dodrio",
    "height": "1.8 m",
    "weight": "85.2 kg",
    "ability": "Run Away",
    "move": ["Peck","Growl","Fury Attack","Drill Peck","Rage","Agility","Tri Attack", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Fly", "Toxic", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Normal","Flying"],
    "super_effective": ["Bug","Grass"],
    "weak_against": ["Electric","Ice","Rock"],
    "locations": [
      "Evolve Doduo",
      "Cerulean Cave"
    ]
  },
  {
    "id": 86,
    "name": "Seel",
    "height": "1.1 m",
    "weight": "90.0 kg",
    "ability": "Thick Fat",
    "move": ["Headbutt","Growl","Aurora Beam","Rest","Take Down","Ice Beam", "Body Slam", "Double-Edge", "Bubble Beam", "Water Gun", "Blizzard", "Pay Day", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Strength", "Surf", "Substitute"],
    "egg_group": "Water 1, Field",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Seafoam Islands"
    ]
  },
  {
    "id": 87,
    "name": "Dewgong",
    "height": "1.7 m",
    "weight": "120.0 kg",
    "ability": "Thick Fat",
    "move": ["Headbutt","Growl","Aurora Beam","Rest","Take Down","Ice Beam", "Body Slam", "Double-Edge", "Bubble Beam", "Water Gun", "Blizzard", "Hyper Beam", "Pay Day", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Strength", "Surf", "Substitute"],
    "egg_group": "Water 1, Field",
    "type": ["Water","Ice"],
    "super_effective": ["Dragon","Flying","Grass","Ground"],
    "weak_against": ["Electric","Fighting","Rock", "Grass"],
    "locations": [
      "Evolve Seel"
    ]
  },
  {
    "id": 88,
    "name": "Grimer",
    "height": "0.9 m",
    "weight": "30.0 kg",
    "ability": "Stench",
    "move": ["Pound","Disable","Poison Gas","Minimize","Sludge","Screech","Acid Armor", "Body Slam", "Mega Drain", "Thunderbolt", "Thunder", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Self-Destruct", "Fire Blast", "Explosion", "Rest", "Substitute"],
    "egg_group": "Amorphous",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Pokemon Mansion",
      "Power Plant"
    ]
  },
  {
    "id": 89,
    "name": "Muk",
    "height": "1.2 m",
    "weight": "30.0 kg",
    "ability": "Stench",
    "move": ["Pound","Disable","Poison Gas","Minimize","Sludge","Screech","Acid Armor", "Body Slam", "Hyper Beam", "Mega Drain", "Thunderbolt", "Thunder", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Self-Destruct", "Fire Blast", "Explosion", "Rest", "Substitute"],
    "egg_group": "Amorphous",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Evolve Grimer",
      "Pokemon Mansion"
    ]
  },
  {
    "id": 90,
    "name": "Shellder",
    "height": "0.3 m",
    "weight": "4.0 kg",
    "ability": "Shell Armor",
    "move": ["Tackle","Withdraw","Supersonic","Clamp","Aurora Beam","Leer","Ice Beam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Blizzard", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 3",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Vermilion City",
      "Route 6",
      "Route 11",
      "Route 19",
      "Route 20",
      "Route 21",
      "Seafoam Islands"
    ]
  },
  {
    "id": 91,
    "name": "Cloyster",
    "height": "1.5 m",
    "weight": "132.5 kg",
    "ability": "Shell Armor",
    "move": ["Withdraw","Supersonic","Clamp","Aurora Beam","Spike Cannon", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 3",
    "type": ["Water","Ice"],
    "super_effective": ["Dragon","Flying","Grass","Ground"],
    "weak_against": ["Electric","Fighting","Rock", "Grass"],
    "locations": [
      "Evolve Shellder"
    ]
  },
  {
    "id": 92,
    "name": "Gastly",
    "height": "1.3 m",
    "weight": "0.1 kg",
    "ability": "Levitate",
    "move": ["Lick","Confuse Ray","Night Shade","Hypnosis","Dream Eater", "Mega Drain", "Thunderbolt", "Thunder", "Psychic", "Self-Destruct", "Explosion", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute"],
    "egg_group": "Amorphous",
    "type": ["Ghost","Poison"],
    "super_effective": ["Psychic", "Poison", "Grass"],
    "weak_against": ["Ground", "Ghost"],
    "locations": [
      "Pokemon Tower"
    ]
  },
  {
    "id": 93,
    "name": "Haunter",
    "height": "1.6 m",
    "weight": "0.1 kg",
    "ability": "Levitate",
    "move": ["Lick","Confuse Ray","Night Shade","Hypnosis","Dream Eater", "Mega Drain", "Thunderbolt", "Thunder", "Psychic", "Self-Destruct", "Explosion", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute"],
    "egg_group": "Amorphous",
    "type": ["Ghost","Poison"],
    "super_effective": ["Psychic", "Poison", "Grass"],
    "weak_against": ["Ground", "Ghost"],
    "locations": [
      "Evolve Gastly",
      "Pokemon Tower"
    ]
  },
  {
    "id": 94,
    "name": "Gengar",
    "height": "1.5 m",
    "weight": "40.5 kg",
    "ability": "Cursed Body",
    "move": ["Lick","Confuse Ray","Night Shade","Hypnosis","Dream Eater", "Mega Punch", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Mega Drain", "Thunderbolt", "Thunder", "Psychic", "Self-Destruct", "Explosion", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Amorphous",
    "type": ["Ghost","Poison"],
    "super_effective": ["Psychic", "Poison", "Grass"],
    "weak_against": ["Ground", "Ghost"],
    "locations": [
      "Evolve Haunter (Trade)"
    ]
  },
  {
    "id": 95,
    "name": "Onix",
    "height": "8.8 m",
    "weight": "210.0 kg",
    "ability": "Rock Head",
    "move": ["Tackle","Screech","Bind","Rock Throw","Rage","Harden", "Body Slam", "Take Down", "Double-Edge", "Earthquake", "Fissure", "Dig", "Self-Destruct", "Explosion", "Toxic", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Mineral",
    "type": ["Rock","Ground"],
    "super_effective": ["Bug","Electric","Fire","Flying","Ice","Poison"],
    "weak_against": ["Fighting","Ground","Ice","Water", "Grass"],
    "locations": [
      "Rock Tunnel",
      "Victory Road"
    ]
  },
  {
    "id": 96,
    "name": "Drowzee",
    "height": "1.0 m",
    "weight": "32.4 kg",
    "ability": "Insomnia",
    "move": ["Pound","Hypnosis","Disable","Confusion","Headbutt","Poison Gas","Psychic","Meditate", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Human-Like",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Route 11"
    ]
  },
  {
    "id": 97,
    "name": "Hypno",
    "height": "1.6 m",
    "weight": "75.6 kg",
    "ability": "Insomnia",
    "move": ["Pound","Hypnosis","Disable","Confusion","Headbutt","Poison Gas","Psychic","Meditate", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Thunder Wave", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Human-Like",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Evolve Drowzee",
      "Cerulean Cave"
    ]
  },
  {
    "id": 98,
    "name": "Krabby",
    "height": "0.4 m",
    "weight": "6.5 kg",
    "ability": "Hyper Cutter",
    "move": ["Bubble","Leer","Vice Grip","Guillotine","Stomp","Crabhammer","Harden", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Water 3",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Vermilion City",
      "Route 6",
      "Route 11",
      "Route 12",
      "Route 13",
      "Route 17",
      "Route 18",
      "Safari Zone",
      "Seafoam Islands"
    ]
  },
  {
    "id": 99,
    "name": "Kingler",
    "height": "1.3 m",
    "weight": "60.0 kg",
    "ability": "Hyper Cutter",
    "move": ["Bubble","Leer","Vice Grip","Guillotine","Stomp","Crabhammer","Harden", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Water 3",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Krabby",
      "Seafoam Islands"
    ]
  },
  {
    "id": 100,
    "name": "Voltorb",
    "height": "0.5 m",
    "weight": "10.4 kg",
    "ability": "Soundproof",
    "move": ["Tackle","Screech","Sonic Boom","Self-Destruct","Light Screen","Swift","Explosion", "Take Down", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Mineral",
    "type": ["Electric"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Route 10",
      "Power Plant"
    ]
  },
  {
    "id": 101,
    "name": "Electrode",
    "height": "1.2 m",
    "weight": "66.6 kg",
    "ability": "Soundproof",
    "move": ["Tackle","Screech","Sonic Boom","Self-Destruct","Light Screen","Swift","Explosion", "Take Down", "Hyper Beam", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash"],
    "egg_group": "Mineral",
    "type": ["Electric"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Evolve Voltorb",
      "Power Plant",
      "Cerulean Cave",
      "Cinnabar Island"
    ]
  },
  {
    "id": 102,
    "name": "Exeggcute",
    "height": "0.4 m",
    "weight": "2.5 kg",
    "ability": "Chlorophyll",
    "move": ["Barrage","Hypnosis","Reflect","Leech Seed","Stun Spore","PoisonPowder","Sleep Powder","Solar Beam", "Take Down", "Double-Edge", "Psychic", "Teleport", "Self-Destruct", "Egg Bomb", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Explosion"],
    "egg_group": "Grass",
    "type": ["Grass","Psychic"],
    "super_effective": ["Fighting","Ground","Poison","Water"],
    "weak_against": ["Bug","Fire","Flying","Ice"],
    "locations": [
      "Safari Zone"
    ]
  },
  {
    "id": 103,
    "name": "Exeggutor",
    "height": "2.0 m",
    "weight": "120.0 kg",
    "ability": "Chlorophyll",
    "move": ["Barrage","Hypnosis","Stomp", "Take Down", "Double-Edge", "Hyper Beam", "Psychic", "Teleport", "Self-Destruct", "Egg Bomb", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength", "Explosion"],
    "egg_group": "Grass",
    "type": ["Grass","Psychic"],
    "super_effective": ["Fighting","Ground","Poison","Water"],
    "weak_against": ["Bug","Fire","Flying","Ice"],
    "locations": [
      "Evolve Exeggcute"
    ]
  },
  {
    "id": 104,
    "name": "Cubone",
    "height": "0.4 m",
    "weight": "6.5 kg",
    "ability": "Rock Head",
    "move": ["Growl","Bone Club","Tail Whip","Headbutt","Leer","Focus Energy","Thrash","Bonemerang","Rage", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Submission", "Counter", "Seismic Toss", "Earthquake", "Fissure", "Dig", "Toxic", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Monster",
    "type": ["Ground"],
    "super_effective": ["Electric","Fire","Poison","Rock"],
    "weak_against": ["Grass","Ice","Water"],
    "locations": [
      "Pokemon Tower"
    ]
  },
  {
    "id": 105,
    "name": "Marowak",
    "height": "1.0 m",
    "weight": "45.0 kg",
    "ability": "Rock Head",
    "move": ["Growl","Bone Club","Tail Whip","Headbutt","Leer","Focus Energy","Thrash","Bonemerang","Rage", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Earthquake", "Fissure", "Dig", "Toxic", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Monster",
    "type": ["Ground"],
    "super_effective": ["Electric","Fire","Poison","Rock"],
    "weak_against": ["Grass","Ice","Water"],
    "locations": [
      "Evolve Cubone",
      "Victory Road",
      "Cerulean Cave"
    ]
  },
  {
    "id": 106,
    "name": "Hitmonlee",
    "height": "1.5 m",
    "weight": "49.8 kg",
    "ability": "Limber",
    "move": ["Double Kick","Meditate","Rolling Kick","Jump Kick","Focus Energy","Hi Jump Kick","Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Metronome", "Swift", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Human-Like",
    "type": ["Fighting"],
    "super_effective": ["Ice","Normal","Rock"],
    "weak_against": ["Flying","Psychic"],
    "locations": [
      "Saffron City (Fighting Dojo)"
    ]
  },
  {
    "id": 107,
    "name": "Hitmonchan",
    "height": "1.4 m",
    "weight": "50.2 kg",
    "ability": "Keen Eye",
    "move": ["Comet Punch","Agility","Fire Punch","Ice Punch","Thunder Punch","Mega Punch","Counter", "Body Slam", "Take Down", "Double-Edge", "Submission", "Seismic Toss", "Metronome", "Swift", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Human-Like",
    "type": ["Fighting"],
    "super_effective": ["Ice","Normal","Rock"],
    "weak_against": ["Flying","Psychic"],
    "locations": [
      "Saffron City (Fighting Dojo)"
    ]
  },
  {
    "id": 108,
    "name": "Lickitung",
    "height": "1.2 m",
    "weight": "65.5 kg",
    "ability": "Own Tempo",
    "move": ["Wrap","Supersonic","Stomp","Disable","Defense Curl","Slam","Screech", "Mega Punch", "Swords Dance", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Earthquake", "Fissure", "Cut", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Monster",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Route 18 (Trade)"
    ]
  },
  {
    "id": 109,
    "name": "Koffing",
    "height": "0.6 m",
    "weight": "1.0 kg",
    "ability": "Levitate",
    "move": ["Tackle","Smog","Sludge","Smokescreen","Self-Destruct","Haze","Explosion", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute"],
    "egg_group": "Amorphous",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Pokemon Mansion"
    ]
  },
  {
    "id": 110,
    "name": "Weezing",
    "height": "1.2 m",
    "weight": "9.5 kg",
    "ability": "Levitate",
    "move": ["Tackle","Smog","Sludge","Smokescreen","Self-Destruct","Haze","Explosion", "Hyper Beam", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute"],
    "egg_group": "Amorphous",
    "type": ["Poison"],
    "super_effective": ["Grass", "Bug"],
    "weak_against": ["Ground","Psychic", "Bug"],
    "locations": [
      "Evolve Koffing",
      "Pokemon Mansion"
    ]
  },
  {
    "id": 111,
    "name": "Rhyhorn",
    "height": "1.0 m",
    "weight": "115.0 kg",
    "ability": "Lightning Rod",
    "move": ["Horn Attack","Stomp","Tail Whip","Fury Attack","Horn Drill","Leer","Take Down", "Body Slam", "Double-Edge", "Pay Day", "Rock Slide", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Monster, Field",
    "type": ["Rock","Ground"],
    "super_effective": ["Bug","Electric","Fire","Flying","Ice","Poison"],
    "weak_against": ["Fighting","Ground","Ice","Water", "Grass"],
    "locations": [
      "Safari Zone"
    ]
  },
  {
    "id": 112,
    "name": "Rhydon",
    "height": "1.9 m",
    "weight": "120.0 kg",
    "ability": "Lightning Rod",
    "move": ["Horn Attack","Stomp","Tail Whip","Fury Attack","Horn Drill","Leer","Take Down", "Mega Punch", "Mega Kick", "Body Slam", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Pay Day", "Submission", "Counter", "Seismic Toss", "Rock Slide", "Earthquake", "Fissure", "Dig", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Monster, Field",
    "type": ["Rock","Ground"],
    "super_effective": ["Bug","Electric","Fire","Flying","Ice","Poison"],
    "weak_against": ["Fighting","Ground","Ice","Water", "Grass"],
    "locations": [
      "Evolve Rhyhorn",
      "Cerulean Cave"
    ]
  },
  {
    "id": 113,
    "name": "Chansey",
    "height": "1.1 m",
    "weight": "34.6 kg",
    "ability": "Natural Cure",
    "move": ["Pound","Double Slap","Sing","Growl","Minimize","Defense Curl","Light Screen","Double-Edge","Egg Bomb","Soft-Boiled", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Solar Beam", "Thunder Wave", "Psychic", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Flash"],
    "egg_group": "Fairy",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Safari Zone",
      "Cerulean Cave"
    ]
  },
  {
    "id": 114,
    "name": "Tangela",
    "height": "1.0 m",
    "weight": "35.0 kg",
    "ability": "Chlorophyll",
    "move": ["Constrict","Bind","Absorb","Vine Whip","PoisonPowder","Stun Spore","Sleep Powder","Slam","Growth", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Mega Drain", "Solar Beam", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute"],
    "egg_group": "Grass",
    "type": ["Grass"],
    "super_effective": ["Ground","Rock","Water"],
    "weak_against": ["Bug","Fire","Flying","Ice","Poison"],
    "locations": [
      "Route 21"
    ]
  },
  {
    "id": 115,
    "name": "Kangaskhan",
    "height": "2.2 m",
    "weight": "80.0 kg",
    "ability": "Early Bird",
    "move": ["Comet Punch","Rage","Bite","Tail Whip","Mega Punch","Leer","Dizzy Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Rock Slide", "Earthquake", "Fissure", "Toxic", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Monster",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Safari Zone"
    ]
  },
  {
    "id": 116,
    "name": "Horsea",
    "height": "0.4 m",
    "weight": "8.0 kg",
    "ability": "Swift Swim",
    "move": ["Bubble","SmokeScreen","Leer","Water Gun","Agility","Hydro Pump", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Dragon, Water 1",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Vermilion City",
      "Route 19",
      "Route 20",
      "Route 21",
      "Seafoam Islands"
    ]
  },
  {
    "id": 117,
    "name": "Seadra",
    "height": "1.2 m",
    "weight": "25.0 kg",
    "ability": "Poison Point",
    "move": ["Bubble","SmokeScreen","Leer","Water Gun","Agility","Hydro Pump", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Hyper Beam", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Dragon, Water 1",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Horsea",
      "Route 23",
      "Seafoam Islands",
      "Cerulean Cave"
    ]
  },
  {
    "id": 118,
    "name": "Goldeen",
    "height": "0.6 m",
    "weight": "15.0 kg",
    "ability": "Swift Swim",
    "move": ["Peck","Tail Whip","Supersonic","Horn Attack","Fury Attack","Waterfall","Horn Drill","Agility", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 2",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Pallet Town",
      "Vermilion City",
      "Route 6",
      "Route 22",
      "Route 23",
      "Route 24",
      "Route 25",
      "Celadon City",
      "Fuchsia City"
    ]
  },
  {
    "id": 119,
    "name": "Seaking",
    "height": "1.3 m",
    "weight": "39.0 kg",
    "ability": "Swift Swim",
    "move": ["Peck","Tail Whip","Supersonic","Horn Attack","Fury Attack","Waterfall","Horn Drill","Agility", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 2",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Goldeen",
      "Fuchsia City",
      "Route 23",
      "Cerulean Cave"
    ]
  },
  {
    "id": 120,
    "name": "Staryu",
    "height": "0.8 m",
    "weight": "34.5 kg",
    "ability": "Illuminate",
    "move": ["Tackle","Water Gun","Harden","Rapid Spin","Minimize","Swift","Light Screen","Recover","Hydro Pump", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Psychic", "Teleport", "Thunder Wave", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Flash", "Surf"],
    "egg_group": "Water 3",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Pallet Town",
      "Vermilion City",
      "Route 19",
      "Route 20",
      "Route 21",
      "Seafoam Islands",
      "Cinnabar Island"
    ]
  },
  {
    "id": 121,
    "name": "Starmie",
    "height": "1.1 m",
    "weight": "80.0 kg",
    "ability": "Illuminate",
    "move": ["Tackle","Harden","Water Gun", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Hyper Beam", "Psychic", "Teleport", "Thunder Wave", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Flash", "Surf"],
    "egg_group": "Water 3",
    "type": ["Water","Psychic"],
    "super_effective": ["Fighting","Fire","Poison"],
    "weak_against": ["Bug","Electric","Grass"],
    "locations": [
      "Evolve Staryu"
    ]
  },
  {
    "id": 122,
    "name": "Mr. Mime",
    "height": "1.3 m",
    "weight": "54.5 kg",
    "ability": "Soundproof",
    "move": ["Barrier","Confusion","Light Screen","Double Slap","Meditate","Substitute", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Submission", "Counter", "Seismic Toss", "Solar Beam", "Thunder Wave", "Psychic", "Teleport", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Flash"],
    "egg_group": "Human-Like",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Route 2 (Trade)"
    ]
  },
  {
    "id": 123,
    "name": "Scyther",
    "height": "1.5 m",
    "weight": "56.0 kg",
    "ability": "Swarm",
    "move": ["Quick Attack","Leer","Focus Energy","Double Team","Slash","Swords Dance","Agility", "Take Down", "Double-Edge", "Hyper Beam", "Cut", "Toxic", "Rage", "Mimic", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Bug",
    "type": ["Bug","Flying"],
    "super_effective": ["Fighting","Grass","Poison","Psychic"],
    "weak_against": ["Electric","Fire","Flying","Rock", "Ice"],
    "locations": [
      "Celadon Game Corner",
      "Safari Zone"
    ]
  },
  {
    "id": 124,
    "name": "Jynx",
    "height": "1.4 m",
    "weight": "40.6 kg",
    "ability": "Oblivious",
    "move": ["Pound","Lick","Lovely Kiss","Double Slap","Ice Punch","Body Slam","Thrash","Blizzard", "Mega Punch", "Mega Kick", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Psychic", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute"],
    "egg_group": "Human-Like",
    "type": ["Ice","Psychic"],
    "super_effective": ["Dragon","Flying","Grass","Poison"],
    "weak_against": ["Fire","Bug","Rock", "Ghost"],
    "locations": [
      "Cerulean City (Trade)"
    ]
  },
  {
    "id": 125,
    "name": "Electabuzz",
    "height": "1.1 m",
    "weight": "30.0 kg",
    "ability": "Static",
    "move": ["Quick Attack","Leer","Thunder Shock","Screech","Thunder Punch","Light Screen","Thunder", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Psychic", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Strength", "Flash"],
    "egg_group": "Human-Like",
    "type": ["Electric"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Power Plant"
    ]
  },
  {
    "id": 126,
    "name": "Magmar",
    "height": "1.3 m",
    "weight": "44.5 kg",
    "ability": "Flame Body",
    "move": ["Ember","Leer","Confuse Ray","Fire Punch","Smokescreen","Smog","Flamethrower", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Psychic", "Teleport", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Human-Like",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Pokemon Mansion"
    ]
  },
  {
    "id": 127,
    "name": "Pinsir",
    "height": "1.5 m",
    "weight": "55.0 kg",
    "ability": "Hyper Cutter",
    "move": ["Vice Grip","Seismic Toss","Guillotine","Focus Energy","Harden","Slash","Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Submission", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Bide", "Rest", "Substitute", "Strength"],
    "egg_group": "Bug",
    "type": ["Bug"],
    "super_effective": ["Grass","Poison","Psychic"],
    "weak_against": ["Fire","Flying","Rock"],
    "locations": [
      "Celadon Game Corner",
      "Safari Zone"
    ]
  },
  {
    "id": 128,
    "name": "Tauros",
    "height": "1.4 m",
    "weight": "88.4 kg",
    "ability": "Intimidate",
    "move": ["Tackle","Stomp","Tail Whip","Leer","Rage","Take Down", "Body Slam", "Double-Edge", "Ice Beam", "Blizzard", "Hyper Beam", "Earthquake", "Fissure", "Toxic", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Bide", "Fire Blast", "Rest", "Substitute", "Strength"],
    "egg_group": "Field",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Safari Zone"
    ]
  },
  {
    "id": 129,
    "name": "Magikarp",
    "height": "0.9 m",
    "weight": "10.0 kg",
    "ability": "Swift Swim",
    "move": ["Splash","Tackle"],
    "egg_group": "Dragon, Water 2",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Route 4 (Pokecenter)",
      "Any water body (Old Rod)"
    ]
  },
  {
    "id": 130,
    "name": "Gyarados",
    "height": "6.5 m",
    "weight": "235.0 kg",
    "ability": "Intimidate",
    "move": ["Bite","Dragon Rage","Leer","Hydro Pump","Hyper Beam", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Dragon, Water 2",
    "type": ["Water","Flying"],
    "super_effective": ["Bug","Fighting","Fire","Ground"],
    "weak_against": ["Electric","Rock"],
    "locations": [
      "Evolve Magikarp"
    ]
  },
  {
    "id": 131,
    "name": "Lapras",
    "height": "2.5 m",
    "weight": "220.0 kg",
    "ability": "Water Absorb",
    "move": ["Water Gun","Growl","Sing","Mist","Body Slam","Confuse Ray","Ice Beam","Hydro Pump", "Take Down", "Double-Edge", "Bubble Beam", "Blizzard", "Hyper Beam", "Dragon Rage", "Solar Beam", "Psychic", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Strength", "Surf"],
    "egg_group": "Monster, Water 1",
    "type": ["Water","Ice"],
    "super_effective": ["Dragon","Flying","Grass","Ground"],
    "weak_against": ["Electric","Fighting","Rock", "Grass"],
    "locations": [
      "Silph Co. (Gift)"
    ]
  },
  {
    "id": 132,
    "name": "Ditto",
    "height": "0.3 m",
    "weight": "4.0 kg",
    "ability": "Limber",
    "move": ["Transform"],
    "egg_group": "Ditto",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Route 13",
      "Route 14",
      "Route 15",
      "Route 23",
      "Cerulean Cave"
    ]
  },
  {
    "id": 133,
    "name": "Eevee",
    "height": "0.3 m",
    "weight": "6.5 kg",
    "ability": "Run Away",
    "move": ["Tackle","Tail Whip","Sand Attack","Growl","Quick Attack","Bite","Take Down", "Body Slam", "Double-Edge", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Celadon City (Gift)"
    ]
  },
  {
    "id": 134,
    "name": "Vaporeon",
    "height": "1.0 m",
    "weight": "29.0 kg",
    "ability": "Water Absorb",
    "move": ["Tackle","Quick Attack","Water Gun","Tail Whip","Sand Attack","Bite","Aurora Beam","Haze","Acid Armor","Hydro Pump", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Hyper Beam", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Field",
    "type": ["Water"],
    "super_effective": ["Fire","Ground","Rock"],
    "weak_against": ["Electric","Grass"],
    "locations": [
      "Evolve Eevee (Water Stone)"
    ]
  },
  {
    "id": 135,
    "name": "Jolteon",
    "height": "0.8 m",
    "weight": "24.5 kg",
    "ability": "Volt Absorb",
    "move": ["Tackle","Quick Attack","Thunder Shock","Tail Whip","Sand Attack","Double Kick","Agility","Thunder Wave","Pin Missile","Thunder", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Rage", "Thunderbolt", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Flash"],
    "egg_group": "Field",
    "type": ["Electric"],
    "super_effective": ["Flying","Water"],
    "weak_against": ["Ground"],
    "locations": [
      "Evolve Eevee (Thunder Stone)"
    ]
  },
  {
    "id": 136,
    "name": "Flareon",
    "height": "0.9 m",
    "weight": "25.0 kg",
    "ability": "Flash Fire",
    "move": ["Tackle","Quick Attack","Ember","Tail Whip","Sand Attack","Bite","Leer","Fire Spin","Rage","Smog","Flamethrower", "Body Slam", "Take Down", "Double-Edge", "Hyper Beam", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Field",
    "type": ["Fire"],
    "super_effective": ["Bug","Grass","Ice"],
    "weak_against": ["Ground","Rock","Water"],
    "locations": [
      "Evolve Eevee (Fire Stone)"
    ]
  },
  {
    "id": 137,
    "name": "Porygon",
    "height": "0.8 m",
    "weight": "36.5 kg",
    "ability": "Trace",
    "move": ["Tackle","Sharpen","Conversion","Psybeam","Recover","Agility","Tri Attack", "Take Down", "Double-Edge", "Ice Beam", "Blizzard", "Hyper Beam", "Psychic", "Teleport", "Thunder Wave", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Flash"],
    "egg_group": "Mineral",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Celadon Game Corner"
    ]
  },
  {
    "id": 138,
    "name": "Omanyte",
    "height": "0.4 m",
    "weight": "7.5 kg",
    "ability": "Swift Swim",
    "move": ["Constrict","Withdraw","Horn Attack","Leer","Water Gun","Spike Cannon","Hydro Pump", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 1, Water 3",
    "type": ["Rock","Water"],
    "super_effective": ["Bug","Fire","Flying","Ice"],
    "weak_against": ["Electric","Fighting","Ground", "Grass"],
    "locations": [
      "Cinnabar Island (Revive Helix Fossil)"
    ]
  },
  {
    "id": 139,
    "name": "Omastar",
    "height": "1.0 m",
    "weight": "35.0 kg",
    "ability": "Swift Swim",
    "move": ["Water Gun","Withdraw","Horn Attack","Leer","Spike Cannon","Hydro Pump", "Take Down", "Double-Edge", "Bubble Beam", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 1, Water 3",
    "type": ["Rock","Water"],
    "super_effective": ["Bug","Fire","Flying","Ice"],
    "weak_against": ["Electric","Fighting","Ground", "Grass"],
    "locations": [
      "Evolve Omanyte"
    ]
  },
  {
    "id": 140,
    "name": "Kabuto",
    "height": "0.5 m",
    "weight": "11.5 kg",
    "ability": "Swift Swim",
    "move": ["Scratch","Harden","Absorb","Slash","Leer","Hydro Pump", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 1, Water 3",
    "type": ["Rock","Water"],
    "super_effective": ["Bug","Fire","Flying","Ice"],
    "weak_against": ["Electric","Fighting","Ground", "Grass"],
    "locations": [
      "Cinnabar Island (Revive Dome Fossil)"
    ]
  },
  {
    "id": 141,
    "name": "Kabutops",
    "height": "1.3 m",
    "weight": "40.5 kg",
    "ability": "Swift Swim",
    "move": ["Scratch","Harden","Absorb","Slash","Leer","Hydro Pump", "Razor Wind", "Swords Dance", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Submission", "Counter", "Seismic Toss", "Cut", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Rest", "Substitute", "Surf"],
    "egg_group": "Water 1, Water 3",
    "type": ["Rock","Water"],
    "super_effective": ["Bug","Fire","Flying","Ice"],
    "weak_against": ["Electric","Fighting","Ground", "Grass"],
    "locations": [
      "Evolve Kabuto"
    ]
  },
  {
    "id": 142,
    "name": "Aerodactyl",
    "height": "1.8 m",
    "weight": "59.0 kg",
    "ability": "Rock Head",
    "move": ["Wing Attack","Agility","Supersonic","Bite","Take Down","Hyper Beam", "Razor Wind", "Double-Edge", "Dragon Rage", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "Flying",
    "type": ["Rock","Flying"],
    "super_effective": ["Bug","Fire","Flying", "Ice"],
    "weak_against": ["Electric","Rock","Water", "Ice"],
    "locations": [
      "Cinnabar Island (Revive Old Amber)"
    ]
  },
  {
    "id": 143,
    "name": "Snorlax",
    "height": "2.1 m",
    "weight": "460.0 kg",
    "ability": "Immunity",
    "move": ["Headbutt","Amnesia","Rest","Body Slam","Harden","Double-Edge","Hyper Beam", "Mega Punch", "Mega Kick", "Take Down", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Pay Day", "Submission", "Counter", "Seismic Toss", "Solar Beam", "Earthquake", "Fissure", "Psychic", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Metronome", "Self-Destruct", "Fire Blast", "Explosion", "Substitute", "Strength", "Surf"],
    "egg_group": "Monster",
    "type": ["Normal"],
    "super_effective": [],
    "weak_against": ["Fighting"],
    "locations": [
      "Route 12",
      "Route 16"
    ]
  },
  {
    "id": 144,
    "name": "Articuno",
    "height": "1.7 m",
    "weight": "55.4 kg",
    "ability": "Pressure",
    "move": ["Peck","Ice Beam","Blizzard","Mist","Agility", "Razor Wind", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Hyper Beam", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute"],
    "egg_group": "No Eggs",
    "type": ["Ice","Flying"],
    "super_effective": ["Dragon","Grass","Ground", "Bug"],
    "weak_against": ["Electric","Fire","Rock"],
    "locations": [
      "Seafoam Islands"
    ]
  },
  {
    "id": 145,
    "name": "Zapdos",
    "height": "1.6 m",
    "weight": "52.6 kg",
    "ability": "Pressure",
    "move": ["Thunder Shock","Drill Peck","Thunder","Agility","Light Screen", "Razor Wind", "Take Down", "Double-Edge", "Hyper Beam", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Swift", "Rest", "Substitute", "Flash"],
    "egg_group": "No Eggs",
    "type": ["Electric","Flying"],
    "super_effective": ["Bug","Fighting","Grass","Water", "Flying"],
    "weak_against": ["Ice","Rock"],
    "locations": [
      "Power Plant"
    ]
  },
  {
    "id": 146,
    "name": "Moltres",
    "height": "2.0 m",
    "weight": "60.0 kg",
    "ability": "Pressure",
    "move": ["Peck","Fire Spin","Leer","Agility","Sky Attack", "Razor Wind", "Take Down", "Double-Edge", "Hyper Beam", "Fly", "Toxic", "Rage", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute"],
    "egg_group": "No Eggs",
    "type": ["Fire","Flying"],
    "super_effective": ["Bug","Grass","Ice", "Fighting"],
    "weak_against": ["Electric","Rock","Water"],
    "locations": [
      "Victory Road"
    ]
  },
  {
    "id": 147,
    "name": "Dratini",
    "height": "1.8 m",
    "weight": "3.3 kg",
    "ability": "Shed Skin",
    "move": ["Wrap","Leer","Thunder Wave","Agility","Slam","Dragon Rage","Hyper Beam", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Dragon, Water 1",
    "type": ["Dragon"],
    "super_effective": ["Dragon"],
    "weak_against": ["Ice", "Dragon"],
    "locations": [
      "Safari Zone"
    ]
  },
  {
    "id": 148,
    "name": "Dragonair",
    "height": "4.0 m",
    "weight": "16.5 kg",
    "ability": "Shed Skin",
    "move": ["Wrap","Leer","Thunder Wave","Agility","Slam","Dragon Rage","Hyper Beam", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute", "Surf"],
    "egg_group": "Dragon, Water 1",
    "type": ["Dragon"],
    "super_effective": ["Dragon"],
    "weak_against": ["Ice", "Dragon"],
    "locations": [
      "Evolve Dratini"
    ]
  },
  {
    "id": 149,
    "name": "Dragonite",
    "height": "2.2 m",
    "weight": "210.0 kg",
    "ability": "Inner Focus",
    "move": ["Wrap","Leer","Thunder Wave","Agility","Slam","Dragon Rage","Hyper Beam", "Razor Wind", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Toxic", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Blast", "Swift", "Rest", "Substitute", "Strength", "Surf", "Fly"],
    "egg_group": "Dragon, Water 1",
    "type": ["Dragon","Flying"],
    "super_effective": ["Dragon", "Grass", "Fighting", "Bug"],
    "weak_against": ["Ice", "Rock", "Dragon"],
    "locations": [
      "Evolve Dragonair"
    ]
  },
  {
    "id": 150,
    "name": "Mewtwo",
    "height": "2.0 m",
    "weight": "122.0 kg",
    "ability": "Pressure",
    "move": ["Confusion","Disable","Swift","Psychic","Barrier","Recover","Mist","Amnesia", "Mega Punch", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Pay Day", "Submission", "Counter", "Seismic Toss", "Solar Beam", "Thunder Wave", "Teleport", "Self-Destruct", "Fire Blast", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Metronome", "Rest", "Substitute", "Strength", "Flash", "Explosion"],
    "egg_group": "No Eggs",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Cerulean Cave"
    ]
  },
  {
    "id": 151,
    "name": "Mew",
    "height": "0.4 m",
    "weight": "4.0 kg",
    "ability": "Synchronize",
    "move": ["Pound","Transform","Mega Punch","Metronome","Psychic", "Razor Wind", "Swords Dance", "Cut", "Fly", "Surf", "Strength", "Flash", "Mega Kick", "Body Slam", "Take Down", "Double-Edge", "Bubble Beam", "Water Gun", "Ice Beam", "Blizzard", "Hyper Beam", "Pay Day", "Submission", "Counter", "Seismic Toss", "Dragon Rage", "Earthquake", "Fissure", "Dig", "Teleport", "Self-Destruct", "Egg Bomb", "Fire Blast", "Swift", "Dream Eater", "Sky Attack", "Rest", "Explosion", "Rock Slide", "Tri Attack", "Substitute", "Toxic", "Rage", "Thunderbolt", "Thunder", "Mimic", "Double Team", "Reflect", "Bide", "Fire Spin", "Solar Beam", "Thunder Wave"],
    "egg_group": "No Eggs",
    "type": ["Psychic"],
    "super_effective": ["Fighting","Poison"],
    "weak_against": ["Bug"],
    "locations": [
      "Special Event"
    ]
  }
]

  </script>

  <script>
    // Game state variables
    let pokemonData = [];
    let unlocked = {};
    let experience = {};
    let currentPokemon = null;
    let currentOptions = [];
    let bonusQuestions = [];
    let bonusIndex = 0;
    let lastRocket = false;
    let lastMeowth = false;
    let currentIsShinyRound = false;
    let currentStreak = 0;
    let gameAchievements = {};
    let streakAchievementsThisRun = {};
    let soundEnabled = true;
    let gameMode = 'initial';
    let isMenuOpen = false;

    let pokeyen = 0;
    let bag = {};
    let earnedBadges = {};
    let activeBuffs = { repel: 0, luckyegg: 0, lure: 0, maxlure: 0 };
    let guaranteedShinyPool = [];

    const MAX_EXPERIENCE = 75;

    let gymChallengeState = {
        active: false,
        gym: null,
        pokemonIndex: 0,
        currentPokemon: null,
        currentQuestion: null,
        playerHP: 0,
        leaderHP: 0
    };

    let e4ChallengeState = {
        active: false,
        challengerIndex: 0,
        pokemonIndex: 0,
        playerHP: 3,
        challengerHP: 5,
        currentChallenger: null,
        currentPokemon: null,
        currentQuestion: null
    };
    
    const LOCATION_UNLOCKS = [
        { locations: ["Pallet Town", "Route 1", "Route 2", "Viridian City", "Route 22", "Viridian Forest"], map: "sprites/map0.png" },
        { locations: ["Route 3", "Mt. Moon", "Route 4"], map: "sprites/map1.png" },
        { locations: ["Route 24", "Route 25", "Route 5", "Route 6", "Vermilion City", "Diglett's Cave", "Route 11"], map: "sprites/map2.png" },
        { locations: ["Route 9", "Route 10", "Rock Tunnel", "Lavender Town", "Route 8", "Route 7"], map: "sprites/map3.png" },
        { locations: ["Celadon City", "Pokemon Tower", "Route 12", "Route 13", "Route 14", "Route 15", "Route 16", "Route 17", "Route 18", "Fuchsia City", "Safari Zone"], map: "sprites/map4.png" },
        { locations: ["Saffron City", "Silph Co."], map: "sprites/map5.png" },
        { locations: ["Power Plant", "Route 19", "Route 20", "Seafoam Islands"], map: "sprites/map6.png" },
        { locations: ["Cinnabar Island", "Pokemon Mansion", "Route 21", "Route 23", "Victory Road"], map: "sprites/map7.png" },
        { locations: ["Cerulean Cave"], map: "sprites/map8.png" }
    ];


    const SHOP_ITEMS = {
        pokeball: { name: "Pok√© Ball", price: 300, description: "Use ball during a catch to skip 1 bonus question.", sprite: "sprites/pokeball.png", effect: 1, type: 'catch_assist' },
        greatball: { name: "Great Ball", price: 550, description: "Use ball during a catch to skip 2 bonus questions.", sprite: "sprites/greatball.png", effect: 2, type: 'catch_assist' },
        ultraball: { name: "Ultra Ball", price: 700, description: "Use ball during a catch to skip all bonus questions.", sprite: "sprites/ultraball.png", effect: 3, type: 'catch_assist' },
        evolutionStone: { name: "Evolution Stone", price: 1000, description: "An experimental stone from Silph Co. that forces evolution.", sprite: "sprites/evolutionstone.png", type: 'evolution' },
        escaperope: { name: "Escape Rope", price: 150, description: "Use on a bonus question to get a new question.", sprite: "sprites/escaperope.png", type: 'reroll_question' },
        pokeflute: { name: "Pok√© Flute", price: 100, description: "Use during the silhouette phase to reveal the Pok√©mon.", sprite: "sprites/pokeflute.png", type: 'autoguess' },
        repel: { name: "Repel", price: 250, description: "Prevents Team Rocket & Meowth encounters for 10 rounds.", sprite: "sprites/repel.png", type: 'buff', effect: 10 },
        luckyegg: { name: "Lucky Egg", price: 300, description: "Doubles your Pok√©yen earnings for 5 full rounds.", sprite: "sprites/luckyegg.png", type: 'buff', effect: 5 },
        lure: { name: "Lure", price: 1500, description: "Moderately increases shiny chance for 10 rounds.", sprite: "sprites/lure.png", type: 'buff', effect: 10 },
        maxlure: { name: "Max Lure", price: 3000, description: "Greatly increases shiny chance for 10 rounds.", sprite: "sprites/maxlure.png", type: 'buff', effect: 10 }
    };

    const EVOLUTION_MAP = {
        1: 2, 2: 3, 4: 5, 5: 6, 7: 8, 8: 9, 10: 11, 11: 12, 13: 14, 14: 15, 16: 17, 17: 18,
        19: 20, 21: 22, 23: 24, 25: 26, 27: 28, 29: 30, 30: 31, 32: 33, 33: 34, 35: 36, 37: 38,
        39: 40, 41: 42, 43: 44, 44: 45, 46: 47, 48: 49, 50: 51, 52: 53, 54: 55, 56: 57, 58: 59,
        60: 61, 61: 62, 63: 64, 64: 65, 66: 67, 67: 68, 69: 70, 70: 71, 72: 73, 74: 75, 75: 76,
        77: 78, 79: 80, 81: 82, 84: 85, 86: 87, 88: 89, 90: 91, 92: 93, 93: 94, 96: 97, 98: 99,
        100: 101, 102: 103, 104: 105, 109: 110, 111: 112, 116: 117, 118: 119, 120: 121, 129: 130,
        133: [134, 135, 136], 138: 139, 140: 141, 147: 148, 148: 149
    };

    const GYM_DATA = {
        brock: { name: "Brock", badgeName: "Boulder Badge", sprite: "sprites/gym_brock.png", badgeSprite: "sprites/badge_boulder.png", unlock: 10, pokemonIds: [74, 95], bonusType: 'Rock', achievement: 'boulderBadge', secondaryBonus: { text: "Slightly reduces Meowth encounters." } },
        misty: { name: "Misty", badgeName: "Cascade Badge", sprite: "sprites/gym_misty.png", badgeSprite: "sprites/badge_cascade.png", unlock: 20, pokemonIds: [120, 121], bonusType: 'Water', achievement: 'cascadeBadge', secondaryBonus: { text: "Slightly reduces Team Rocket encounters." } },
        surge: { name: "Lt. Surge", badgeName: "Thunder Badge", sprite: "sprites/gym_surge.png", badgeSprite: "sprites/badge_thunder.png", unlock: 30, pokemonIds: [100, 25, 26], bonusType: 'Electric', achievement: 'thunderBadge', secondaryBonus: { text: "Slightly extends time for Meowth encounters." } },
        erika: { name: "Erika", badgeName: "Rainbow Badge", sprite: "sprites/gym_erika.png", badgeSprite: "sprites/badge_rainbow.png", unlock: 40, pokemonIds: [71, 114, 45], bonusType: 'Grass', achievement: 'rainbowBadge', secondaryBonus: { text: "Slightly extends time for Rocket encounters." } },
        koga: { name: "Koga", badgeName: "Soul Badge", sprite: "sprites/gym_koga.png", badgeSprite: "sprites/badge_soul.png", unlock: 50, pokemonIds: [109, 89, 110], bonusType: 'Poison', achievement: 'soulBadge', secondaryBonus: { text: "Increases Pok√©yen from correct guesses." } },
        sabrina: { name: "Sabrina", badgeName: "Marsh Badge", sprite: "sprites/gym_sabrina.png", badgeSprite: "sprites/badge_marsh.png", unlock: 60, pokemonIds: [64, 122, 49, 65], bonusType: 'Psychic', achievement: 'marshBadge', secondaryBonus: { text: "Reduces Team Rocket's steal success rate." } },
        blaine: { name: "Blaine", badgeName: "Volcano Badge", sprite: "sprites/gym_blaine.png", badgeSprite: "sprites/badge_volcano.png", unlock: 70, pokemonIds: [58, 77, 78, 59], bonusType: 'Fire', achievement: 'volcanoBadge', secondaryBonus: { text: "Reduces Meowth's steal success rate." } },
        giovanni: { name: "Giovanni", badgeName: "Earth Badge", sprite: "sprites/gym_giovanni.png", badgeSprite: "sprites/badge_earth.png", unlock: 80, pokemonIds: [111, 51, 31, 34, 112], bonusType: 'Ground', achievement: 'earthBadge', secondaryBonus: { text: "Pok√©yen bonus for stopping Rocket & Meowth." } }
    };

    const ELITE_FOUR_DATA = [
        { name: "Lorelei", sprite: "sprites/e4_lorelei.png", pokemonIds: [87, 91, 80, 124, 131], hp: 5 },
        { name: "Bruno", sprite: "sprites/e4_bruno.png", pokemonIds: [95, 107, 106, 95, 68], hp: 5 },
        { name: "Agatha", sprite: "sprites/e4_agatha.png", pokemonIds: [94, 42, 93, 24, 94], hp: 5 },
        { name: "Lance", sprite: "sprites/e4_lance.png", pokemonIds: [130, 148, 148, 142, 149], hp: 5 },
        { name: "Champion Gary", sprite: "sprites/champ_gary.png", pokemonIds: [18, 65, 112, 6, 9, 3], hp: 6 }
    ];
    
    const ALL_ACHIEVEMENTS = {
        firstCatch:       { title: "First Steps", description: "Caught your first Pok√©mon!", icon: "üëü", prize: 100 },
        starterMaster:    { title: "Starter Master", description: "Collected all three starter Pok√©mon!", icon: "üèÜ", prize: 500 },
        milestone_10:     { title: "Junior Trainer", description: "Caught 10 different Pok√©mon!", icon: "üèÖ", prize: 200 },
        milestone_25:     { title: "Senior Trainer", description: "Caught 25 different Pok√©mon!", icon: "üèÖ", prize: 500 },
        milestone_50:     { title: "Pok√©mon Researcher", description: "Caught 50 different Pok√©mon!", icon: "üèÖ", prize: 1000 },
        milestone_100:    { title: "Pok√©mon Professor", description: "Caught 100 different Pok√©mon!", icon: "üèÖ", prize: 2500 },
        milestone_151:    { title: "Pok√©mon Master", description: "Completed the entire Pok√©dex!", icon: "üëë", prize: 10000 },
        streak5:          { title: "Hot Streak", description: "5 correct answers in a row!", icon: "üî•", prize: 250, repeatable: true },
        streak10:         { title: "On Fire!", description: "10 correct answers in a row!", icon: "üî•üî•", prize: 600, repeatable: true },
        streak25:         { title: "Unstoppable!", description: "25 correct answers in a row!", icon: "‚òÑÔ∏è", prize: 2000, repeatable: true },
        firstShiny:       { title: "Shiny Hunter", description: "Caught your first shiny Pok√©mon!", icon: "‚≠ê", prize: 1000 },
        shinyCollector:   { title: "Shiny Collector", description: "Caught 5 different shiny Pok√©mon!", icon: "üåü", prize: 2500 },
        legendaryCatcher: { title: "Mythical Discovery", description: "Caught a legendary Pok√©mon!", icon: "üîÆ", prize: 3000 },
        eeveeMaster:      { title: "Evolutionist", description: "Evolve Eevee into all its forms!", icon: "üß¨", prize: 1500 },
        waterCollector:   { title: "Water Specialist", description: "Catch 10 different Water-type Pok√©mon!", icon: "üíß", prize: 500 },
        fireCollector:    { title: "Fire Specialist", description: "Catch 10 different Fire-type Pok√©mon!", icon: "üî•", prize: 500 },
        grassCollector:   { title: "Grass Specialist", description: "Catch 10 different Grass-type Pok√©mon!", icon: "üåø", prize: 500 },
        bugCollector:     { title: "Bug Catcher", description: "Catch 10 different Bug-type Pok√©mon!", icon: "üêû", prize: 400 },
        normalCollector:  { title: "Normal Trainer", description: "Catch 10 different Normal-type Pok√©mon!", icon: "üêæ", prize: 400 },
        poisonCollector:  { title: "Poison Expert", description: "Catch 10 different Poison-type Pok√©mon!", icon: "‚ò†Ô∏è", prize: 400 },
        boulderBadge:     { title: "Boulder Badge", description: "Defeated Gym Leader Brock!", icon: "üõ°Ô∏è", prize: 1000 },
        cascadeBadge:     { title: "Cascade Badge", description: "Defeated Gym Leader Misty!", icon: "üõ°Ô∏è", prize: 1000 },
        thunderBadge:     { title: "Thunder Badge", description: "Defeated Gym Leader Lt. Surge!", icon: "üõ°Ô∏è", prize: 1000 },
        rainbowBadge:     { title: "Rainbow Badge", description: "Defeated Gym Leader Erika!", icon: "üõ°Ô∏è", prize: 1000 },
        soulBadge:        { title: "Soul Badge", description: "Defeated Gym Leader Koga!", icon: "üõ°Ô∏è", prize: 1000 },
        marshBadge:       { title: "Marsh Badge", description: "Defeated Gym Leader Sabrina!", icon: "üõ°Ô∏è", prize: 1000 },
        volcanoBadge:     { title: "Volcano Badge", description: "Defeated Gym Leader Blaine!", icon: "üõ°Ô∏è", prize: 1000 },
        earthBadge:       { title: "Earth Badge", description: "Defeated Gym Leader Giovanni!", icon: "üõ°Ô∏è", prize: 1000 },
        leagueChampion:   { title: "League Champion", description: "You have defeated the Elite Four and become the Champion!", icon: "üëë", prize: 10000 }
    };

    const sounds = {
      correct: createBeepSound(800, 0.2),
      wrong: createBeepSound(300, 0.3),
      unlock: createSuccessSound(),
      rocket: createRocketSound(),
      shiny: createShinySound(),
      buy: createBeepSound(1000, 0.1),
      meowth: createCoinSound()
    };
    
    // --- SCRIPT INITIALIZATION ---
    // This section now handles the case where the JSON data might be missing.
    
    const pokemonDataScript = document.getElementById("pokedex-data");
    const jsonData = pokemonDataScript ? pokemonDataScript.textContent.trim() : '';
    const isDataMissing = !jsonData || jsonData.startsWith("<!--");

    if (!isDataMissing) {
        try {
            pokemonData = JSON.parse(jsonData);
        } catch (e) {
            console.error("Could not parse Pok√©mon JSON data:", e);
            // The game will continue to load but show an error in initGame().
        }
    }

    function padId(num) { return String(num).padStart(3, "0"); }
    
    function getSpritePath(id, shiny = false) {
        const paddedId = padId(id);
        return shiny ? `sprites/pokemon_${paddedId}_shiny.png` : `sprites/pokemon_${paddedId}.png`;
    }

    function getSilhouettePath(id) {
        const paddedId = padId(id);
        return `sprites/pokemon_${paddedId}_silhouette.png`;
    }

    function shuffle(array) { return array.sort(() => Math.random() - 0.5); }

    function createBeepSound(frequency, duration) {
      return () => {
        if (!soundEnabled) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();

          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);

          oscillator.frequency.value = frequency;
          oscillator.type = 'sine';

          gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + duration);
        } catch (e) {
          console.log('Audio not available');
        }
      };
    }

    function createSuccessSound() {
      return () => {
        if (!soundEnabled) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const frequencies = [523, 659, 784, 1047]; // C, E, G, C

          frequencies.forEach((freq, i) => {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = freq;
            oscillator.type = 'sine';

            const startTime = audioContext.currentTime + i * 0.1;
            gainNode.gain.setValueAtTime(0.2, startTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.3);

            oscillator.start(startTime);
            oscillator.stop(startTime + 0.3);
          });
        } catch (e) {
          console.log('Audio not available');
        }
      };
    }

    function createRocketSound() {
      return () => {
        if (!soundEnabled) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();

          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);

          oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
          oscillator.frequency.linearRampToValueAtTime(100, audioContext.currentTime + 1);
          oscillator.type = 'sawtooth';

          gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);

          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 1);
        } catch (e) {
          console.log('Audio not available');
        }
      };
    }

    function createCoinSound() {
      return () => {
        if (!soundEnabled) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const frequencies = [1047, 1397, 1568]; // High-pitched notes

          frequencies.forEach((freq, i) => {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = freq;
            oscillator.type = 'sine';

            const startTime = audioContext.currentTime + i * 0.04;
            gainNode.gain.setValueAtTime(0.25, startTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.2);

            oscillator.start(startTime);
            oscillator.stop(startTime + 0.2);
          });
        } catch (e) {
          console.log('Audio not available');
        }
      };
    }

    function createShinySound() {
      return () => {
        if (!soundEnabled) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const frequencies = [1047, 1319, 1568, 2093];

          frequencies.forEach((freq, i) => {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = 'sine';

            const startTime = audioContext.currentTime + i * 0.05;
            gainNode.gain.setValueAtTime(0.3, startTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + 0.4);

            oscillator.start(startTime);
            oscillator.stop(startTime + 0.4);
          });
        } catch (e) {
          console.log('Audio not available');
        }
      };
    }

    function createParticles(container, count = 20, color = '#ffd700') {
      for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.background = color;
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 3 + 's';
        particle.style.animationDuration = (2 + Math.random() * 2) + 's';
        container.appendChild(particle);

        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 5000);
      }
    }

    function grantAchievement(key) {
        const achievement = ALL_ACHIEVEMENTS[key];
        if (!achievement) return;

        gameAchievements[key] = (gameAchievements[key] || 0) + 1;

        let prize = achievement.prize;
        if(activeBuffs.luckyegg > 0) prize *= 2;
        pokeyen += prize;

        showAchievement(achievement.title, `${achievement.description} (+¬•${prize})`);
        updateAllCounters();
        saveGameData();
    }

    function checkAllAchievements() {
        if (pokemonData.length === 0) return; // Can't check achievements without data
        const unlockedCount = Object.keys(unlocked).length;
        const shinyCount = Object.values(unlocked).filter(p => p === 'shiny').length;

        // One-time achievements
        if (!gameAchievements.firstCatch && unlockedCount >= 1) grantAchievement('firstCatch');
        if (!gameAchievements.starterMaster && [1, 4, 7].every(id => unlocked[id])) grantAchievement('starterMaster');
        if (!gameAchievements.milestone_10 && unlockedCount >= 10) grantAchievement('milestone_10');
        if (!gameAchievements.milestone_25 && unlockedCount >= 25) grantAchievement('milestone_25');
        if (!gameAchievements.milestone_50 && unlockedCount >= 50) grantAchievement('milestone_50');
        if (!gameAchievements.milestone_100 && unlockedCount >= 100) grantAchievement('milestone_100');
        if (!gameAchievements.milestone_151 && unlockedCount >= 151) grantAchievement('milestone_151');
        if (!gameAchievements.firstShiny && shinyCount >= 1) grantAchievement('firstShiny');
        if (!gameAchievements.shinyCollector && shinyCount >= 5) grantAchievement('shinyCollector');
        if (!gameAchievements.legendaryCatcher && [144, 145, 146, 150, 151].some(id => unlocked[id])) grantAchievement('legendaryCatcher');
        if (!gameAchievements.eeveeMaster && [134, 135, 136].every(id => unlocked[id])) grantAchievement('eeveeMaster');

        // Type collector achievements
        const typeCounts = {};
        Object.keys(unlocked).forEach(id => {
            const p = pokemonData.find(pk => pk.id == id);
            if(p) p.type.forEach(t => typeCounts[t] = (typeCounts[t] || 0) + 1);
        });

        if (!gameAchievements.waterCollector && (typeCounts['Water'] || 0) >= 10) grantAchievement('waterCollector');
        if (!gameAchievements.fireCollector && (typeCounts['Fire'] || 0) >= 10) grantAchievement('fireCollector');
        if (!gameAchievements.grassCollector && (typeCounts['Grass'] || 0) >= 10) grantAchievement('grassCollector');
        if (!gameAchievements.bugCollector && (typeCounts['Bug'] || 0) >= 10) grantAchievement('bugCollector');
        if (!gameAchievements.normalCollector && (typeCounts['Normal'] || 0) >= 10) grantAchievement('normalCollector');
        if (!gameAchievements.poisonCollector && (typeCounts['Poison'] || 0) >= 10) grantAchievement('poisonCollector');
    }

    function checkStreakAchievements(streak) {
        if (streak >= 5 && !streakAchievementsThisRun.s5) {
            grantAchievement('streak5');
            streakAchievementsThisRun.s5 = true;
        }
        if (streak >= 10 && !streakAchievementsThisRun.s10) {
            grantAchievement('streak10');
            streakAchievementsThisRun.s10 = true;
        }
        if (streak >= 25 && !streakAchievementsThisRun.s25) {
            grantAchievement('streak25');
            streakAchievementsThisRun.s25 = true;
        }
    }

    function showAchievement(title, description) {
      const popup = document.getElementById('achievement-popup');
      document.getElementById('achievement-text').innerHTML = `<strong>${title}</strong><br>${description}`;
      popup.classList.add('show');

      setTimeout(() => {
        popup.classList.remove('show');
      }, 4000);
    }

    function loadGameData() {
      unlocked = JSON.parse(localStorage.getItem("unlockedPokemon")) || {};
      experience = JSON.parse(localStorage.getItem("pokemonExperience")) || {};
      currentStreak = parseInt(localStorage.getItem("pokemonStreak")) || 0;
      gameAchievements = JSON.parse(localStorage.getItem("pokemonAchievements")) || {};
      pokeyen = parseInt(localStorage.getItem("pokemonPokeyen")) || 0;
      bag = JSON.parse(localStorage.getItem("pokemonBag")) || {};
      earnedBadges = JSON.parse(localStorage.getItem("pokemonBadges")) || {};
      activeBuffs = JSON.parse(localStorage.getItem("pokemonBuffs")) || { repel: 0, luckyegg: 0, lure: 0, maxlure: 0 };
      guaranteedShinyPool = JSON.parse(localStorage.getItem("pokemonShinyPool")) || [];
      soundEnabled = localStorage.getItem("pokemonSoundEnabled") === 'false' ? false : true;


      updateAllCounters();
    }

    function saveGameData() {
      localStorage.setItem("unlockedPokemon", JSON.stringify(unlocked));
      localStorage.setItem("pokemonExperience", JSON.stringify(experience));
      localStorage.setItem("pokemonStreak", currentStreak.toString());
      localStorage.setItem("pokemonAchievements", JSON.stringify(gameAchievements));
      localStorage.setItem("pokemonPokeyen", pokeyen.toString());
      localStorage.setItem("pokemonBag", JSON.stringify(bag));
      localStorage.setItem("pokemonBadges", JSON.stringify(earnedBadges));
      localStorage.setItem("pokemonBuffs", JSON.stringify(activeBuffs));
      localStorage.setItem("pokemonShinyPool", JSON.stringify(guaranteedShinyPool));
      localStorage.setItem("pokemonSoundEnabled", soundEnabled);
    }

    function getAvailablePokemon() {
        const badgeCount = Object.keys(earnedBadges).filter(key => !key.startsWith('failed_') && key !== 'champion').length;
        
        const accessibleLocations = new Set();
        for (let i = 0; i <= badgeCount; i++) {
            if (LOCATION_UNLOCKS[i]) {
                LOCATION_UNLOCKS[i].locations.forEach(loc => accessibleLocations.add(loc));
            }
        }

        return pokemonData.filter(p => {
            if (!p.locations || p.locations.length === 0) return false;
            return p.locations.some(loc => accessibleLocations.has(loc));
        });
    }

    function updateAllCounters() {
      const unlockedCount = Object.keys(unlocked).length;
      const totalPokemon = pokemonData.length > 0 ? pokemonData.length : 151;
      document.getElementById("pokedex-counter").textContent = `${unlockedCount} / ${totalPokemon}`;
      document.getElementById("streak-counter").textContent = `${currentStreak}`;
      const shinyCount = Object.values(unlocked).filter(p => p === 'shiny').length;
      document.getElementById("shiny-counter").textContent = `${shinyCount}`;
      document.getElementById("currency-counter").textContent = `${pokeyen}`;
      const totalAchievements = Object.values(gameAchievements).reduce((sum, count) => sum + count, 0);
      document.getElementById("achievement-counter").textContent = `${totalAchievements}`;

      const badgeCount = Object.keys(earnedBadges).filter(key => !key.startsWith('failed_') && key !== 'champion').length;
      document.getElementById("badge-counter").textContent = `${badgeCount} / 8`;
    }
	

    function updateBuffDisplay() {
        const container = document.getElementById('active-buffs-container');
        if (!container) return;
        container.innerHTML = '';

        const buffs = [
            { key: 'repel', name: 'Repel' },
            { key: 'luckyegg', name: 'Lucky Egg' },
            { key: 'lure', name: 'Lure' },
            { key: 'maxlure', name: 'Max Lure' }
        ];

        buffs.forEach(buffInfo => {
            if (activeBuffs[buffInfo.key] > 0) {
                const item = SHOP_ITEMS[buffInfo.key];
                const icon = document.createElement('img');
                icon.src = item.sprite;
                icon.className = 'buff-icon';
                icon.title = `${item.name}: ${activeBuffs[buffInfo.key]} rounds left`;
                container.appendChild(icon);
            }
        });
    }

    function startRound(isResume = false) {
        gameMode = 'main';
        document.querySelector('.game-container').classList.remove('info-mode-active');
        document.getElementById('pokedex-device').classList.remove('hidden', 'gym-leader-mode', 'e4-mode');
        document.getElementById('pokedex-grid').classList.remove('hidden');
        document.getElementById('pokemon-display').style.cursor = 'default';

        document.getElementById('question-answers-area').classList.remove('hidden');
        document.getElementById('pokedex-info-display').classList.add('hidden');
        document.getElementById('battle-hud').classList.add('hidden');

        document.getElementById('bonus-pokeballs-container').classList.add('hidden');
        const hasBuffs = Object.values(activeBuffs).some(val => val > 0);
        document.getElementById('active-buffs-container').classList.toggle('hidden', !hasBuffs);
        updateBuffDisplay();

        document.getElementById('pokedex-device').classList.remove('team-rocket-mode');
        document.getElementById('pokemon-display').classList.remove('energy-burst');

        if (!isResume) {
            const willTriggerShinyHunt = guaranteedShinyPool.length > 0 && Math.random() < 0.5;

            if (willTriggerShinyHunt) {
                const shinyHuntId = guaranteedShinyPool[Math.floor(Math.random() * guaranteedShinyPool.length)];
                currentPokemon = pokemonData.find(p => p.id === shinyHuntId);
                currentIsShinyRound = true;
            } else {
                currentIsShinyRound = false;
                if (activeBuffs.repel <= 0) {
                    let rocketChance = 0.15;
                    if (earnedBadges.misty) rocketChance -= 0.02;
                    let meowthChance = 0.15;
                    if (earnedBadges.brock) meowthChance -= 0.02;
                    const eventRoll = Math.random();
                    if (!lastRocket && !lastMeowth && eventRoll < rocketChance) {
                        lastRocket = true; lastMeowth = false;
                        handleTeamRocket(); return;
                    } else if (!lastMeowth && !lastRocket && eventRoll < (rocketChance + meowthChance)) {
                        lastMeowth = true; lastRocket = false;
                        handleMeowthEncounter(); return;
                    }
                }
                lastRocket = false;
                lastMeowth = false;

                const availableList = getAvailablePokemon();
                const lockedList = availableList.filter(p => !(p.id in unlocked));

                if (lockedList.length === 0 && guaranteedShinyPool.length === 0) {
                    if (Object.keys(unlocked).length >= 151) {
                         document.getElementById("question-text").textContent = "Congratulations! You've caught them all!";
                         if(!gameAchievements.milestone_151) checkAllAchievements();
                         document.getElementById('answers-grid').innerHTML = '';
                    } else {
                         document.getElementById("question-text").textContent = "You've caught all Pok√©mon in this area! Defeat the next Gym Leader to explore new places!";
                         document.getElementById('answers-grid').innerHTML = '';
                    }
                    return;
                }

                if (lockedList.length === 0 && guaranteedShinyPool.length > 0) {
                    const shinyHuntId = guaranteedShinyPool[Math.floor(Math.random() * guaranteedShinyPool.length)];
                    currentPokemon = pokemonData.find(p => p.id === shinyHuntId);
                    currentIsShinyRound = true;
                } else {
                    currentPokemon = lockedList[Math.floor(Math.random() * lockedList.length)];
                }
            }

            if (activeBuffs.repel > 0) activeBuffs.repel--;
            if (activeBuffs.luckyegg > 0) activeBuffs.luckyegg--;
            if (activeBuffs.lure > 0) activeBuffs.lure--;
            if (activeBuffs.maxlure > 0) activeBuffs.maxlure--;
        }

        const pokemonImg = document.getElementById("pokemon-image");
        pokemonImg.src = getSilhouettePath(currentPokemon.id);
        pokemonImg.style.transform = 'scale(1)';
        pokemonImg.style.filter = 'brightness(0) drop-shadow(2px 2px 4px rgba(0,0,0,0.3))';
        pokemonImg.classList.remove('shiny');

        document.getElementById("question-text").textContent = "Who's that Pok√©mon?";

        if (!isResume) {
            const allPokemonNames = pokemonData.map(p => p.name);
            const otherNames = shuffle(allPokemonNames.filter(pName => pName !== currentPokemon.name)).slice(0, 3);
            const options = shuffle([currentPokemon.name, ...otherNames]);
            currentOptions = [...options];
        }

        const answersGrid = document.getElementById("answers-grid");
        answersGrid.innerHTML = "";
        currentOptions.forEach(name => {
            const btn = document.createElement("button");
            btn.className = "answer-button";
            btn.textContent = name;
            btn.onclick = () => handleGuess(name, btn);
            answersGrid.appendChild(btn);
        });
    }
    
    function handleGuess(name, buttonElement) {
      if (isMenuOpen) return;
      if (name === currentPokemon.name) {
        sounds.correct();
        buttonElement.classList.add('correct');
        currentStreak++;
        checkStreakAchievements(currentStreak);

        let guessReward = earnedBadges.koga ? 15 : 10;
        if (activeBuffs.luckyegg > 0) guessReward *= 2;
        pokeyen += guessReward;

        updateAllCounters();
        document.getElementById("question-text").textContent = "Correct! Catch Phase starting...";

        setTimeout(() => {
          startBonusRound();
        }, 1000);
      } else {
        sounds.wrong();
        buttonElement.classList.add('wrong');
        currentStreak = 0;
        streakAchievementsThisRun = {};
        updateAllCounters();
        document.getElementById("question-text").textContent = "Wrong! Try again with a new Pok√©mon...";

        setTimeout(() => {
          startRound();
        }, 1500);
      }
      saveGameData();
    }

    let rocketTimer = null;
    let meowthTimer = null;

    function handleTeamRocket() {
        gameMode = 'rocket';
        sounds.rocket();

        document.getElementById('pokedex-device').classList.add('team-rocket-mode');
        const pokemonImg = document.getElementById("pokemon-image");
        pokemonImg.src = "sprites/pokemon_000.png";
        pokemonImg.style.transform = 'scale(0.70)';
        pokemonImg.style.filter = '';
        pokemonImg.classList.remove('shiny');
        document.getElementById('answers-grid').innerHTML = '';
        document.getElementById("question-text").textContent = "Team Rocket is attacking!";

        const rocketPopup = document.getElementById('rocket-popup');
        const rocketTextPopup = document.getElementById('rocket-text-popup');
        let clickedRocket = false;

        const randomTop = Math.random() * 70 + 15;
        const randomLeft = Math.random() * 70 + 15;
        rocketPopup.style.top = `${randomTop}vh`;
        rocketPopup.style.left = `${randomLeft}vw`;

        const onRocketClick = () => {
            clickedRocket = true;
            clearTimeout(rocketTimer);
            rocketPopup.removeEventListener('click', onRocketClick);
            rocketPopup.classList.add('fade-out');
            rocketTextPopup.classList.add('fade-out');

            document.getElementById("question-text").textContent = "You stopped Team Rocket!";

            setTimeout(() => {
                rocketPopup.classList.add('hidden');
                rocketPopup.classList.remove('fade-out');
                rocketTextPopup.classList.add('hidden');
                rocketTextPopup.classList.remove('fade-out');
                document.getElementById('pokedex-device').classList.remove('team-rocket-mode');
                startRound();
            }, 2000);
        };

        rocketPopup.addEventListener('click', onRocketClick);
        rocketPopup.classList.remove('hidden');
        rocketTextPopup.classList.remove('hidden');

        let rocketTime = 1500;
        if (earnedBadges.erika) rocketTime += 100;

        rocketTimer = setTimeout(() => {
            if (clickedRocket) return;

            rocketPopup.removeEventListener('click', onRocketClick);
            rocketPopup.classList.add('fade-out');
            rocketTextPopup.classList.add('fade-out');

            let message;
            const normalKeys = Object.keys(unlocked).filter(id => unlocked[id] === "normal");

            let stealChance = 0.75;
            if (earnedBadges.sabrina) stealChance -= 0.10;

            if (Object.keys(unlocked).length >= 5 && Math.random() < stealChance && normalKeys.length > 0) {
                const stealId = parseInt(normalKeys[Math.floor(Math.random() * normalKeys.length)], 10);
                const stolenName = pokemonData.find(p => p.id === stealId)?.name || `Pok√©mon #${stealId}`;
                delete unlocked[stealId];
                delete experience[stealId]; // Also remove their XP
                saveGameData();
                updatePokedexUI();
                updateAllCounters();
                message = `You were too slow! Team Rocket stole your ${stolenName}!`;
                createParticles(document.getElementById('game-particles'), 15, '#ff6b6b');
            } else {
                message = "You were too slow, but Team Rocket failed to steal a Pok√©mon!";
                if (earnedBadges.giovanni) {
                    let prize = 250;
                    if (activeBuffs.luckyegg > 0) prize *= 2;
                    pokeyen += prize;
                    message += ` They dropped ¬•${prize} in their haste!`;
                }
            }

            document.getElementById("question-text").textContent = message;

            setTimeout(() => {
                rocketPopup.classList.add('hidden');
                rocketPopup.classList.remove('fade-out');
                rocketTextPopup.classList.add('hidden');
                rocketTextPopup.classList.remove('fade-out');
                document.getElementById('pokedex-device').classList.remove('team-rocket-mode');
                startRound();
            }, 4000);

        }, rocketTime);
    }

    function handleMeowthEncounter() {
        gameMode = 'meowth';
        sounds.meowth();

        document.getElementById('pokedex-device').classList.add('team-rocket-mode');
        const pokemonImg = document.getElementById("pokemon-image");
        pokemonImg.src = getSpritePath(52); // Meowth's ID
        pokemonImg.style.transform = 'scale(1)';
        pokemonImg.style.filter = '';
        pokemonImg.classList.remove('shiny');
        document.getElementById('answers-grid').innerHTML = '';
        document.getElementById("question-text").textContent = "A wild Meowth appeared!";

        const meowthPopup = document.getElementById('meowth-popup');
        const meowthTextPopup = document.getElementById('meowth-text-popup');
        let clickedCoin = false;

        const randomTop = Math.random() * 70 + 15;
        const randomLeft = Math.random() * 70 + 15;
        meowthPopup.style.top = `${randomTop}vh`;
        meowthPopup.style.left = `${randomLeft}vw`;

        const onCoinClick = () => {
            clickedCoin = true;
            clearTimeout(meowthTimer);
            meowthPopup.removeEventListener('click', onCoinClick);
            meowthPopup.classList.add('fade-out');
            meowthTextPopup.classList.add('fade-out');

            let message;
            let lateStealChance = 0.25;
            if (earnedBadges.blaine) lateStealChance -= 0.10;

            if (Math.random() < lateStealChance) {
                const amounts = [10, 20, 30, 40, 50];
                const stolenAmount = amounts[Math.floor(Math.random() * amounts.length)];
                if (pokeyen > 0) {
                    const actualStolen = Math.min(pokeyen, stolenAmount);
                    pokeyen -= actualStolen;
                    message = `You were fast, but Meowth still stole ¬•${actualStolen}!`;
                    createParticles(document.getElementById('game-particles'), 15, '#ffeb3b');
                } else {
                    message = `Meowth tried to steal ¬•${stolenAmount}, but you're broke!`;
                }
            } else {
                message = "You stopped Meowth from stealing your money!";
            }
            document.getElementById("question-text").textContent = message;
            updateAllCounters();
            saveGameData();

            setTimeout(() => {
                meowthPopup.classList.add('hidden');
                meowthPopup.classList.remove('fade-out');
                meowthTextPopup.classList.add('hidden');
                meowthTextPopup.classList.remove('fade-out');
                document.getElementById('pokedex-device').classList.remove('team-rocket-mode');
                startRound();
            }, 3000);
        };

        meowthPopup.addEventListener('click', onCoinClick);
        meowthPopup.classList.remove('hidden');
        meowthTextPopup.classList.remove('hidden');

        let meowthTime = 1000;
        if (earnedBadges.surge) meowthTime += 100;

        meowthTimer = setTimeout(() => {
            if (clickedCoin) return;

            meowthPopup.removeEventListener('click', onCoinClick);
            meowthPopup.classList.add('fade-out');
            meowthTextPopup.classList.add('fade-out');

            let message;
            const amounts = [10, 20, 30, 40, 50];
            const stolenAmount = amounts[Math.floor(Math.random() * amounts.length)];

            if (pokeyen > 0) {
                 let stealFailed = earnedBadges.blaine && Math.random() < 0.10;
                 if (stealFailed) {
                     message = "Too slow! But Meowth fumbled the coins thanks to your Volcano Badge!";
                     if (earnedBadges.giovanni) {
                         let prize = 250;
                         if (activeBuffs.luckyegg > 0) prize *= 2;
                         pokeyen += prize;
                         message += ` It also dropped ¬•${prize}!`;
                     }
                 } else {
                     const actualStolen = Math.min(pokeyen, stolenAmount);
                     pokeyen -= actualStolen;
                     message = `Too slow! Meowth stole ¬•${actualStolen}!`;
                     createParticles(document.getElementById('game-particles'), 15, '#ff6b6b');
                 }
            } else {
                 message = "Too slow! Meowth tried to steal, but you have no money!";
            }

            document.getElementById("question-text").textContent = message;
            updateAllCounters();
            saveGameData();

            setTimeout(() => {
                meowthPopup.classList.add('hidden');
                meowthPopup.classList.remove('fade-out');
                meowthTextPopup.classList.add('hidden');
                meowthTextPopup.classList.remove('fade-out');
                document.getElementById('pokedex-device').classList.remove('team-rocket-mode');
                startRound();
            }, 4000);

        }, meowthTime);
    }

    function startBonusRound() {
        gameMode = 'bonus';
        document.getElementById('pokemon-display').classList.add('energy-burst');

        if (!currentIsShinyRound) {
            let shinyChance = 0.08;

            const pokemonTypes = currentPokemon.type;
            for (const gymKey in earnedBadges) {
                const gym = GYM_DATA[gymKey];
                if (gym && earnedBadges[gymKey] && pokemonTypes.includes(gym.bonusType)) {
                    shinyChance += 0.05;
                }
            }

            if (currentStreak >= 5) shinyChance += 0.02;
            if (currentStreak >= 10) shinyChance += 0.5;

            if (activeBuffs.maxlure > 0) {
                shinyChance += 0.10;
            } else if (activeBuffs.lure > 0) {
                shinyChance += 0.05;
            }
            currentIsShinyRound = Math.random() < shinyChance;
        }

        const pokemonImg = document.getElementById("pokemon-image");
        pokemonImg.src = getSpritePath(currentPokemon.id, currentIsShinyRound);
        pokemonImg.style.filter = '';
        if (currentIsShinyRound) pokemonImg.classList.add('shiny');

        let numBonusQuestions;
        const isLegendary = [144, 145, 146, 150, 151].includes(currentPokemon.id);
        const isEvolved = Object.values(EVOLUTION_MAP).flat().includes(currentPokemon.id);

        if (isLegendary) {
            numBonusQuestions = 4;
        } else if (isEvolved) {
            numBonusQuestions = 3;
        } else {
            numBonusQuestions = 2;
        }

        const stats = ["height","weight","ability","id","egg_group","type","super_effective","weak_against","move", "location"];
        bonusQuestions = shuffle(stats).slice(0, numBonusQuestions);
        bonusIndex = 0;

        const pokeballsContainer = document.getElementById('bonus-pokeballs-container');
        pokeballsContainer.innerHTML = '';
        for (let i = 0; i < numBonusQuestions; i++) {
            const ball = document.createElement('img');
            ball.src = 'sprites/pokeball.png';
            ball.className = 'bonus-pokeball';
            pokeballsContainer.appendChild(ball);
        }

        document.getElementById('active-buffs-container').classList.add('hidden');
        pokeballsContainer.classList.remove('hidden');

        setTimeout(askNextBonusQuestion, 1000);
    }

    function askNextBonusQuestion() {
      if (bonusIndex >= bonusQuestions.length) {
        unlockPokemon(currentPokemon.id, currentIsShinyRound);
        return;
      }

      let stat = bonusQuestions[bonusIndex];
      let questionText = "", correctAnswer = "", pool = [];

      const pLocationInfo = currentPokemon.locations;
      const isCatchable = pLocationInfo && !pLocationInfo.every(loc => loc.startsWith("Evolve") || loc.startsWith("Gift") || loc.startsWith("Trade") || loc.startsWith("Special"));
      if (stat === "location" && !isCatchable) {
          const fallbackTypes = ["height", "weight", "ability", "egg_group", "id"];
          stat = fallbackTypes[Math.floor(Math.random() * fallbackTypes.length)];
          bonusQuestions[bonusIndex] = stat;
      }

      if (stat === "height") {
        questionText = `What is ${currentPokemon.name}'s height?`;
        correctAnswer = currentPokemon.height;
        pool = pokemonData.map(p => p.height);
      } else if (stat === "weight") {
        questionText = `What is ${currentPokemon.name}'s weight?`;
        correctAnswer = currentPokemon.weight;
        pool = pokemonData.map(p => p.weight);
      } else if (stat === "ability") {
        questionText = `What is ${currentPokemon.name}'s ability?`;
        correctAnswer = currentPokemon.ability;
        pool = pokemonData.map(p => p.ability);
      } else if (stat === "id") {
        questionText = `What is ${currentPokemon.name}'s Pok√©dex number?`;
        correctAnswer = String(currentPokemon.id);
        pool = pokemonData.map(p => String(p.id));
      } else if (stat === "egg_group") {
        questionText = `What is ${currentPokemon.name}'s egg group?`;
        correctAnswer = currentPokemon.egg_group;
        pool = pokemonData.map(p => p.egg_group);
      } else if (stat === "type") {
        questionText = `What is ${currentPokemon.name}'s type?`;
        correctAnswer = currentPokemon.type.join(", ");
        pool = pokemonData.map(p => p.type.join(", "));
      } else if (stat === "location") {
        questionText = `Where can you find ${currentPokemon.name}?`;
        const validLocations = pLocationInfo.filter(loc => !loc.startsWith("Evolve") && !loc.startsWith("Gift") && !loc.startsWith("Trade"));
        correctAnswer = validLocations[Math.floor(Math.random() * validLocations.length)];

        const allLocations = new Set(pokemonData.flatMap(p => p.locations));
        const wrongLocationPool = Array.from(allLocations).filter(loc => !pLocationInfo.includes(loc) && (loc.includes("Route") || loc.includes("City")));
        pool = wrongLocationPool;
      } else if (stat === "super_effective") {
        questionText = `Which type is ${currentPokemon.name} super effective against?`;
        if (currentPokemon.super_effective.length > 0) {
          correctAnswer = currentPokemon.super_effective[Math.floor(Math.random() * currentPokemon.super_effective.length)];
          const allTypes = new Set(pokemonData.flatMap(p => [...p.super_effective, ...p.weak_against, ...p.type]));
          pool = Array.from(allTypes).filter(type => !currentPokemon.super_effective.includes(type));
        } else {
          correctAnswer = "None";
          pool = ["Fire", "Water", "Grass", "Electric"];
        }
      } else if (stat === "weak_against") {
        questionText = `Which type is ${currentPokemon.name} weak against?`;
        if (currentPokemon.weak_against.length > 0) {
          correctAnswer = currentPokemon.weak_against[Math.floor(Math.random() * currentPokemon.weak_against.length)];
          const allTypes = new Set(pokemonData.flatMap(p => [...p.super_effective, ...p.weak_against, ...p.type]));
          pool = Array.from(allTypes).filter(type => !currentPokemon.weak_against.includes(type));
        } else {
          correctAnswer = "None";
          pool = ["Fire", "Water", "Grass", "Electric"];
        }
      } else if (stat === "move") {
        questionText = `Which move can ${currentPokemon.name} learn?`;
        correctAnswer = currentPokemon.move[Math.floor(Math.random() * currentPokemon.move.length)];
        const allMoves = new Set(pokemonData.flatMap(p => p.move));
        pool = Array.from(allMoves).filter(move => move !== correctAnswer);
      }

      pool = Array.from(new Set(pool));
      document.getElementById("question-text").textContent = questionText;

      const availableWrongs = shuffle(pool.filter(p => p !== correctAnswer));
      const wrongs = availableWrongs.slice(0, 3);

      const options = shuffle([correctAnswer, ...wrongs]);
      currentOptions = [...options];
      const answersGrid = document.getElementById("answers-grid");
      answersGrid.innerHTML = "";
      options.forEach(ans => {
        const btn = document.createElement("button");
        btn.className = "answer-button";
        btn.textContent = ans;
        btn.onclick = () => handleBonusAnswer(ans, correctAnswer, btn);
        answersGrid.appendChild(btn);
      });
    }

    function handleBonusAnswer(selected, correctAnswer, buttonElement) {
      if (isMenuOpen) return;
      if (selected === correctAnswer) {
        sounds.correct();
        buttonElement.classList.add('correct');
        let prize = 10;
        if(activeBuffs.luckyegg > 0) prize *= 2;
        pokeyen += prize;
        updateAllCounters();

        const pokeballs = document.querySelectorAll('.bonus-pokeball');
        if (pokeballs[bonusIndex]) {
          pokeballs[bonusIndex].classList.add('unlocked');
        }

        bonusIndex++;
        setTimeout(askNextBonusQuestion, 800);
      } else {
        sounds.wrong();
        buttonElement.classList.add('wrong');
        currentStreak = 0;
        streakAchievementsThisRun = {};
        updateAllCounters();
        document.getElementById("question-text").textContent = "Wrong! Better luck next time!";
        setTimeout(startRound, 1500);
        saveGameData();
      }
    }

    function gainExperience() {
        Object.keys(unlocked).forEach(id => {
            const numericId = parseInt(id, 10);
            if (unlocked[id] === 'normal') { // Only normal pokemon gain XP
                experience[numericId] = (experience[numericId] || 0) + 1;

                // Check if maxed out and not already in the shiny pool
                if (experience[numericId] >= MAX_EXPERIENCE && !guaranteedShinyPool.includes(numericId)) {
                    guaranteedShinyPool.push(numericId);
                }
            }
        });
    }

    function unlockPokemon(pokemonId, isShiny = false) {
        const pokemonToUnlock = pokemonData.find(p => p.id === pokemonId);
        if (!pokemonToUnlock) return;

        const isNewCatch = !unlocked[pokemonId];

        const poolIndex = guaranteedShinyPool.indexOf(pokemonId);
        if (poolIndex > -1) {
            guaranteedShinyPool.splice(poolIndex, 1);
        }

        unlocked[pokemonId] = isShiny ? "shiny" : "normal";

        if (isShiny) {
            sounds.shiny();
        } else {
            sounds.unlock();
            createParticles(document.getElementById('game-particles'), 15, '#4ecdc4');
        }

        if (isNewCatch) {
            experience[pokemonId] = 1; // Start at 1 XP
            gainExperience(); // Grant XP to all other owned Pok√©mon
        }

        saveGameData();
        updatePokedexUI();
        checkAllAchievements();
        updateAllCounters();

        const gymToChallenge = checkForGymUnlock();
        if (gymToChallenge) {
            setTimeout(() => startGymChallenge(gymToChallenge), 2500);
        } else {
            document.getElementById("question-text").textContent =
                `Congratulations! You unlocked ${isShiny ? "a shiny" : "a"} ${pokemonToUnlock.name}!`;
            document.getElementById('answers-grid').innerHTML = '';
            setTimeout(startRound, 2500);
        }
    }

    function checkForGymUnlock() {
        const unlockedCount = Object.keys(unlocked).length;
        for (const gymKey in GYM_DATA) {
            const gym = GYM_DATA[gymKey];
            if (!earnedBadges[gymKey] && unlockedCount >= gym.unlock) {
                if (earnedBadges[`failed_${gymKey}`] !== unlockedCount) {
                    return gymKey;
                }
            }
        }
        return null;
    }

    function updateHpBar(barId, currentHp, maxHp) {
        const bar = document.getElementById(barId);
        if (!bar) return;
        bar.innerHTML = '';
        for (let i = 0; i < maxHp; i++) {
            const heart = document.createElement('span');
            heart.className = 'hp-heart';
            heart.textContent = '‚ù§Ô∏è';
            if (i >= currentHp) {
                heart.classList.add('lost');
            }
            bar.appendChild(heart);
        }
    }

    function startGymChallenge(gymKey) {
        gameMode = 'gym';
        gymChallengeState.active = true;
        gymChallengeState.gym = GYM_DATA[gymKey];
        gymChallengeState.pokemonIndex = 0;
        gymChallengeState.playerHP = 3;
        gymChallengeState.leaderHP = 5;

        document.getElementById('pokedex-device').classList.add('gym-leader-mode');
        document.getElementById("question-text").textContent = `You are challenged by Gym Leader ${gymChallengeState.gym.name}!`;
        document.getElementById('answers-grid').innerHTML = '';
        document.getElementById('pokemon-image').src = gymChallengeState.gym.sprite;
        document.getElementById('pokemon-image').style.filter = ''; // Ensure no filter is applied

        const battleHud = document.getElementById('battle-hud');
        battleHud.classList.remove('hidden');
        updateHpBar('player-hp-bar', gymChallengeState.playerHP, 3);
        updateHpBar('leader-hp-bar', gymChallengeState.leaderHP, 5);

        setTimeout(askNextGymQuestion, 2500);
    }

    function askNextGymQuestion() {
        const pokemonId = gymChallengeState.gym.pokemonIds[gymChallengeState.pokemonIndex % gymChallengeState.gym.pokemonIds.length];
        const pokemon = pokemonData.find(p => p.id === pokemonId);
        gymChallengeState.currentPokemon = pokemon;

        const stats = ["height","weight","ability","id","egg_group","type","super_effective","weak_against","move"];
        let stat = shuffle(stats)[0];
        let questionText = "", correctAnswer = "", pool = [];

        if (stat === "height") {
            questionText = `What is ${pokemon.name}'s height?`;
            correctAnswer = pokemon.height;
            pool = pokemonData.map(p => p.height);
        } else if (stat === "weight") {
            questionText = `What is ${pokemon.name}'s weight?`;
            correctAnswer = pokemon.weight;
            pool = pokemonData.map(p => p.weight);
        } else if (stat === "ability") {
            questionText = `What is ${pokemon.name}'s ability?`;
            correctAnswer = pokemon.ability;
            pool = pokemonData.map(p => p.ability);
        } else if (stat === "id") {
            questionText = `What is ${pokemon.name}'s Pok√©dex number?`;
            correctAnswer = String(pokemon.id);
            pool = pokemonData.map(p => String(p.id));
        } else if (stat === "egg_group") {
            questionText = `What is ${pokemon.name}'s egg group?`;
            correctAnswer = pokemon.egg_group;
            pool = pokemonData.map(p => p.egg_group);
        } else if (stat === "type") {
            questionText = `What is ${pokemon.name}'s type?`;
            correctAnswer = pokemon.type.join(", ");
            pool = pokemonData.map(p => p.type.join(", "));
        } else if (stat === "super_effective") {
            questionText = `Which type is ${pokemon.name} super effective against?`;
            if (pokemon.super_effective.length > 0) {
                correctAnswer = pokemon.super_effective[Math.floor(Math.random() * pokemon.super_effective.length)];
                const allTypes = new Set(pokemonData.flatMap(p => [...p.super_effective, ...p.weak_against, ...p.type]));
                pool = Array.from(allTypes).filter(type => !pokemon.super_effective.includes(type));
            } else {
                correctAnswer = "None";
                pool = ["Fire", "Water", "Grass", "Electric"];
            }
        } else if (stat === "weak_against") {
            questionText = `Which type is ${pokemon.name} weak against?`;
            if (pokemon.weak_against.length > 0) {
                correctAnswer = pokemon.weak_against[Math.floor(Math.random() * pokemon.weak_against.length)];
                const allTypes = new Set(pokemonData.flatMap(p => [...p.super_effective, ...p.weak_against, ...p.type]));
                pool = Array.from(allTypes).filter(type => !pokemon.weak_against.includes(type));
            } else {
                correctAnswer = "None";
                pool = ["Fire", "Water", "Grass", "Electric"];
            }
        } else if (stat === "move") {
            questionText = `Which move can ${pokemon.name} learn?`;
            correctAnswer = pokemon.move[Math.floor(Math.random() * pokemon.move.length)];
            const allMoves = new Set(pokemonData.flatMap(p => p.move));
            pool = Array.from(allMoves).filter(move => move !== correctAnswer);
        }

        pool = Array.from(new Set(pool));
        document.getElementById("question-text").textContent = questionText;
        document.getElementById('pokemon-image').src = getSpritePath(pokemon.id);
        document.getElementById('pokemon-image').style.filter = ''; // Ensure no filter is applied

        const availableWrongs = shuffle(pool.filter(p => p !== correctAnswer));
        const wrongs = availableWrongs.slice(0, 3);

        const options = shuffle([correctAnswer, ...wrongs]);

        gymChallengeState.currentQuestion = {
            text: questionText,
            correctAnswer: correctAnswer,
            options: options
        };

        const answersGrid = document.getElementById("answers-grid");
        answersGrid.innerHTML = "";
        options.forEach(ans => {
            const btn = document.createElement("button");
            btn.className = "answer-button";
            btn.textContent = ans;
            btn.onclick = () => handleGymAnswer(ans, correctAnswer, btn);
            answersGrid.appendChild(btn);
        });
    }

    function handleGymAnswer(selected, correctAnswer, buttonElement) {
        document.querySelectorAll('.answer-button').forEach(btn => btn.disabled = true);

        if (selected === correctAnswer) {
            sounds.correct();
            buttonElement.classList.add('correct');
            gymChallengeState.leaderHP--;
            updateHpBar('leader-hp-bar', gymChallengeState.leaderHP, 5);

            if (gymChallengeState.leaderHP <= 0) {
                setTimeout(winGymChallenge, 1000);
            } else {
                gymChallengeState.pokemonIndex++;
                setTimeout(askNextGymQuestion, 1000);
            }
        } else {
            sounds.wrong();
            buttonElement.classList.add('wrong');
            gymChallengeState.playerHP--;
            updateHpBar('player-hp-bar', gymChallengeState.playerHP, 3);

            if (gymChallengeState.playerHP <= 0) {
                setTimeout(failGymChallenge, 1000);
            } else {
                gymChallengeState.pokemonIndex++;
                setTimeout(askNextGymQuestion, 1000);
            }
        }
    }

    function winGymChallenge() {
        const gymKey = Object.keys(GYM_DATA).find(key => GYM_DATA[key].name === gymChallengeState.gym.name);
        earnedBadges[gymKey] = true;
        grantAchievement(gymChallengeState.gym.achievement);

        document.getElementById("question-text").textContent = `You defeated ${gymChallengeState.gym.name} and earned the ${gymChallengeState.gym.badgeName}!`;

        const pokemonImg = document.getElementById('pokemon-image');
        pokemonImg.src = gymChallengeState.gym.badgeSprite;
        pokemonImg.style.filter = ''; // Ensure no filter is applied
        pokemonImg.classList.add('badge-earned-animation');

        const headerBadge = document.getElementById('badges-button');
        headerBadge.classList.add('badge-earned-animation');

        setTimeout(() => {
            pokemonImg.classList.remove('badge-earned-animation');
            headerBadge.classList.remove('badge-earned-animation');
        }, 500);

        document.getElementById('answers-grid').innerHTML = '';
        document.getElementById('battle-hud').classList.add('hidden');

        sounds.unlock();
        createParticles(document.getElementById('game-particles'), 30, '#feca57');

        gymChallengeState = { active: false, gym: null, pokemonIndex: 0, currentPokemon: null, currentQuestion: null, playerHP: 0, leaderHP: 0 };
        saveGameData();
        updateAllCounters();

        setTimeout(startRound, 4000);
    }

    function failGymChallenge() {
        const gymKey = Object.keys(GYM_DATA).find(key => GYM_DATA[key].name === gymChallengeState.gym.name);
        const unlockedCount = Object.keys(unlocked).length;
        earnedBadges[`failed_${gymKey}`] = unlockedCount;

        document.getElementById("question-text").textContent = `You were defeated by ${gymChallengeState.gym.name}. Train harder and try again!`;
        document.getElementById('pokemon-image').src = gymChallengeState.gym.sprite;
        document.getElementById('pokemon-image').style.filter = ''; // Ensure no filter is applied
        document.getElementById('answers-grid').innerHTML = '';
        document.getElementById('battle-hud').classList.add('hidden');

        gymChallengeState = { active: false, gym: null, pokemonIndex: 0, currentPokemon: null, currentQuestion: null, playerHP: 0, leaderHP: 0 };
        saveGameData();

        setTimeout(startRound, 3000);
    }
    
    // --- REBUILT ELITE FOUR LOGIC ---

    function startE4Challenge() {
        gameMode = 'e4';
        const firstChallenger = ELITE_FOUR_DATA[0];
        e4ChallengeState = {
            active: true,
            challengerIndex: 0,
            pokemonIndex: 0,
            playerHP: 3,
            challengerHP: firstChallenger.hp,
            currentChallenger: firstChallenger,
            currentPokemon: null,
            currentQuestion: null
        };

        document.getElementById('pokedex-device').classList.add('e4-mode');
        document.getElementById("question-text").textContent = `Your first challenger is ${firstChallenger.name} of the Elite Four!`;
        document.getElementById('answers-grid').innerHTML = '';
        const pokemonImg = document.getElementById('pokemon-image');
        pokemonImg.src = firstChallenger.sprite;
        pokemonImg.style.filter = ''; // Clear silhouette filter

        const battleHud = document.getElementById('battle-hud');
        battleHud.classList.remove('hidden');
        updateHpBar('player-hp-bar', e4ChallengeState.playerHP, 3);
        updateHpBar('leader-hp-bar', e4ChallengeState.challengerHP, firstChallenger.hp);

        setTimeout(askNextE4Question, 3000);
    }

    function askNextE4Question() {
        if (!e4ChallengeState.active) return;

        const challenger = e4ChallengeState.currentChallenger;
        // BUG FIX: Use modulo operator to prevent array out of bounds error
        const pokemonId = challenger.pokemonIds[e4ChallengeState.pokemonIndex % challenger.pokemonIds.length];
        const pokemon = pokemonData.find(p => p.id === pokemonId);
        e4ChallengeState.currentPokemon = pokemon;

        const stats = ["height","weight","ability","id","egg_group","type","super_effective","weak_against","move"];
        let stat = shuffle(stats)[0];
        let questionText = "", correctAnswer = "", pool = [];

        // (This part is identical to the gym question generation, so we'll reuse the logic)
        if (stat === "height") { questionText = `What is ${pokemon.name}'s height?`; correctAnswer = pokemon.height; pool = pokemonData.map(p => p.height); }
        else if (stat === "weight") { questionText = `What is ${pokemon.name}'s weight?`; correctAnswer = pokemon.weight; pool = pokemonData.map(p => p.weight); }
        else if (stat === "ability") { questionText = `What is ${pokemon.name}'s ability?`; correctAnswer = pokemon.ability; pool = pokemonData.map(p => p.ability); }
        else if (stat === "id") { questionText = `What is ${pokemon.name}'s Pok√©dex number?`; correctAnswer = String(pokemon.id); pool = pokemonData.map(p => String(p.id)); }
        else if (stat === "egg_group") { questionText = `What is ${pokemon.name}'s egg group?`; correctAnswer = pokemon.egg_group; pool = pokemonData.map(p => p.egg_group); }
        else if (stat === "type") { questionText = `What is ${pokemon.name}'s type?`; correctAnswer = pokemon.type.join(", "); pool = pokemonData.map(p => p.type.join(", ")); }
        else if (stat === "super_effective") {
            questionText = `Which type is ${pokemon.name} super effective against?`;
            if (pokemon.super_effective.length > 0) { correctAnswer = pokemon.super_effective[Math.floor(Math.random() * pokemon.super_effective.length)]; const allTypes = new Set(pokemonData.flatMap(p => [...p.super_effective, ...p.weak_against, ...p.type])); pool = Array.from(allTypes).filter(type => !pokemon.super_effective.includes(type)); }
            else { correctAnswer = "None"; pool = ["Fire", "Water", "Grass", "Electric"]; }
        } else if (stat === "weak_against") {
            questionText = `Which type is ${pokemon.name} weak against?`;
            if (pokemon.weak_against.length > 0) { correctAnswer = pokemon.weak_against[Math.floor(Math.random() * pokemon.weak_against.length)]; const allTypes = new Set(pokemonData.flatMap(p => [...p.super_effective, ...p.weak_against, ...p.type])); pool = Array.from(allTypes).filter(type => !pokemon.weak_against.includes(type)); }
            else { correctAnswer = "None"; pool = ["Fire", "Water", "Grass", "Electric"]; }
        } else if (stat === "move") {
            questionText = `Which move can ${pokemon.name} learn?`; correctAnswer = pokemon.move[Math.floor(Math.random() * pokemon.move.length)]; const allMoves = new Set(pokemonData.flatMap(p => p.move)); pool = Array.from(allMoves).filter(move => move !== correctAnswer);
        }

        pool = Array.from(new Set(pool));
        document.getElementById("question-text").textContent = questionText;
        const pokemonImg = document.getElementById('pokemon-image');
        pokemonImg.src = getSpritePath(pokemon.id);
        pokemonImg.style.filter = ''; // Ensure image is visible

        const availableWrongs = shuffle(pool.filter(p => p !== correctAnswer));
        const wrongs = availableWrongs.slice(0, 3);
        const options = shuffle([correctAnswer, ...wrongs]);

        e4ChallengeState.currentQuestion = { text: questionText, correctAnswer: correctAnswer, options: options };

        const answersGrid = document.getElementById("answers-grid");
        answersGrid.innerHTML = "";
        options.forEach(ans => {
            const btn = document.createElement("button");
            btn.className = "answer-button";
            btn.textContent = ans;
            btn.onclick = () => handleE4Answer(ans, correctAnswer, btn);
            answersGrid.appendChild(btn);
        });
    }

    function handleE4Answer(selected, correctAnswer, buttonElement) {
        document.querySelectorAll('.answer-button').forEach(btn => btn.disabled = true);

        if (selected === correctAnswer) {
            sounds.correct();
            buttonElement.classList.add('correct');
            e4ChallengeState.challengerHP--;
            updateHpBar('leader-hp-bar', e4ChallengeState.challengerHP, e4ChallengeState.currentChallenger.hp);

            if (e4ChallengeState.challengerHP <= 0) {
                setTimeout(winE4Battle, 1000);
            } else {
                e4ChallengeState.pokemonIndex++;
                setTimeout(askNextE4Question, 1000);
            }
        } else {
            sounds.wrong();
            buttonElement.classList.add('wrong');
            e4ChallengeState.playerHP--;
            updateHpBar('player-hp-bar', e4ChallengeState.playerHP, 3);

            if (e4ChallengeState.playerHP <= 0) {
                setTimeout(failE4Challenge, 1000);
            } else {
                e4ChallengeState.pokemonIndex++;
                setTimeout(askNextE4Question, 1000);
            }
        }
    }

    function winE4Battle() {
        e4ChallengeState.challengerIndex++;
        
        if (e4ChallengeState.challengerIndex >= ELITE_FOUR_DATA.length) {
            winE4Challenge(); // Beat the champion, won the whole thing
            return;
        }

        const lastChallengerName = e4ChallengeState.currentChallenger.name;
        const nextChallenger = ELITE_FOUR_DATA[e4ChallengeState.challengerIndex];
        
        // Update state for the next challenger
        e4ChallengeState.currentChallenger = nextChallenger;
        e4ChallengeState.pokemonIndex = 0;
        e4ChallengeState.playerHP = 3; // Reset player HP for next battle
        e4ChallengeState.challengerHP = nextChallenger.hp;

        document.getElementById("question-text").textContent = `You defeated ${lastChallengerName}! Next up: ${nextChallenger.name}!`;
        document.getElementById('answers-grid').innerHTML = '';
        const pokemonImg = document.getElementById('pokemon-image');
        pokemonImg.src = nextChallenger.sprite;
        pokemonImg.style.filter = ''; // Ensure image is visible

        updateHpBar('player-hp-bar', e4ChallengeState.playerHP, 3);
        updateHpBar('leader-hp-bar', e4ChallengeState.challengerHP, nextChallenger.hp);

        setTimeout(askNextE4Question, 3000);
    }

    function winE4Challenge() {
        earnedBadges.champion = true;
        grantAchievement('leagueChampion');

        document.getElementById("question-text").textContent = `Unbelievable! You've defeated the Champion and become the new Pok√©mon League Champion!`;
        const pokemonImg = document.getElementById('pokemon-image');
        pokemonImg.src = ELITE_FOUR_DATA[4].sprite;
        pokemonImg.style.filter = ''; // Ensure image is visible
        document.getElementById('answers-grid').innerHTML = '';
        document.getElementById('battle-hud').classList.add('hidden');
        document.getElementById('pokedex-device').classList.remove('e4-mode');

        sounds.unlock();
        createParticles(document.getElementById('game-particles'), 50, '#ffd700');

        e4ChallengeState = { active: false, challengerIndex: 0, pokemonIndex: 0, playerHP: 3, challengerHP: 5, currentChallenger: null, currentPokemon: null, currentQuestion: null };
        saveGameData();
        updateAllCounters();

        setTimeout(startRound, 5000);
    }

    function failE4Challenge() {
        document.getElementById("question-text").textContent = `You have been defeated. The Pok√©mon League challenge is over.`;
        document.getElementById('answers-grid').innerHTML = '';
        document.getElementById('battle-hud').classList.add('hidden');
        document.getElementById('pokedex-device').classList.remove('e4-mode');

        e4ChallengeState = { active: false, challengerIndex: 0, pokemonIndex: 0, playerHP: 3, challengerHP: 5, currentChallenger: null, currentPokemon: null, currentQuestion: null };
        saveGameData();

        setTimeout(startRound, 3000);
    }

    function resumeE4Challenge() {
        gameMode = 'e4';
        document.getElementById('pokedex-device').classList.add('e4-mode');
        const battleHud = document.getElementById('battle-hud');
        battleHud.classList.remove('hidden');
        
        updateHpBar('player-hp-bar', e4ChallengeState.playerHP, 3);
        updateHpBar('leader-hp-bar', e4ChallengeState.challengerHP, e4ChallengeState.currentChallenger.hp);
        
        const { text, correctAnswer, options } = e4ChallengeState.currentQuestion;
        document.getElementById("question-text").textContent = text;
        const pokemonImg = document.getElementById('pokemon-image');
        pokemonImg.src = getSpritePath(e4ChallengeState.currentPokemon.id);
        pokemonImg.style.filter = ''; // Ensure image is visible

        const answersGrid = document.getElementById("answers-grid");
        answersGrid.innerHTML = "";
        options.forEach(ans => {
            const btn = document.createElement("button");
            btn.className = "answer-button";
            btn.textContent = ans;
            btn.onclick = () => handleE4Answer(ans, correctAnswer, btn);
            answersGrid.appendChild(btn);
        });
    }

    function updatePokedexUI() {
      const grid = document.getElementById("pokedex-grid");
      grid.innerHTML = "";
      const totalPokemon = pokemonData.length > 0 ? pokemonData.length : 151;

      for (let i = 1; i <= totalPokemon; i++) {
        const p = pokemonData.find(pokemon => pokemon.id === i);
        const card = document.createElement("div");
        card.className = "pokemon-card";
        if (unlocked[i] === "shiny") card.classList.add("shiny-card");

        const img = document.createElement("img");
        const label = document.createElement("div");
        label.className = "label";

        if (unlocked[i]) {
          const shiny = unlocked[i] === "shiny";
          img.src = getSpritePath(i, shiny);
          img.style.filter = '';
          if (p) {
            label.textContent = shiny ? `${p.name} ‚ú®` : p.name;
            card.style.cursor = "pointer";
            card.onclick = () => openInfoPanel(buildPokedexScroller, p);
          } else {
            label.textContent = `#${i}`;
          }
        } else {
          img.src = getSpritePath(i, false);
          img.style.filter = 'brightness(0)';
          label.textContent = "???";
          card.style.cursor = "default";
        }

        card.appendChild(img);
        card.appendChild(label);
        grid.appendChild(card);
      }
    }

    function openInfoPanel(contentBuilder, builderArg = null) {
        if (isMenuOpen) return;
        isMenuOpen = true;

        document.querySelector('.game-container').classList.add('info-mode-active');
        document.getElementById('pokedex-device').classList.add('hidden');
        document.getElementById('pokedex-grid').classList.add('hidden');
        document.getElementById('question-answers-area').classList.add('hidden');

        const infoDisplay = document.getElementById('pokedex-info-display');
        infoDisplay.classList.remove('hidden');
        infoDisplay.innerHTML = '';

        const content = contentBuilder(builderArg);
        infoDisplay.appendChild(content);

        const backButtonContainer = document.createElement('div');
        backButtonContainer.id = 'back-button-container';

        const backButton = document.createElement('button');
        backButton.id = 'back-button';
        backButton.textContent = 'Back to Game';
        backButton.onclick = exitPokedexView;
        backButtonContainer.appendChild(backButton);

        infoDisplay.appendChild(backButtonContainer);
    }


    function exitPokedexView() {
      isMenuOpen = false;

      document.querySelector('.game-container').classList.remove('info-mode-active');
      document.getElementById('pokedex-info-display').classList.add('hidden');

      if (gameMode === 'initial') {
        setupInitialView();
      } else {
        document.getElementById('pokedex-device').classList.remove('hidden');
        document.getElementById('pokedex-grid').classList.remove('hidden');
        document.getElementById('question-answers-area').classList.remove('hidden');

        if (gameMode === 'main') {
            startRound(true);
        } else if (gameMode === 'bonus') {
            askNextBonusQuestion();
        } else if (gameMode === 'gym') {
            resumeGymBattle();
        } else if (gameMode === 'e4') {
            resumeE4Challenge();
        }
      }
    }

    function resumeGymBattle() {
        gameMode = 'gym';
        document.getElementById('pokedex-device').classList.add('gym-leader-mode');
        document.getElementById('battle-hud').classList.remove('hidden');

        const { text, correctAnswer, options } = gymChallengeState.currentQuestion;
        document.getElementById("question-text").textContent = text;
        document.getElementById('pokemon-image').src = getSpritePath(gymChallengeState.currentPokemon.id);
        document.getElementById('pokemon-image').style.filter = ''; // Ensure no filter is applied

        const answersGrid = document.getElementById("answers-grid");
        answersGrid.innerHTML = "";
        options.forEach(ans => {
            const btn = document.createElement("button");
            btn.className = "answer-button";
            btn.textContent = ans;
            btn.onclick = () => handleGymAnswer(ans, correctAnswer, btn);
            answersGrid.appendChild(btn);
        });
    }

    const TYPE_COLORS = {
        'Normal': '#A8A878', 'Fire': '#F08030', 'Water': '#6890F0', 'Electric': '#F8D030',
        'Grass': '#78C850', 'Ice': '#98D8D8', 'Fighting': '#C03028', 'Poison': '#A040A0',
        'Ground': '#E0C068', 'Flying': '#A890F0', 'Psychic': '#F85888', 'Bug': '#A8B820',
        'Rock': '#B8A038', 'Ghost': '#705898', 'Dragon': '#7038F8', 'Steel': '#B8B8D0', 'Fairy': '#EE99AC'
    };

    function buildPokedexScroller(clickedPokemon) {
        const scroller = document.createElement('div');
        scroller.id = 'pokedex-details-scroller';

        const unlockedIds = Object.keys(unlocked).map(id => parseInt(id)).sort((a, b) => a - b);

        if (unlockedIds.length === 0) {
            scroller.innerHTML = `<p style="text-align:center; align-self:center; width:100%;">You haven't caught any Pok√©mon yet!</p>`;
        } else {
            unlockedIds.forEach(id => {
                const p = pokemonData.find(pokemon => pokemon.id === id);
                if (!p) return;

                const shiny = unlocked[id] === 'shiny';
                const card = document.createElement('div');
                card.className = 'pokedex-detail-card';
                card.id = `detail-card-${id}`;

                const cardInner = document.createElement('div');
                cardInner.className = 'pokedex-detail-card-inner';
                if (shiny) {
                    cardInner.classList.add('is-shiny');
                }

                const primaryType = p.type[0];
                const typeColor = TYPE_COLORS[primaryType] || '#A8A878';
                const secondaryColor = p.type.length > 1 ? TYPE_COLORS[p.type[1]] : typeColor;

                const currentXP = experience[id] || 0;
                const expPercentage = Math.min((currentXP / MAX_EXPERIENCE) * 100, 100);
                const isMaxed = expPercentage >= 100;

                const expBarHTML = `
                    <div class="exp-bar-container">
                        <div class="exp-bar-header">
                            <div class="exp-bar-label">
                                <span>Pok√©mon XP</span>
                                <span>${currentXP}/${MAX_EXPERIENCE}</span>
                            </div>
                            <div class="exp-bar-background">
                                <div class="exp-bar-fill ${isMaxed ? 'maxed' : ''}" style="width: ${expPercentage}%;"></div>
                            </div>
                        </div>
                        <div class="exp-bar-info">
                            <p style="margin:0; line-height: 1.4;">
                                When maxed out, this Pok√©mon is added back into the silhouette pool. The next encounter with this Pok√©mon is <strong>guaranteed to be shiny!</strong>
                            </p>
                        </div>
                    </div>
                `;
                cardInner.innerHTML = `
                    <h3>#${padId(p.id)} - ${p.name}${shiny ? ' ‚ú®' : ''}</h3>
                    <div class="pokedex-detail-sprite-container" style="background: radial-gradient(circle, ${secondaryColor} 0%, ${typeColor} 100%);">
                        <img src="${getSpritePath(p.id, shiny)}" class="${shiny ? 'shiny' : ''}" alt="${p.name}">
                    </div>
                    ${shiny ? '' : expBarHTML}
                    <div class="stats-accordion">
                        <div class="stats-accordion-header">Basic Info</div>
                        <div class="stats-accordion-content">
                            <div><strong>Type:</strong> ${p.type.join(", ")}</div>
                            <div><strong>Ability:</strong> ${p.ability}</div>
                            <div><strong>Egg group:</strong> ${p.egg_group}</div>
                        </div>
                        <div class="stats-accordion-header">Measurements</div>
                        <div class="stats-accordion-content">
                            <div><strong>Height:</strong> ${p.height}</div>
                            <div><strong>Weight:</strong> ${p.weight}</div>
                        </div>
                        <div class="stats-accordion-header">Combat</div>
                        <div class="stats-accordion-content">
                           <div><strong>Super effective:</strong> ${p.super_effective.join(", ") || "None"}</div>
                           <div><strong>Weak against:</strong> ${p.weak_against.join(", ") || "None"}</div>
                        </div>
                    </div>
                `;
                card.appendChild(cardInner);
                scroller.appendChild(card);
            });
        }

        scroller.addEventListener('scroll', () => {
             const buttonContainer = document.getElementById('back-button-container');
             if(buttonContainer.querySelector('.evolve-button')) {
                 buttonContainer.querySelector('.evolve-button').remove();
             }

             const cards = scroller.querySelectorAll('.pokedex-detail-card');
             for(const card of cards) {
                 const cardId = parseInt(card.id.replace('detail-card-', ''));
                 const hasStone = bag.evolutionStone && bag.evolutionStone > 0;
                 const evolutionTarget = EVOLUTION_MAP[cardId];

                 if (hasStone && evolutionTarget && scroller.scrollLeft > (card.offsetLeft - card.offsetWidth/2) && scroller.scrollLeft < (card.offsetLeft + card.offsetWidth/2)) {
                    const isTargetUnlocked = Array.isArray(evolutionTarget)
                        ? evolutionTarget.every(evoId => unlocked[evoId])
                        : unlocked[evolutionTarget];
                    if(!isTargetUnlocked) {
                        const evolveButton = document.createElement('button');
                        evolveButton.className = 'evolve-button';
                        evolveButton.textContent = 'Evolve';
                        evolveButton.onclick = (e) => {
                            e.stopPropagation();
                            handleEvolution(cardId);
                        };
                        buttonContainer.prepend(evolveButton);
                    }
                 }
             }
        });

        setTimeout(() => {
            scroller.querySelectorAll('.stats-accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    header.classList.toggle('active');
                    content.classList.toggle('show');
                });
            });
            scroller.querySelectorAll('.exp-bar-container').forEach(container => {
                container.addEventListener('click', () => {
                    const info = container.querySelector('.exp-bar-info');
                    if (info) {
                        info.classList.toggle('show');
                    }
                });
            });
        }, 0);


        if (clickedPokemon) {
            setTimeout(() => {
                const targetCard = document.getElementById(`detail-card-${clickedPokemon.id}`);
                if (targetCard) {
                    targetCard.scrollIntoView({ behavior: 'auto', block: 'nearest', inline: 'center' });
                    scroller.dispatchEvent(new Event('scroll'));
                }
            }, 50);
        }
        return scroller;
    }

    function handleEvolution(pokemonId) {
        if (!bag.evolutionStone || bag.evolutionStone <= 0) return;

        const sourcePokemon = pokemonData.find(p => p.id === pokemonId);
        const evolutionTarget = EVOLUTION_MAP[pokemonId];

        if (!sourcePokemon || !evolutionTarget) return;

        if (Array.isArray(evolutionTarget)) {
            const availableEvolutions = evolutionTarget
                .map(id => pokemonData.find(p => p.id === id))
                .filter(p => p && !unlocked[p.id]);

            if (availableEvolutions.length === 0) {
                showCustomAlert("You have already unlocked all of Eevee's evolutions!");
                return;
            }
            showEeveeChoiceModal(availableEvolutions);

        } else {
            const targetPokemon = pokemonData.find(p => p.id === evolutionTarget);
            if (!targetPokemon) return;

            const onConfirm = () => performEvolution(targetPokemon.id);
            showConfirmModal(
                'Confirm Evolution',
                `Are you sure you want to use an Evolution Stone to evolve ${sourcePokemon.name}?`,
                'Evolve',
                onConfirm
            );
        }
    }

    function showConfirmModal(title, text, confirmText, onConfirm) {
        const modal = document.getElementById('confirm-modal');
        const titleEl = document.getElementById('confirm-modal-title');
        const textEl = document.getElementById('confirm-modal-text');
        const okButton = document.getElementById('confirm-modal-ok');
        const cancelButton = document.getElementById('confirm-modal-cancel');

        titleEl.textContent = title;
        textEl.textContent = text;
        okButton.textContent = confirmText;

        const close = () => modal.classList.add('hidden');

        okButton.onclick = () => {
            close();
            onConfirm();
        };
        cancelButton.onclick = close;
        modal.onclick = (e) => { if (e.target === modal) close(); };

        modal.classList.remove('hidden');
    }

    function showEeveeChoiceModal(availableEvolutions) {
        const modal = document.getElementById('evolution-modal');
        const grid = document.getElementById('evolution-options-grid');
        const cancelButton = document.getElementById('evolution-cancel-button');

        grid.innerHTML = '';

        availableEvolutions.forEach(p => {
            const option = document.createElement('div');
            option.className = 'evolution-option';
            option.innerHTML = `
                <img src="${getSpritePath(p.id)}" alt="${p.name}">
                <p>${p.name}</p>
            `;
            option.onclick = () => {
                modal.classList.add('hidden');
                const sourceEevee = pokemonData.find(pk => pk.id === 133);
                const onConfirm = () => performEvolution(p.id);
                showConfirmModal(
                    'Confirm Evolution',
                    `Are you sure you want to use an Evolution Stone to evolve Eevee into ${p.name}?`,
                    'Evolve',
                    onConfirm
                );
            };
            grid.appendChild(option);
        });

        const closeModal = () => modal.classList.add('hidden');
        cancelButton.onclick = closeModal;
        modal.onclick = (e) => {
            if (e.target === modal) {
                closeModal();
            }
        };

        modal.classList.remove('hidden');
    }


    function performEvolution(targetId) {
        bag.evolutionStone--;
        sounds.unlock();
        createParticles(document.getElementById('game-particles'), 30, '#8e44ad');

        const evolvedPokemon = pokemonData.find(p => p.id === targetId);
        unlocked[targetId] = "normal";
        experience[targetId] = 1; // Evolved Pok√©mon start at 1 XP

        saveGameData();
        updateAllCounters();
        updatePokedexUI();
        checkAllAchievements();

        exitPokedexView();
        setTimeout(() => {
            openInfoPanel(buildPokedexScroller, evolvedPokemon);
        }, 100);
    }

    function buildAchievementsView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        container.innerHTML = `<h3>üèÜ Achievements Hall üèÜ</h3>`;

        const achievementKeys = Object.keys(ALL_ACHIEVEMENTS);

        if (achievementKeys.length > 0) {
            const showcase = document.createElement('div');
            showcase.className = 'achievement-showcase';

            for (const key in ALL_ACHIEVEMENTS) {
                const achievement = ALL_ACHIEVEMENTS[key];
                const isUnlocked = gameAchievements[key] > 0;

                const card = document.createElement('div');
                card.className = 'achievement-card';
                if (!isUnlocked) {
                    card.classList.add('locked');
                }

                const countText = isUnlocked && achievement.repeatable ? ` (x${gameAchievements[key]})` : '';

                card.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-info">
                        <h4 class="achievement-title">${achievement.title}${countText}</h4>
                        <p class="achievement-description">${achievement.description}</p>
                        <div class="achievement-prize">+¬•${achievement.prize}</div>
                    </div>
                `;
                showcase.appendChild(card);
            }
            container.appendChild(showcase);
        } else {
            const emptyState = document.createElement('div');
            emptyState.className = 'achievement-empty-state';
            emptyState.innerHTML = `
                <div class="achievement-empty-icon">üèÖ</div>
                <h3>No Achievements Yet</h3>
                <p>Keep playing to unlock achievements and earn rewards!</p>`;
            container.appendChild(emptyState);
        }
        return container;
    }

    function buildShiniesView() {
    const container = document.createElement('div');
    container.className = 'info-panel-content-area';

    const shinyIds = Object.keys(unlocked).filter(id => unlocked[id] === 'shiny');

    container.innerHTML = `<h3>‚≠ê Shiny Collection ‚≠ê</h3>`;

    if (shinyIds.length > 0) {
        const showcase = document.createElement('div');
        showcase.className = 'shiny-showcase';

        shinyIds.forEach(id => {
            const pokemon = pokemonData.find(p => p.id == id);
            if (!pokemon) return;

            const card = document.createElement('div');
            card.className = 'shiny-pokemon-card';

          card.innerHTML = `
                <div class="red-area-sparkles"><div class="red-sparkle"></div><div class="red-sparkle"></div><div class="red-sparkle"></div><div class="red-sparkle"></div><div class="red-sparkle"></div></div>
                <div class="shiny-sparkles"><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div></div>
                <div class="shiny-sprite-container"><img src="${getSpritePath(id, true)}" alt="Shiny ${pokemon.name}" class="shiny-sprite"></div>
                <div class="shiny-info"><h3 class="shiny-name">${pokemon.name}</h3></div>
            `;
            card.addEventListener('click', () => {
                exitPokedexView();
                setTimeout(() => { openInfoPanel(buildPokedexScroller, pokemon); }, 100);
            });
            showcase.appendChild(card);
        });
        container.appendChild(showcase);
    } else {
        const emptyState = document.createElement('div');
        emptyState.className = 'shiny-empty-state';
        emptyState.innerHTML = `
            <div class="shiny-empty-icon">‚ú®</div>
            <h3 style="color: #888; margin-bottom: 1rem;">No Shiny Pok√©mon Yet</h3>
            <p style="color: #666; line-height: 1.5;">Shiny Pok√©mon are extremely rare variants with special coloring.<br>Keep catching to increase your chances!<br><br><strong>Tips:</strong><br>‚Ä¢ Maintain answer streaks for better shiny rates<br>‚Ä¢ Earn gym badges for type-specific bonuses</p>`;
        container.appendChild(emptyState);
    }
    return container;
    }

    function buildShopView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
       container.innerHTML = `<h3>üõí Item Shop </h3>`;
        const grid = document.createElement('div');
        grid.id = 'item-display-grid';

        for (const key in SHOP_ITEMS) {
            const item = SHOP_ITEMS[key];
            const card = document.createElement('div');
            card.className = 'item-grid-entry';
            if (pokeyen >= item.price) card.classList.add('can-buy');

            card.innerHTML = `
                <img src="${item.sprite}" alt="${item.name}">
                <h4>${item.name}</h4>
                <p>${item.description}</p>
                <div class="price">¬•${item.price}</div>
                <button class="buy-button" ${pokeyen < item.price ? 'disabled' : ''}>Buy</button>
            `;
            card.querySelector('.buy-button').onclick = (e) => {
                e.stopPropagation();
                buyItem(key);
                openInfoPanel(buildShopView);
            };
            grid.appendChild(card);
        }
        container.appendChild(grid);
        return container;
    }

    function buyItem(key) {
        const item = SHOP_ITEMS[key];
        if (pokeyen >= item.price) {
            sounds.buy();
            pokeyen -= item.price;
            bag[key] = (bag[key] || 0) + 1;
            saveGameData();
            updateAllCounters();
        }
    }

    function buildBagView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        container.innerHTML = `<h3>üéí Your Bag</h3>`;

        const itemKeys = Object.keys(bag).filter(key => bag[key] > 0);

        if (itemKeys.length === 0) {
            container.innerHTML += `<p style="text-align: center; padding: 2rem 0;">Your bag is empty. Visit the shop!</p>`;
        } else {
            const grid = document.createElement('div');
            grid.id = 'item-display-grid';

            itemKeys.forEach(key => {
                const item = SHOP_ITEMS[key];
                if (!item) return;
                const card = document.createElement('div');
                card.className = 'item-grid-entry';

                let useButtonHTML = '';
                let canUse = false;

                if (item.type === 'catch_assist' && gameMode === 'bonus') canUse = true;
                if (item.type === 'reroll_question' && gameMode === 'bonus') canUse = true;
                if (item.type === 'autoguess' && gameMode === 'main') canUse = true;
                if (item.type === 'buff') canUse = true;

                if(canUse) {
                    card.classList.add('can-use');
                    useButtonHTML = `<button class="use-button">Use</button>`;
                } else {
                    card.classList.add('cannot-use');
                }

                card.innerHTML = `
                    <img src="${item.sprite}" alt="${item.name}">
                    <h4>${item.name}</h4>
                    <p>${item.description}</p>
                    <div class="item-count">x${bag[key]}</div>
                    ${useButtonHTML}
                `;

                if(canUse) {
                    card.querySelector('.use-button').onclick = () => useItem(key);
                }
                grid.appendChild(card);
            });
            container.appendChild(grid);
        }
        return container;
    }

    // --- UPDATED buildBadgesView FUNCTION ---
    function buildBadgesView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        container.innerHTML = `<h3>üõ°Ô∏è Your Badges</h3>`;
        const grid = document.createElement('div');
        grid.id = 'badge-grid';

        // Display the 8 gym badges
        for (const key in GYM_DATA) {
            const gym = GYM_DATA[key];
            const isEarned = earnedBadges[key];
            const entry = document.createElement('div');
            entry.className = 'badge-entry';
            if (!isEarned) entry.classList.add('locked');

            entry.innerHTML = `
                <img src="${gym.badgeSprite}" alt="${gym.badgeName}">
                <h4>${gym.badgeName}</h4>
                <p>Defeat ${gym.name}</p>
                <p><strong>Shiny Bonus:</strong> +5% chance for ${gym.bonusType}-type Pok√©mon.</p>
                <p><strong>Effect:</strong> ${gym.secondaryBonus.text}</p>
            `;
            grid.appendChild(entry);
        }

        const badgeCount = Object.keys(earnedBadges).filter(key => !key.startsWith('failed_') && key !== 'champion').length;
        
        // If all 8 badges are earned, add the Elite Four "badge"
        if (badgeCount >= 8) {
            const e4Entry = document.createElement('div');
            e4Entry.className = 'badge-entry'; // Use the same class for consistent styling

            if (earnedBadges.champion) {
                // If champion, show a disabled state
                e4Entry.classList.add('locked'); // Use 'locked' to grayscale it
                e4Entry.innerHTML = `
                    <img src="sprites/e4.png" alt="Elite Four">
                    <h4>Pok√©mon League</h4>
                    <p><strong>Champion!</strong></p>
                    <p>You have conquered the Pok√©mon League!</p>
                `;
            } else {
                // If not champion, make it active and clickable
                e4Entry.classList.add('e4-challenge-active');
                e4Entry.innerHTML = `
                    <img src="sprites/e4.png" alt="Elite Four">
                    <h4>Challenge Elite Four</h4>
                    <p>Prove that you are the very best!</p>
                    <p>Click to begin the ultimate test! Beat the Elite Four and the Champion!</p>
                `;
                e4Entry.onclick = () => {
                    if (e4ChallengeState.active) return;
                    exitPokedexView();
                    setTimeout(startE4Challenge, 200);
                };
            }
            grid.appendChild(e4Entry);
        }
        
        container.appendChild(grid);
        return container;
    }

    function showCustomAlert(text, title = "Notice") {
        const modal = document.getElementById('confirm-modal');
        const titleEl = document.getElementById('confirm-modal-title');
        const textEl = document.getElementById('confirm-modal-text');
        const okButton = document.getElementById('confirm-modal-ok');
        const cancelButton = document.getElementById('confirm-modal-cancel');

        titleEl.textContent = title;
        textEl.textContent = text;
        okButton.textContent = 'OK';
        cancelButton.classList.add('hidden');

        const close = () => {
            modal.classList.add('hidden');
            cancelButton.classList.remove('hidden');
        };

        okButton.onclick = close;
        cancelButton.onclick = close;
        modal.onclick = (e) => { if (e.target === modal) close(); };

        modal.classList.remove('hidden');
    }

    function useItem(key) {
      if (!bag[key] || bag[key] <= 0) return;
      const item = SHOP_ITEMS[key];

      let canUse = false;
      if (item.type === 'catch_assist' && gameMode === 'bonus') canUse = true;
      if (item.type === 'reroll_question' && gameMode === 'bonus') canUse = true;
      if (item.type === 'autoguess' && gameMode === 'main') canUse = true;
      if (item.type === 'buff') canUse = true;

      if (!canUse) {
          showCustomAlert("You can't use that item right now!");
          return;
      }

      sounds.correct();
      bag[key]--;

      if(item.type === 'catch_assist') {
          for(let i=0; i < item.effect; i++) {
              if (bonusIndex < bonusQuestions.length) {
                  const pokeballs = document.querySelectorAll('.bonus-pokeball');
                  if (pokeballs[bonusIndex]) pokeballs[bonusIndex].classList.add('unlocked');
                  bonusIndex++;
              }
          }
          exitPokedexView();
          setTimeout(askNextBonusQuestion, 200);
      } else if (item.type === 'reroll_question') {
          const allStats = ["height", "weight", "ability", "id", "egg_group", "type", "super_effective", "weak_against", "move", "location"];
          const newStats = allStats.filter(s => !bonusQuestions.includes(s));
          if (newStats.length > 0) {
              bonusQuestions[bonusIndex] = shuffle(newStats)[0];
          }
          exitPokedexView();
          setTimeout(askNextBonusQuestion, 200);
      } else if (item.type === 'autoguess') {
          exitPokedexView();
          setTimeout(() => {
            const buttons = document.querySelectorAll('.answer-button');
            buttons.forEach(btn => {
                if (btn.textContent === currentPokemon.name) {
                    btn.click();
                }
            });
          }, 200);
      } else if (item.type === 'buff') {
          if (key === 'repel') activeBuffs.repel += item.effect;
          if (key === 'luckyegg') activeBuffs.luckyegg += item.effect;
          if (key === 'lure') activeBuffs.lure += item.effect;
          if (key === 'maxlure') activeBuffs.maxlure += item.effect;
          updateBuffDisplay();
          exitPokedexView();
      }

      saveGameData();
      updateAllCounters();
    }

    function setupInitialView() {
      gameMode = 'initial';
      document.querySelector('.game-container').classList.remove('info-mode-active');
      document.getElementById('pokedex-device').classList.remove('hidden', 'gym-leader-mode', 'e4-mode');
      document.getElementById('pokedex-grid').classList.remove('hidden');
      document.getElementById('question-answers-area').classList.remove('hidden');
      document.getElementById('pokedex-info-display').classList.add('hidden');
      document.getElementById('battle-hud').classList.add('hidden');

      const pokemonImg = document.getElementById("pokemon-image");
      pokemonImg.src = "sprites/questionmark.png";
      pokemonImg.style.filter = '';
      pokemonImg.classList.remove('shiny');
      document.getElementById('pokemon-display').style.cursor = 'pointer';

      document.getElementById("question-text").textContent = "Click the ? to begin your adventure!";
      document.getElementById("answers-grid").innerHTML = "";

      document.getElementById('bonus-pokeballs-container').classList.add('hidden');
      const hasBuffs = Object.values(activeBuffs).some(val => val > 0);
      document.getElementById('active-buffs-container').classList.toggle('hidden', !hasBuffs);
      updateBuffDisplay();
    }

    // --- NEW & UPDATED FUNCTIONS ---

    function resetGameData() {
        showConfirmModal(
            'Reset Game?',
            'Are you sure? This will erase all your caught Pok√©mon, items, and achievements permanently.',
            'Reset',
            () => {
                localStorage.clear();
                location.reload();
            }
        );
    }

    function buildPokedexInfoView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        const unlockedCount = Object.keys(unlocked).length;
        const totalPokemon = pokemonData.length > 0 ? pokemonData.length : 151;
        container.innerHTML = `
            <h3>üì± Pok√©dex</h3>
            <div class="info-display-box">
                <span class="value">${unlockedCount} / ${totalPokemon}</span>
                <span class="label">Pok√©mon Caught</span>
            </div>
            <p>This shows your progress in catching all ${totalPokemon} original Pok√©mon.</p>
            <p>Click on a Pok√©mon in the grid at the bottom of the main screen to view its detailed entry!</p>
        `;
        return container;
    }

    function buildStreakInfoView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        container.innerHTML = `
            <h3>üî• Answer Streak</h3>
            <div class="info-display-box">
                <span class="value">${currentStreak}</span>
                <span class="label">Current Streak</span>
            </div>
            <p>This is your current streak of correct "Who's That Pok√©mon?" answers in a row.</p>
            <p>Maintaining a high streak increases your chances of finding a rare <strong>Shiny Pok√©mon</strong>!</p>
            <ul>
                <li><strong>5+ Streak:</strong> Small shiny chance bonus.</li>
                <li><strong>10+ Streak:</strong> Medium shiny chance bonus.</li>
            </ul>
            <p>Answering incorrectly will reset your streak to 0.</p>
        `;
        return container;
    }

    function buildPokeyenInfoView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        container.innerHTML = `
            <h3>¬• Pok√©yen</h3>
             <div class="info-display-box">
                <span class="value">¬•${pokeyen}</span>
                <span class="label">Current Balance</span>
            </div>
            <p>This is the in-game currency. You can use it to buy helpful items in the <strong>Shop (üõí)</strong>.</p>
            <p>You can earn Pok√©yen by:</p>
            <ul>
                <li>Correctly guessing a Pok√©mon.</li>
                <li>Correctly answering bonus questions during a catch.</li>
                <li>Unlocking achievements.</li>
            </ul>
        `;
        return container;
    }

    function buildSettingsView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        container.innerHTML = `<h3>‚öôÔ∏è Settings</h3>`;
        
        const soundToggleContainer = document.createElement('div');
        soundToggleContainer.className = 'settings-toggle';
        
        const soundLabel = document.createElement('span');
        soundLabel.textContent = 'Game Sounds';
        soundLabel.style.fontWeight = 'bold';

        const soundButton = document.createElement('button');
        soundButton.id = 'sound-toggle-button-inner';
        soundButton.textContent = soundEnabled ? 'üîä' : 'üîá';

        soundButton.onclick = () => {
            soundEnabled = !soundEnabled;
            soundButton.textContent = soundEnabled ? 'üîä' : 'üîá';
            saveGameData();
        };

        soundToggleContainer.appendChild(soundLabel);
        soundToggleContainer.appendChild(soundButton);
        container.appendChild(soundToggleContainer);

        const resetContainer = document.createElement('div');
        resetContainer.className = 'reset-button-container';
        const resetButton = document.createElement('button');
        resetButton.className = 'reset-button';
        resetButton.textContent = 'Reset Game Data';
        resetButton.onclick = resetGameData;
        resetContainer.appendChild(resetButton);
        container.appendChild(resetContainer);

        return container;
    }
    
    function buildMapView() {
        const container = document.createElement('div');
        container.className = 'info-panel-content-area';
        container.style.display = 'flex';
        container.style.flexDirection = 'column';

        const title = document.createElement('h3');
        title.textContent = 'üó∫Ô∏è Kanto Region Map üó∫Ô∏è';
        title.style.textAlign = 'center';
        title.style.color = '#333';
        title.style.flexShrink = '0';
        container.appendChild(title);
        
        const imageContainer = document.createElement('div');
        imageContainer.style.flexGrow = '1';
        imageContainer.style.display = 'flex';
        imageContainer.style.alignItems = 'center';
        imageContainer.style.justifyContent = 'center';
        imageContainer.style.minHeight = '0';
        imageContainer.style.paddingBottom = '80px';

        const mapImage = document.createElement('img');
        mapImage.alt = 'Kanto Map';
        mapImage.style.maxWidth = '100%';
        mapImage.style.maxHeight = '100%';
        mapImage.style.border = '3px solid #4682B4';
        mapImage.style.borderRadius = '10px';
        mapImage.style.boxShadow = '0 4px 15px rgba(0,0,0,0.2)';

        const badgeCount = Object.keys(earnedBadges).filter(key => !key.startsWith('failed_') && key !== 'champion').length;
        mapImage.src = LOCATION_UNLOCKS[badgeCount] ? LOCATION_UNLOCKS[badgeCount].map : 'sprites/map8.png';

        imageContainer.appendChild(mapImage);
        container.appendChild(imageContainer);

        return container;
    }

    // --- EVENT LISTENERS ---
    document.getElementById('pokedex-counter-button').addEventListener('click', () => openInfoPanel(buildPokedexInfoView));
    document.getElementById('streak-counter-button').addEventListener('click', () => openInfoPanel(buildStreakInfoView));
    document.getElementById('currency-counter-display').addEventListener('click', () => openInfoPanel(buildPokeyenInfoView));
    document.getElementById('sound-toggle').addEventListener('click', () => openInfoPanel(buildSettingsView));
    document.getElementById('badges-button').addEventListener('click', () => openInfoPanel(buildBadgesView));
    document.getElementById('achievements-button').addEventListener('click', () => openInfoPanel(buildAchievementsView));
    document.getElementById('shinies-button').addEventListener('click', () => openInfoPanel(buildShiniesView));
    document.getElementById('shop-button').addEventListener('click', () => openInfoPanel(buildShopView));
    document.getElementById('bag-button').addEventListener('click', () => openInfoPanel(buildBagView));
    document.getElementById('map-button').addEventListener('click', () => openInfoPanel(buildMapView));

    document.getElementById('pokemon-display').addEventListener('click', () => {
      if (gameMode === 'initial') {
        startRound();
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if(isMenuOpen) {
          exitPokedexView();
        }
        return;
      }
      
      if (isMenuOpen) return;

      if (gameMode === 'main' || gameMode === 'bonus' || gameMode === 'gym' || gameMode === 'e4') {
        const answers = document.querySelectorAll('.answer-button');
        if (answers.length > 0) {
          const keyMap = {'1': 0, '2': 1, '3': 2, '4': 3};
          if (e.key in keyMap && answers[keyMap[e.key]]) {
            answers[keyMap[e.key]].click();
          }
        }
      }
    });

    // --- REVISED GAME INITIALIZATION ---
    function initGame() {
        loadGameData();
        updatePokedexUI();
        setupInitialView();

        if (pokemonData.length === 0) {
            // If data is still missing after setup, display an error.
            document.getElementById("question-text").textContent = "Error: Pok√©mon data not found. Please add the JSON data to the index.html file to play.";
            document.getElementById("pokemon-display").style.cursor = 'default';
            const pokemonDisplay = document.getElementById('pokemon-display');
            // Remove the event listener to prevent starting a broken round
            const newPokemonDisplay = pokemonDisplay.cloneNode(true);
            pokemonDisplay.parentNode.replaceChild(newPokemonDisplay, pokemonDisplay);
        }
    }

    // Call initGame() once the DOM is ready to be manipulated.
    document.addEventListener('DOMContentLoaded', initGame);
  </script>
  
</body>
</html>
