<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Install The Pokédex Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="manifest" href="manifest.json">
<style>
    /* --- Styles for the Install Screen ONLY --- */
    * {
        box-sizing: border-box; /* Ensures padding doesn't add to width */
    }
    body, html {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    #install-screen { 
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%); 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        text-align: center; 
        z-index: 2000; 
        font-family: 'Arial', sans-serif; 
        color: white; 
        padding: 1rem; 
    }
    .install-container { 
        max-width: 400px; 
        display: flex; 
        flex-direction: column; 
        align-items: center; 
        gap: 1rem; 
    }
    .install-logo { 
        width: 150px; 
        height: 150px; 
        filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3)); 
    }
    .install-title { 
        font-size: 2.5rem; 
        margin: 0; 
        text-shadow: 2px 2px 4px rgba(0,0,0,0.4); 
    }
    .install-text { 
        font-size: 1rem; 
        line-height: 1.5; 
        opacity: 0.9; 
    }
    #install-button { 
        background: linear-gradient(145deg, #ffd700, #feca57); 
        color: #333; 
        border: none; 
        border-radius: 15px; 
        padding: 1rem 1.5rem; 
        font-size: 1.2rem; 
        font-weight: bold; 
        cursor: pointer; 
        box-shadow: 0 5px 20px rgba(0,0,0,0.3); 
        transition: all 0.3s ease-out; 
        min-width: 250px; 
    }
    #install-button:hover:not(:disabled) { 
        transform: scale(1.05); 
    }
    #install-button:disabled { 
        background: #aaa; 
        cursor: not-allowed; 
        opacity: 0.7; 
    }
</style>

</head>
<body>

  <div id="install-screen">
    <div class="install-container">
        <img src="icons/icon-512x512.png" alt="The Pokédex Game" class="install-logo">
        <h1 class="install-title">The Pokédex Game</h1>
        <p class="install-text">For the best experience, please install the app to your device. It's free and works offline!</p>
        <button id="install-button" class="install-button" disabled>
            <span id="install-button-text">Checking Compatibility...</span>
        </button>
        <p id="post-install-instructions" class="install-text" hidden>
            Success! Close this browser tab and open "The Pokédex Game" from your home screen or desktop.
        </p>
    </div>
  </div>

  <script>
    // This script handles the PWA installation flow for the install page.
    document.addEventListener('DOMContentLoaded', () => {
      const installButton = document.getElementById('install-button');
      const installButtonText = document.getElementById('install-button-text');
      const postInstallInstructions = document.getElementById('post-install-instructions');
      let deferredPrompt;

      // Register the service worker.
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
      }

      // Listen for the browser's install prompt event.
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installButtonText.textContent = 'Install The App';
        installButton.disabled = false;
      });

      // Handle the click on our custom install button.
      installButton.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') {
          installButton.hidden = true;
          postInstallInstructions.hidden = false;
        }
        deferredPrompt = null;
      });
    });
  </script>
  
</body>
</html>
